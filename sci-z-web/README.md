# é«˜æ ¡ç§‘ç ”é¡¹ç›®ç®¡ç†å¹³å° - å¼€å‘æ–‡æ¡£

## ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#2-æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
- [3. æŠ€æœ¯æ¶æ„](#3-æŠ€æœ¯æ¶æ„)
- [4. æ•°æ®åº“è®¾è®¡](#4-æ•°æ®åº“è®¾è®¡)
- [5. åç«¯è®¾è®¡](#5-åç«¯è®¾è®¡)
- [6. å‰ç«¯è®¾è®¡](#6-å‰ç«¯è®¾è®¡)
- [7. éƒ¨ç½²è¯´æ˜](#7-éƒ¨ç½²è¯´æ˜)

---

## 1. é¡¹ç›®æ¦‚è¿°

é«˜æ ¡ç§‘ç ”é¡¹ç›®ç®¡ç†å¹³å°æ˜¯ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„ã€å‰åç«¯åˆ†ç¦»ã€DDD é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ™ºèƒ½åŒ–ç§‘ç ”é¡¹ç›®å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿã€‚å¹³å°ä»¥ Dify å·¥ä½œæµä¸ºæ ¸å¿ƒï¼Œå®ç°ç§‘ç ”é¡¹ç›®ä»ç”³æŠ¥ã€æ‰§è¡Œåˆ°éªŒæ”¶çš„æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–ç®¡ç†ã€‚

### 1.1 æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **å¾®æœåŠ¡æ¶æ„**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼ŒæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œæ˜“äºæ‰©å±•
- ğŸ¯ **DDD é¢†åŸŸé©±åŠ¨**ï¼šæ¸…æ™°çš„é¢†åŸŸè¾¹ç•Œï¼Œé«˜å†…èšä½è€¦åˆ
- ğŸ¤– **AI æ™ºèƒ½åŒ–**ï¼šé›†æˆ Dify å¹³å°ï¼Œå®ç°æ™ºèƒ½å·¥ä½œæµç¼–æ’
- ğŸ“Š **å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šè¦†ç›–ç”³æŠ¥ã€æ‰§è¡Œã€éªŒæ”¶å…¨æµç¨‹
- ğŸ”’ **å®‰å…¨å¯é **ï¼šåŸºäº Sa-Token çš„æƒé™è®¤è¯ä½“ç³»

### 1.2 æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯æ ˆ

- Vue.js 3.x - æ¸è¿›å¼ JavaScript æ¡†æ¶
- Vue Router 4.x - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨
- Pinia - æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†
- Element Plus - Vue 3 ç»„ä»¶åº“
- Axios - HTTP å®¢æˆ·ç«¯
- Vite - å‰ç«¯æ„å»ºå·¥å…·

#### åç«¯æŠ€æœ¯æ ˆ

- Java 11 (LTS) - ç¼–ç¨‹è¯­è¨€
- Spring Boot 2.7.x - åº”ç”¨æ¡†æ¶
- Spring Cloud Alibaba - å¾®æœåŠ¡æ¡†æ¶
- PostgreSQL 14+ - å…³ç³»å‹æ•°æ®åº“
- Redis 6+ - ç¼“å­˜ä¸ä¼šè¯
- Apache Kafka 3.x - æ¶ˆæ¯é˜Ÿåˆ—
- Minio - å¯¹è±¡å­˜å‚¨
- Sa-Token - æƒé™è®¤è¯
- MyBatis-Plus 3.5.x - ORM æ¡†æ¶
- LangChain4j - LLM é›†æˆæ¡†æ¶

#### AI å¹³å°

- Dify - å·¥ä½œæµç¼–æ’ä¸çŸ¥è¯†åº“ç®¡ç†
- Vector Database - å‘é‡æ•°æ®åº“ï¼ˆæ”¯æŒè¯­ä¹‰æœç´¢ï¼‰

---

## 2. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 2.1 ç”¨æˆ·ç®¡ç†æ¨¡å—

#### åŠŸèƒ½æè¿°

è´Ÿè´£ç”¨æˆ·èº«ä»½è¯†åˆ«ã€æƒé™åˆ†é…ä¸ç®¡ç†ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨ä¸æ•°æ®éš”ç¦»ã€‚

#### æ ¸å¿ƒåŠŸèƒ½

- ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼ˆæ”¯æŒå­¦å·¥å·/æ•™å·¥å·ï¼‰
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- ä¸ªäººä¿¡æ¯ç®¡ç†
- ç”¨æˆ·æƒé™ç®¡ç†
- ç™»å½•æ—¥å¿—ä¸å®¡è®¡

#### è§’è‰²å®šä¹‰

- **è¶…çº§ç®¡ç†å‘˜**ï¼šç³»ç»Ÿé…ç½®ã€ç”¨æˆ·ç®¡ç†ã€å…¨å±€æƒé™
- **ç§‘ç ”ç®¡ç†å‘˜**ï¼šé¡¹ç›®å®¡æ‰¹ã€è¿›åº¦ç›‘ç£ã€æˆæœç®¡ç†
- **ç§‘ç ”äººå‘˜**ï¼šé¡¹ç›®ç”³æŠ¥ã€æ‰§è¡Œã€éªŒæ”¶

### 2.2 ç”³æŠ¥æ¨¡å—

#### åŠŸèƒ½æè¿°

ç§‘ç ”é¡¹ç›®ç”Ÿå‘½å‘¨æœŸçš„èµ·ç‚¹ï¼Œè´Ÿè´£æ¥æ”¶é¡¹ç›®ç”³æŠ¥ä¿¡æ¯å¹¶è§¦å‘ Dify å·¥ä½œæµã€‚

#### æ ¸å¿ƒåŠŸèƒ½

- é¡¹ç›®ç”³æŠ¥ä¿¡æ¯å¡«å†™ï¼ˆç ”ç©¶æ–¹å‘ã€ç ”ç©¶é¢†åŸŸï¼‰
- Dify ç”³æŠ¥å·¥ä½œæµè§¦å‘
- ç”³æŠ¥çŠ¶æ€è·Ÿè¸ª
- å†å²ç”³æŠ¥è®°å½•æŸ¥è¯¢
- ç”³æŠ¥ä¿¡æ¯ä¿®æ”¹ä¸æ’¤å›

### 2.3 æ‰§è¡Œæ¨¡å—ï¼ˆé¡¹ç›®ç®¡ç†ï¼‰

#### åŠŸèƒ½æè¿°

ç§‘ç ”é¡¹ç›®ç®¡ç†æ ¸å¿ƒï¼Œæä¾›é¡¹ç›®æ•°æ®ã€æ–‡çŒ®èµ„æ–™é›†ä¸­ç®¡ç†ï¼Œå……åˆ†åˆ©ç”¨ Dify çŸ¥è¯†åº“èƒ½åŠ›ã€‚

#### æ ¸å¿ƒåŠŸèƒ½

- é¡¹ç›®åˆ—è¡¨ä¸è¯¦æƒ…å±•ç¤º
- å¤šæ ¼å¼æ–‡ä»¶æ‰¹é‡ä¸Šä¼ ï¼ˆdoc/docx/xlsx/pdf/jpg/png ç­‰ï¼‰
- æ–‡ä»¶åœ¨çº¿é¢„è§ˆ
- Dify çŸ¥è¯†åº“åŒæ­¥
- çŸ¥è¯†åº“è¯­ä¹‰æœç´¢
- é¡¹ç›®è¿›åº¦ç®¡ç†
- é¡¹ç›®å›¢é˜Ÿåä½œ
- é¡¹ç›®å˜æ›´è®°å½•

### 2.4 éªŒæ”¶æ¨¡å—

#### åŠŸèƒ½æè¿°

é¡¹ç›®ç”Ÿå‘½å‘¨æœŸæ”¶å°¾é˜¶æ®µï¼Œè‡ªåŠ¨åŒ–ç”Ÿæˆç§‘æŠ€æŠ¥å‘Šå’Œè‡ªè¯„æŠ¥å‘Šã€‚

#### æ ¸å¿ƒåŠŸèƒ½

- éªŒæ”¶ç”³è¯·å‘èµ·
- ç§‘æŠ€æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆï¼ˆæ”¯æŒç™¾ä¸‡å­—çº§åˆ«ï¼‰
- è‡ªè¯„æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ
- æŠ¥å‘Šåœ¨çº¿é¢„è§ˆä¸ä¸‹è½½
- éªŒæ”¶çŠ¶æ€è·Ÿè¸ª
- éªŒæ”¶å†å²è®°å½•

---

## 3. æŠ€æœ¯æ¶æ„

### 3.1 æ€»ä½“æ¶æ„

å¹³å°é‡‡ç”¨**å¾®æœåŠ¡æ¶æ„ + å‰åç«¯åˆ†ç¦» + DDD é¢†åŸŸé©±åŠ¨è®¾è®¡**æ¨¡å¼ã€‚

```mermaid
graph TB
    %% å­å›¾å®šä¹‰
    subgraph å‰ç«¯å±‚
        A[Vue.js Web åº”ç”¨]
    end

    subgraph API ç½‘å…³å±‚
        B[Nginx\nAPI ç½‘å…³]
        C[Sa-Token<br/>è®¤è¯æˆæƒä¸­å¿ƒ]
    end

    subgraph å¾®æœåŠ¡å±‚
        D[ç”¨æˆ·æœåŠ¡<br/>User Service]
        E[ç”³æŠ¥æœåŠ¡<br/>Declaration Service]
        F[é¡¹ç›®ç®¡ç†æœåŠ¡<br/>Project Service]
        G[éªŒæ”¶æœåŠ¡<br/>Acceptance Service]
        H[æ–‡ä»¶æœåŠ¡<br/>File Service]
        I[AI é›†æˆæœåŠ¡<br/>AI Integration Service]
    end

    subgraph åŸºç¡€è®¾æ–½å±‚
        J[(PostgreSQL<br/>å…³ç³»å‹æ•°æ®åº“)]
        K[(Redis<br/>ç¼“å­˜)]
        L[Kafka<br/>æ¶ˆæ¯é˜Ÿåˆ—]
        M[MinIO<br/>å¯¹è±¡å­˜å‚¨]
    end

    subgraph AI å¹³å°
        N[Dify å¹³å°]
        O[å‘é‡æ•°æ®åº“<br/>Vector DB]
        P[LLM æ¨¡å‹<br/>Large Language Model]
    end

    %% è¿æ¥å…³ç³»
    A -->|HTTPS/REST API| B
    B -->|è·¯ç”±è½¬å‘| C
    C -->|è®¤è¯é€šè¿‡| D
    C -->|è®¤è¯é€šè¿‡| E
    C -->|è®¤è¯é€šè¿‡| F
    C -->|è®¤è¯é€šè¿‡| G
    C -->|è®¤è¯é€šè¿‡| H
    C -->|è®¤è¯é€šè¿‡| I

    D -->|è¯»å†™ç”¨æˆ·æ•°æ®| J
    E -->|è¯»å†™ç”³æŠ¥æ•°æ®| J
    F -->|è¯»å†™é¡¹ç›®æ•°æ®| J
    G -->|è¯»å†™éªŒæ”¶æ•°æ®| J
    H -->|è¯»å†™æ–‡ä»¶å…ƒæ•°æ®| J

    D -->|ä¼šè¯/ç¼“å­˜| K
    E -->|ç¼“å­˜çƒ­ç‚¹æ•°æ®| K
    F -->|ç¼“å­˜é¡¹ç›®çŠ¶æ€| K
    G -->|ç¼“å­˜éªŒæ”¶è¿›åº¦| K

    E -->|å‘å¸ƒç”³æŠ¥äº‹ä»¶| L
    F -->|å‘å¸ƒé¡¹ç›®è¿›åº¦äº‹ä»¶| L
    G -->|å‘å¸ƒéªŒæ”¶çŠ¶æ€äº‹ä»¶| L

    H -->|ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶| M

    I -->|è°ƒç”¨ API + LangChain4j| N
    N -->|çŸ¥è¯†åº“å­˜å‚¨| O
    N -->|æ¨¡å‹æ¨ç†| P

    F -->|åŒæ­¥æ–‡æ¡£/è¿›åº¦| I
    E -->|ç”³æŠ¥å†…å®¹| I
    G -->|éªŒæ”¶ææ–™| I

    %% æ ·å¼å¢å¼º
    classDef front fill:#e1f5fe,stroke:#03a9f4,stroke-width:2px;
    classDef gate fill:#bbdefb,stroke:#1976d2;
    classDef micro fill:#c8e6c9,stroke:#43a047;
    classDef infra fill:#ffecb3,stroke:#ff8f00;
    classDef ai fill:#f3e5f5,stroke:#9c27b0;

    class A front
    class B,C gate
    class D,E,F,G,H,I micro
    class J,K,L,M infra
    class N,O,P ai
```

### 3.2 DDD é¢†åŸŸé©±åŠ¨è®¾è®¡

#### é¢†åŸŸåˆ’åˆ†

**ç”¨æˆ·é¢†åŸŸï¼ˆUser Domainï¼‰**

- ç”¨æˆ·èšåˆæ ¹ï¼šUser
- è§’è‰²å®ä½“ï¼šRole
- æƒé™å®ä½“ï¼šPermission
- å€¼å¯¹è±¡ï¼šUserProfile

**é¡¹ç›®ç”³æŠ¥é¢†åŸŸï¼ˆDeclaration Domainï¼‰**

- ç”³æŠ¥èšåˆæ ¹ï¼šDeclaration
- å€¼å¯¹è±¡ï¼šResearchDirection, ResearchField
- é¢†åŸŸæœåŠ¡ï¼šDeclarationWorkflowService

**é¡¹ç›®ç®¡ç†é¢†åŸŸï¼ˆProject Domainï¼‰**

- é¡¹ç›®èšåˆæ ¹ï¼šProject
- æ–‡æ¡£å®ä½“ï¼šDocument
- è¿›åº¦å®ä½“ï¼šProgress
- å€¼å¯¹è±¡ï¼šProjectStatus
- é¢†åŸŸæœåŠ¡ï¼šKnowledgeBaseService

**éªŒæ”¶é¢†åŸŸï¼ˆAcceptance Domainï¼‰**

- éªŒæ”¶èšåˆæ ¹ï¼šAcceptance
- æŠ¥å‘Šå®ä½“ï¼šReport
- å€¼å¯¹è±¡ï¼šReportType, AcceptanceStatus
- é¢†åŸŸæœåŠ¡ï¼šReportGenerationService

### 3.3 å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™

1. **æŒ‰ä¸šåŠ¡èƒ½åŠ›æ‹†åˆ†**ï¼šæ¯ä¸ªæœåŠ¡å¯¹åº”ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ
2. **å•ä¸€èŒè´£**ï¼šæœåŠ¡åŠŸèƒ½å†…èšï¼ŒèŒè´£æ˜ç¡®
3. **æ¾è€¦åˆ**ï¼šæœåŠ¡é—´é€šè¿‡ API/æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡
4. **æ•°æ®è‡ªæ²»**ï¼šæ¯ä¸ªæœåŠ¡ç®¡ç†è‡ªå·±çš„æ•°æ®åº“

---

## 4. æ•°æ®åº“è®¾è®¡

### 4.1 è¡¨ç»“æ„è®¾è®¡

#### 4.1.1 ç”¨æˆ·æœåŠ¡è¡¨

**ç”¨æˆ·è¡¨ï¼ˆsys_userï¼‰**

```sql
CREATE TABLE sys_user (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    password VARCHAR(255) NOT NULL,
    real_name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    avatar_url VARCHAR(500),
    department VARCHAR(100),
    title VARCHAR(50),
    status SMALLINT DEFAULT 1,
    is_deleted SMALLINT DEFAULT 0,
    created_by BIGINT,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_user IS 'ç³»ç»Ÿç”¨æˆ·è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_user.id IS 'ç”¨æˆ·IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_user.username IS 'ç”¨æˆ·åï¼Œå”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç™»å½•';
COMMENT ON COLUMN sys_user.password IS 'å¯†ç ï¼ŒåŠ å¯†å­˜å‚¨';
COMMENT ON COLUMN sys_user.real_name IS 'çœŸå®å§“å';
COMMENT ON COLUMN sys_user.email IS 'é‚®ç®±åœ°å€';
COMMENT ON COLUMN sys_user.phone IS 'æ‰‹æœºå·ç ';
COMMENT ON COLUMN sys_user.avatar_url IS 'å¤´åƒURL';
COMMENT ON COLUMN sys_user.department IS 'æ‰€å±é™¢ç³»/éƒ¨é—¨';
COMMENT ON COLUMN sys_user.title IS 'èŒç§°';
COMMENT ON COLUMN sys_user.status IS 'ç”¨æˆ·çŠ¶æ€ï¼š1=æ­£å¸¸ï¼Œ0=ç¦ç”¨';
COMMENT ON COLUMN sys_user.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_user.created_by IS 'åˆ›å»ºäººID';
COMMENT ON COLUMN sys_user.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN sys_user.updated_by IS 'æ›´æ–°äººID';
COMMENT ON COLUMN sys_user.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_user_username ON sys_user(username) WHERE is_deleted = 0;
CREATE INDEX idx_sys_user_email ON sys_user(email);
CREATE INDEX idx_sys_user_phone ON sys_user(phone);
CREATE INDEX idx_sys_user_status ON sys_user(status);
CREATE INDEX idx_sys_user_is_deleted ON sys_user(is_deleted);
CREATE INDEX idx_sys_user_created_time ON sys_user(created_time);
```

**è§’è‰²è¡¨ï¼ˆsys_roleï¼‰**

```sql
CREATE TABLE sys_role (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    role_name VARCHAR(50) NOT NULL,
    role_code VARCHAR(50) NOT NULL,
    description VARCHAR(255),
    sort_order INT DEFAULT 0,
    status SMALLINT DEFAULT 1,
    is_deleted SMALLINT DEFAULT 0,
    created_by BIGINT,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_role IS 'ç³»ç»Ÿè§’è‰²è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_role.id IS 'è§’è‰²IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_role.role_name IS 'è§’è‰²åç§°ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN sys_role.role_code IS 'è§’è‰²ç¼–ç ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN sys_role.description IS 'è§’è‰²æè¿°';
COMMENT ON COLUMN sys_role.sort_order IS 'æ’åº';
COMMENT ON COLUMN sys_role.status IS 'è§’è‰²çŠ¶æ€ï¼š1=å¯ç”¨ï¼Œ0=ç¦ç”¨';
COMMENT ON COLUMN sys_role.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_role.created_by IS 'åˆ›å»ºäººID';
COMMENT ON COLUMN sys_role.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN sys_role.updated_by IS 'æ›´æ–°äººID';
COMMENT ON COLUMN sys_role.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_role_name ON sys_role(role_name) WHERE is_deleted = 0;
CREATE UNIQUE INDEX uk_sys_role_code ON sys_role(role_code) WHERE is_deleted = 0;
CREATE INDEX idx_sys_role_status ON sys_role(status);
CREATE INDEX idx_sys_role_is_deleted ON sys_role(is_deleted);
CREATE INDEX idx_sys_role_sort_order ON sys_role(sort_order);
```

**æƒé™è¡¨ï¼ˆsys_permissionï¼‰**

```sql
CREATE TABLE sys_permission (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    parent_id BIGINT DEFAULT 0,
    permission_name VARCHAR(50) NOT NULL,
    permission_code VARCHAR(100) NOT NULL,
    permission_type SMALLINT NOT NULL,
    path VARCHAR(200),
    component VARCHAR(200),
    icon VARCHAR(100),
    sort_order INT DEFAULT 0,
    status SMALLINT DEFAULT 1,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_permission IS 'ç³»ç»Ÿæƒé™è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_permission.id IS 'æƒé™IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_permission.parent_id IS 'çˆ¶æƒé™IDï¼Œ0è¡¨ç¤ºé¡¶çº§æƒé™';
COMMENT ON COLUMN sys_permission.permission_name IS 'æƒé™åç§°';
COMMENT ON COLUMN sys_permission.permission_code IS 'æƒé™ç¼–ç ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN sys_permission.permission_type IS 'æƒé™ç±»å‹ï¼š1=èœå•ï¼Œ2=æŒ‰é’®ï¼Œ3=API';
COMMENT ON COLUMN sys_permission.path IS 'è·¯ç”±è·¯å¾„';
COMMENT ON COLUMN sys_permission.component IS 'ç»„ä»¶è·¯å¾„';
COMMENT ON COLUMN sys_permission.icon IS 'å›¾æ ‡';
COMMENT ON COLUMN sys_permission.sort_order IS 'æ’åº';
COMMENT ON COLUMN sys_permission.status IS 'æƒé™çŠ¶æ€ï¼š1=å¯ç”¨ï¼Œ0=ç¦ç”¨';
COMMENT ON COLUMN sys_permission.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_permission.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN sys_permission.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_permission_code ON sys_permission(permission_code) WHERE is_deleted = 0;
CREATE INDEX idx_sys_permission_parent_id ON sys_permission(parent_id);
CREATE INDEX idx_sys_permission_type ON sys_permission(permission_type);
CREATE INDEX idx_sys_permission_status ON sys_permission(status);
CREATE INDEX idx_sys_permission_is_deleted ON sys_permission(is_deleted);
CREATE INDEX idx_sys_permission_sort_order ON sys_permission(sort_order);
```

**ç”¨æˆ·è§’è‰²å…³è”è¡¨ï¼ˆsys_user_roleï¼‰**

```sql
CREATE TABLE sys_user_role (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL,
    role_id BIGINT NOT NULL,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_user_role IS 'ç”¨æˆ·è§’è‰²å…³è”è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_user_role.id IS 'å…³è”IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_user_role.user_id IS 'ç”¨æˆ·IDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN sys_user_role.role_id IS 'è§’è‰²IDï¼Œå…³è”sys_roleè¡¨';
COMMENT ON COLUMN sys_user_role.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_user_role.created_time IS 'åˆ›å»ºæ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_user_role ON sys_user_role(user_id, role_id) WHERE is_deleted = 0;
CREATE INDEX idx_sys_user_role_user_id ON sys_user_role(user_id);
CREATE INDEX idx_sys_user_role_role_id ON sys_user_role(role_id);
CREATE INDEX idx_sys_user_role_is_deleted ON sys_user_role(is_deleted);
```

**è§’è‰²æƒé™å…³è”è¡¨ï¼ˆsys_role_permissionï¼‰**

```sql
CREATE TABLE sys_role_permission (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    role_id BIGINT NOT NULL,
    permission_id BIGINT NOT NULL,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_role_permission IS 'è§’è‰²æƒé™å…³è”è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_role_permission.id IS 'å…³è”IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_role_permission.role_id IS 'è§’è‰²IDï¼Œå…³è”sys_roleè¡¨';
COMMENT ON COLUMN sys_role_permission.permission_id IS 'æƒé™IDï¼Œå…³è”sys_permissionè¡¨';
COMMENT ON COLUMN sys_role_permission.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_role_permission.created_time IS 'åˆ›å»ºæ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_role_permission ON sys_role_permission(role_id, permission_id) WHERE is_deleted = 0;
CREATE INDEX idx_sys_role_permission_role_id ON sys_role_permission(role_id);
CREATE INDEX idx_sys_role_permission_permission_id ON sys_role_permission(permission_id);
CREATE INDEX idx_sys_role_permission_is_deleted ON sys_role_permission(is_deleted);
```

**ç™»å½•æ—¥å¿—è¡¨ï¼ˆsys_login_logï¼‰**

```sql
CREATE TABLE sys_login_log (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT,
    username VARCHAR(50),
    login_ip VARCHAR(50),
    login_location VARCHAR(100),
    browser VARCHAR(50),
    os VARCHAR(50),
    status SMALLINT,
    message VARCHAR(255),
    is_deleted SMALLINT DEFAULT 0,
    login_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_login_log IS 'ç”¨æˆ·ç™»å½•æ—¥å¿—è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_login_log.id IS 'æ—¥å¿—IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_login_log.user_id IS 'ç”¨æˆ·IDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN sys_login_log.username IS 'ç”¨æˆ·å';
COMMENT ON COLUMN sys_login_log.login_ip IS 'ç™»å½•IPåœ°å€';
COMMENT ON COLUMN sys_login_log.login_location IS 'ç™»å½•åœ°ç‚¹';
COMMENT ON COLUMN sys_login_log.browser IS 'æµè§ˆå™¨ä¿¡æ¯';
COMMENT ON COLUMN sys_login_log.os IS 'æ“ä½œç³»ç»Ÿä¿¡æ¯';
COMMENT ON COLUMN sys_login_log.status IS 'ç™»å½•çŠ¶æ€ï¼š1=æˆåŠŸï¼Œ0=å¤±è´¥';
COMMENT ON COLUMN sys_login_log.message IS 'æç¤ºæ¶ˆæ¯';
COMMENT ON COLUMN sys_login_log.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_login_log.login_time IS 'ç™»å½•æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_sys_login_log_user_id ON sys_login_log(user_id);
CREATE INDEX idx_sys_login_log_username ON sys_login_log(username);
CREATE INDEX idx_sys_login_log_login_ip ON sys_login_log(login_ip);
CREATE INDEX idx_sys_login_log_status ON sys_login_log(status);
CREATE INDEX idx_sys_login_log_login_time ON sys_login_log(login_time);
CREATE INDEX idx_sys_login_log_is_deleted ON sys_login_log(is_deleted);
```

#### 4.1.2 ç”³æŠ¥æœåŠ¡è¡¨

**é¡¹ç›®ç”³æŠ¥è¡¨ï¼ˆproject_declarationï¼‰**

```sql
CREATE TABLE project_declaration (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    declaration_no VARCHAR(50) NOT NULL,
    user_id BIGINT NOT NULL,
    research_direction TEXT NOT NULL,
    research_field TEXT NOT NULL,
    dify_project_id VARCHAR(100),
    dify_workflow_id VARCHAR(100),
    declaration_status SMALLINT DEFAULT 0,
    workflow_result TEXT,
    failure_reason VARCHAR(500),
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    submitted_time TIMESTAMP,
    approved_time TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project_declaration IS 'é¡¹ç›®ç”³æŠ¥è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project_declaration.id IS 'ç”³æŠ¥IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project_declaration.declaration_no IS 'ç”³æŠ¥ç¼–å·ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN project_declaration.user_id IS 'ç”³æŠ¥äººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_declaration.research_direction IS 'ç ”ç©¶æ–¹å‘';
COMMENT ON COLUMN project_declaration.research_field IS 'ç ”ç©¶é¢†åŸŸ';
COMMENT ON COLUMN project_declaration.dify_project_id IS 'Difyé¡¹ç›®å”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN project_declaration.dify_workflow_id IS 'Difyå·¥ä½œæµID';
COMMENT ON COLUMN project_declaration.declaration_status IS 'ç”³æŠ¥çŠ¶æ€ï¼š0=è‰ç¨¿ï¼Œ1=ç”³æŠ¥ä¸­ï¼Œ2=ç”³æŠ¥æˆåŠŸï¼Œ3=ç”³æŠ¥å¤±è´¥ï¼Œ4=å·²æ’¤å›';
COMMENT ON COLUMN project_declaration.workflow_result IS 'Difyå·¥ä½œæµè¿”å›ç»“æœï¼ˆJSONæ ¼å¼ï¼‰';
COMMENT ON COLUMN project_declaration.failure_reason IS 'å¤±è´¥åŸå› ';
COMMENT ON COLUMN project_declaration.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project_declaration.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN project_declaration.updated_time IS 'æ›´æ–°æ—¶é—´';
COMMENT ON COLUMN project_declaration.submitted_time IS 'æäº¤æ—¶é—´';
COMMENT ON COLUMN project_declaration.approved_time IS 'å®¡æ‰¹é€šè¿‡æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_project_declaration_no ON project_declaration(declaration_no) WHERE is_deleted = 0;
CREATE INDEX idx_project_declaration_user_id ON project_declaration(user_id);
CREATE INDEX idx_project_declaration_status ON project_declaration(declaration_status);
CREATE INDEX idx_project_declaration_is_deleted ON project_declaration(is_deleted);
CREATE INDEX idx_project_declaration_created_time ON project_declaration(created_time);
```

#### 4.1.3 é¡¹ç›®ç®¡ç†æœåŠ¡è¡¨

**é¡¹ç›®è¡¨ï¼ˆprojectï¼‰**

```sql
CREATE TABLE project (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_no VARCHAR(50) NOT NULL,
    declaration_id BIGINT,
    project_name VARCHAR(200) NOT NULL,
    project_leader_id BIGINT NOT NULL,
    research_direction TEXT,
    research_field TEXT,
    dify_project_id VARCHAR(100),
    dify_knowledge_base_id VARCHAR(100),
    project_status SMALLINT DEFAULT 0,
    start_date DATE,
    end_date DATE,
    actual_end_date DATE,
    progress INT DEFAULT 0,
    description TEXT,
    is_deleted SMALLINT DEFAULT 0,
    created_by BIGINT,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project IS 'é¡¹ç›®è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project.id IS 'é¡¹ç›®IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project.project_no IS 'é¡¹ç›®ç¼–å·ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN project.declaration_id IS 'å…³è”ç”³æŠ¥IDï¼Œå…³è”project_declarationè¡¨';
COMMENT ON COLUMN project.project_name IS 'é¡¹ç›®åç§°';
COMMENT ON COLUMN project.project_leader_id IS 'é¡¹ç›®è´Ÿè´£äººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project.research_direction IS 'ç ”ç©¶æ–¹å‘';
COMMENT ON COLUMN project.research_field IS 'ç ”ç©¶é¢†åŸŸ';
COMMENT ON COLUMN project.dify_project_id IS 'Difyé¡¹ç›®ID';
COMMENT ON COLUMN project.dify_knowledge_base_id IS 'DifyçŸ¥è¯†åº“ID';
COMMENT ON COLUMN project.project_status IS 'é¡¹ç›®çŠ¶æ€ï¼š0=å¾…å¯åŠ¨ï¼Œ1=è¿›è¡Œä¸­ï¼Œ2=å·²æš‚åœï¼Œ3=å·²å®Œæˆï¼Œ4=å·²ç»ˆæ­¢';
COMMENT ON COLUMN project.start_date IS 'å¼€å§‹æ—¥æœŸ';
COMMENT ON COLUMN project.end_date IS 'ç»“æŸæ—¥æœŸ';
COMMENT ON COLUMN project.actual_end_date IS 'å®é™…ç»“æŸæ—¥æœŸ';
COMMENT ON COLUMN project.progress IS 'é¡¹ç›®è¿›åº¦ï¼ˆç™¾åˆ†æ¯”ï¼‰';
COMMENT ON COLUMN project.description IS 'é¡¹ç›®æè¿°';
COMMENT ON COLUMN project.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project.created_by IS 'åˆ›å»ºäººID';
COMMENT ON COLUMN project.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN project.updated_by IS 'æ›´æ–°äººID';
COMMENT ON COLUMN project.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_project_no ON project(project_no) WHERE is_deleted = 0;
CREATE INDEX idx_project_declaration_id ON project(declaration_id);
CREATE INDEX idx_project_leader_id ON project(project_leader_id);
CREATE INDEX idx_project_status ON project(project_status);
CREATE INDEX idx_project_is_deleted ON project(is_deleted);
CREATE INDEX idx_project_created_time ON project(created_time);
```

**é¡¹ç›®æˆå‘˜è¡¨ï¼ˆproject_memberï¼‰**

```sql
CREATE TABLE project_member (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    role_type SMALLINT,
    join_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    leave_time TIMESTAMP,
    status SMALLINT DEFAULT 1,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project_member IS 'é¡¹ç›®æˆå‘˜è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project_member.id IS 'æˆå‘˜IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project_member.project_id IS 'é¡¹ç›®IDï¼Œå…³è”projectè¡¨';
COMMENT ON COLUMN project_member.user_id IS 'æˆå‘˜ç”¨æˆ·IDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_member.role_type IS 'è§’è‰²ç±»å‹ï¼š1=è´Ÿè´£äººï¼Œ2=æ ¸å¿ƒæˆå‘˜ï¼Œ3=æ™®é€šæˆå‘˜';
COMMENT ON COLUMN project_member.join_time IS 'åŠ å…¥æ—¶é—´';
COMMENT ON COLUMN project_member.leave_time IS 'ç¦»å¼€æ—¶é—´';
COMMENT ON COLUMN project_member.status IS 'æˆå‘˜çŠ¶æ€ï¼š1=æ­£å¸¸ï¼Œ0=å·²ç§»é™¤';
COMMENT ON COLUMN project_member.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project_member.created_time IS 'åˆ›å»ºæ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_project_member ON project_member(project_id, user_id) WHERE is_deleted = 0;
CREATE INDEX idx_project_member_project_id ON project_member(project_id);
CREATE INDEX idx_project_member_user_id ON project_member(user_id);
CREATE INDEX idx_project_member_role_type ON project_member(role_type);
CREATE INDEX idx_project_member_status ON project_member(status);
CREATE INDEX idx_project_member_is_deleted ON project_member(is_deleted);
```

**é¡¹ç›®æ–‡æ¡£è¡¨ï¼ˆproject_documentï¼‰**

```sql
CREATE TABLE project_document (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_id BIGINT NOT NULL,
    document_name VARCHAR(255) NOT NULL,
    document_type VARCHAR(50),
    file_size BIGINT,
    minio_bucket VARCHAR(100),
    minio_object_name VARCHAR(500),
    minio_url VARCHAR(1000),
    dify_document_id VARCHAR(100),
    upload_user_id BIGINT,
    document_status SMALLINT DEFAULT 1,
    sync_status SMALLINT DEFAULT 0,
    sync_error_msg TEXT,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project_document IS 'é¡¹ç›®æ–‡æ¡£è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project_document.id IS 'æ–‡æ¡£IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project_document.project_id IS 'é¡¹ç›®IDï¼Œå…³è”projectè¡¨';
COMMENT ON COLUMN project_document.document_name IS 'æ–‡æ¡£åç§°';
COMMENT ON COLUMN project_document.document_type IS 'æ–‡æ¡£ç±»å‹ï¼šdoc/docx/xlsx/pdf/jpg/pngç­‰';
COMMENT ON COLUMN project_document.file_size IS 'æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰';
COMMENT ON COLUMN project_document.minio_bucket IS 'Minioå­˜å‚¨æ¡¶';
COMMENT ON COLUMN project_document.minio_object_name IS 'Minioå¯¹è±¡åç§°';
COMMENT ON COLUMN project_document.minio_url IS 'Minioè®¿é—®URL';
COMMENT ON COLUMN project_document.dify_document_id IS 'DifyçŸ¥è¯†åº“æ–‡æ¡£ID';
COMMENT ON COLUMN project_document.upload_user_id IS 'ä¸Šä¼ ç”¨æˆ·IDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_document.document_status IS 'æ–‡æ¡£çŠ¶æ€ï¼š0=å·²åˆ é™¤ï¼Œ1=æ­£å¸¸ï¼Œ2=åŒæ­¥ä¸­ï¼Œ3=åŒæ­¥å¤±è´¥';
COMMENT ON COLUMN project_document.sync_status IS 'åŒæ­¥çŠ¶æ€ï¼š0=æœªåŒæ­¥ï¼Œ1=å·²åŒæ­¥ï¼Œ2=åŒæ­¥å¤±è´¥';
COMMENT ON COLUMN project_document.sync_error_msg IS 'åŒæ­¥é”™è¯¯ä¿¡æ¯';
COMMENT ON COLUMN project_document.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project_document.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN project_document.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_project_document_project ON project_document(project_id);
CREATE INDEX idx_project_document_upload_user ON project_document(upload_user_id);
CREATE INDEX idx_project_document_type ON project_document(document_type);
CREATE INDEX idx_project_document_status ON project_document(document_status);
CREATE INDEX idx_project_document_sync_status ON project_document(sync_status);
CREATE INDEX idx_project_document_is_deleted ON project_document(is_deleted);
CREATE INDEX idx_project_document_created_time ON project_document(created_time);
```

**é¡¹ç›®è¿›åº¦è¡¨ï¼ˆproject_progressï¼‰**

```sql
CREATE TABLE project_progress (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_id BIGINT NOT NULL,
    progress_title VARCHAR(200) NOT NULL,
    progress_content TEXT,
    progress_percentage INT,
    milestone_flag SMALLINT DEFAULT 0,
    record_user_id BIGINT,
    record_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project_progress IS 'é¡¹ç›®è¿›åº¦è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project_progress.id IS 'è¿›åº¦IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project_progress.project_id IS 'é¡¹ç›®IDï¼Œå…³è”projectè¡¨';
COMMENT ON COLUMN project_progress.progress_title IS 'è¿›åº¦æ ‡é¢˜';
COMMENT ON COLUMN project_progress.progress_content IS 'è¿›åº¦å†…å®¹';
COMMENT ON COLUMN project_progress.progress_percentage IS 'è¿›åº¦ç™¾åˆ†æ¯”';
COMMENT ON COLUMN project_progress.milestone_flag IS 'æ˜¯å¦é‡Œç¨‹ç¢‘ï¼š0=å¦ï¼Œ1=æ˜¯';
COMMENT ON COLUMN project_progress.record_user_id IS 'è®°å½•äººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_progress.record_time IS 'è®°å½•æ—¶é—´';
COMMENT ON COLUMN project_progress.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project_progress.created_time IS 'åˆ›å»ºæ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_project_progress_project ON project_progress(project_id);
CREATE INDEX idx_project_progress_record_user ON project_progress(record_user_id);
CREATE INDEX idx_project_progress_milestone ON project_progress(milestone_flag);
CREATE INDEX idx_project_progress_record_time ON project_progress(record_time);
CREATE INDEX idx_project_progress_is_deleted ON project_progress(is_deleted);
```

#### 4.1.4 éªŒæ”¶æœåŠ¡è¡¨

**é¡¹ç›®éªŒæ”¶è¡¨ï¼ˆproject_acceptanceï¼‰**

```sql
CREATE TABLE project_acceptance (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    acceptance_no VARCHAR(50) NOT NULL,
    project_id BIGINT NOT NULL,
    applicant_id BIGINT NOT NULL,
    dify_workflow_id VARCHAR(100),
    acceptance_status SMALLINT DEFAULT 0,
    apply_time TIMESTAMP,
    submit_time TIMESTAMP,
    review_time TIMESTAMP,
    reviewer_id BIGINT,
    review_comment TEXT,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE project_acceptance IS 'é¡¹ç›®éªŒæ”¶è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN project_acceptance.id IS 'éªŒæ”¶IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN project_acceptance.acceptance_no IS 'éªŒæ”¶ç¼–å·ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN project_acceptance.project_id IS 'é¡¹ç›®IDï¼Œå…³è”projectè¡¨';
COMMENT ON COLUMN project_acceptance.applicant_id IS 'ç”³è¯·äººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_acceptance.dify_workflow_id IS 'Difyå·¥ä½œæµID';
COMMENT ON COLUMN project_acceptance.acceptance_status IS 'éªŒæ”¶çŠ¶æ€ï¼š0=å¾…ç”ŸæˆæŠ¥å‘Šï¼Œ1=æŠ¥å‘Šç”Ÿæˆä¸­ï¼Œ2=å¾…æäº¤ï¼Œ3=å®¡æ ¸ä¸­ï¼Œ4=é€šè¿‡ï¼Œ5=æœªé€šè¿‡';
COMMENT ON COLUMN project_acceptance.apply_time IS 'ç”³è¯·æ—¶é—´';
COMMENT ON COLUMN project_acceptance.submit_time IS 'æäº¤æ—¶é—´';
COMMENT ON COLUMN project_acceptance.review_time IS 'å®¡æ ¸æ—¶é—´';
COMMENT ON COLUMN project_acceptance.reviewer_id IS 'å®¡æ ¸äººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN project_acceptance.review_comment IS 'å®¡æ ¸æ„è§';
COMMENT ON COLUMN project_acceptance.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN project_acceptance.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN project_acceptance.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_project_acceptance_no ON project_acceptance(acceptance_no) WHERE is_deleted = 0;
CREATE INDEX idx_project_acceptance_project_id ON project_acceptance(project_id);
CREATE INDEX idx_project_acceptance_applicant_id ON project_acceptance(applicant_id);
CREATE INDEX idx_project_acceptance_reviewer_id ON project_acceptance(reviewer_id);
CREATE INDEX idx_project_acceptance_status ON project_acceptance(acceptance_status);
CREATE INDEX idx_project_acceptance_apply_time ON project_acceptance(apply_time);
CREATE INDEX idx_project_acceptance_is_deleted ON project_acceptance(is_deleted);
```

**éªŒæ”¶æŠ¥å‘Šè¡¨ï¼ˆacceptance_reportï¼‰**

```sql
CREATE TABLE acceptance_report (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    acceptance_id BIGINT NOT NULL,
    project_id BIGINT NOT NULL,
    report_type SMALLINT NOT NULL,
    report_name VARCHAR(255) NOT NULL,
    report_content JSONB,
    minio_bucket VARCHAR(100),
    minio_object_name VARCHAR(500),
    minio_url VARCHAR(1000),
    file_format VARCHAR(20),
    file_size BIGINT,
    word_count INT,
    generation_status SMALLINT DEFAULT 0,
    generation_error TEXT,
    dify_task_id VARCHAR(100),
    generated_by BIGINT,
    generated_time TIMESTAMP,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE acceptance_report IS 'éªŒæ”¶æŠ¥å‘Šè¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN acceptance_report.id IS 'æŠ¥å‘ŠIDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN acceptance_report.acceptance_id IS 'éªŒæ”¶IDï¼Œå…³è”project_acceptanceè¡¨';
COMMENT ON COLUMN acceptance_report.project_id IS 'é¡¹ç›®IDï¼Œå…³è”projectè¡¨';
COMMENT ON COLUMN acceptance_report.report_type IS 'æŠ¥å‘Šç±»å‹ï¼š1=ç§‘æŠ€æŠ¥å‘Šï¼Œ2=è‡ªè¯„æŠ¥å‘Š';
COMMENT ON COLUMN acceptance_report.report_name IS 'æŠ¥å‘Šåç§°';
COMMENT ON COLUMN acceptance_report.report_content IS 'æŠ¥å‘Šå†…å®¹ï¼ˆç»“æ„åŒ–JSONï¼‰';
COMMENT ON COLUMN acceptance_report.minio_bucket IS 'Minioå­˜å‚¨æ¡¶';
COMMENT ON COLUMN acceptance_report.minio_object_name IS 'Minioå¯¹è±¡åç§°';
COMMENT ON COLUMN acceptance_report.minio_url IS 'Minioè®¿é—®URL';
COMMENT ON COLUMN acceptance_report.file_format IS 'æ–‡ä»¶æ ¼å¼ï¼špdf/docx';
COMMENT ON COLUMN acceptance_report.file_size IS 'æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰';
COMMENT ON COLUMN acceptance_report.word_count IS 'å­—æ•°ç»Ÿè®¡';
COMMENT ON COLUMN acceptance_report.generation_status IS 'ç”ŸæˆçŠ¶æ€ï¼š0=å¾…ç”Ÿæˆï¼Œ1=ç”Ÿæˆä¸­ï¼Œ2=ç”ŸæˆæˆåŠŸï¼Œ3=ç”Ÿæˆå¤±è´¥';
COMMENT ON COLUMN acceptance_report.generation_error IS 'ç”Ÿæˆé”™è¯¯ä¿¡æ¯';
COMMENT ON COLUMN acceptance_report.dify_task_id IS 'Difyä»»åŠ¡ID';
COMMENT ON COLUMN acceptance_report.generated_by IS 'ç”ŸæˆäººIDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN acceptance_report.generated_time IS 'ç”Ÿæˆæ—¶é—´';
COMMENT ON COLUMN acceptance_report.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN acceptance_report.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN acceptance_report.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_acceptance_report_acceptance ON acceptance_report(acceptance_id);
CREATE INDEX idx_acceptance_report_project ON acceptance_report(project_id);
CREATE INDEX idx_acceptance_report_type ON acceptance_report(report_type);
CREATE INDEX idx_acceptance_report_status ON acceptance_report(generation_status);
CREATE INDEX idx_acceptance_report_generated_by ON acceptance_report(generated_by);
CREATE INDEX idx_acceptance_report_generated_time ON acceptance_report(generated_time);
CREATE INDEX idx_acceptance_report_is_deleted ON acceptance_report(is_deleted);
```

#### 4.1.5 æ–‡ä»¶æœåŠ¡è¡¨

**æ–‡ä»¶ä¿¡æ¯è¡¨ï¼ˆfile_infoï¼‰**

```sql
CREATE TABLE file_info (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    file_name VARCHAR(255) NOT NULL,
    file_type VARCHAR(50),
    file_size BIGINT,
    file_md5 VARCHAR(64),
    minio_bucket VARCHAR(100),
    minio_object_name VARCHAR(500),
    minio_url VARCHAR(1000),
    business_type VARCHAR(50),
    business_id BIGINT,
    upload_user_id BIGINT,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE file_info IS 'æ–‡ä»¶ä¿¡æ¯è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN file_info.id IS 'æ–‡ä»¶IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN file_info.file_name IS 'æ–‡ä»¶å';
COMMENT ON COLUMN file_info.file_type IS 'æ–‡ä»¶ç±»å‹';
COMMENT ON COLUMN file_info.file_size IS 'æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰';
COMMENT ON COLUMN file_info.file_md5 IS 'æ–‡ä»¶MD5';
COMMENT ON COLUMN file_info.minio_bucket IS 'Minioå­˜å‚¨æ¡¶';
COMMENT ON COLUMN file_info.minio_object_name IS 'Minioå¯¹è±¡åç§°';
COMMENT ON COLUMN file_info.minio_url IS 'Minioè®¿é—®URL';
COMMENT ON COLUMN file_info.business_type IS 'ä¸šåŠ¡ç±»å‹ï¼šproject_doc/report/avatarç­‰';
COMMENT ON COLUMN file_info.business_id IS 'ä¸šåŠ¡ID';
COMMENT ON COLUMN file_info.upload_user_id IS 'ä¸Šä¼ ç”¨æˆ·IDï¼Œå…³è”sys_userè¡¨';
COMMENT ON COLUMN file_info.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN file_info.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN file_info.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_file_info_md5 ON file_info(file_md5);
CREATE INDEX idx_file_info_business ON file_info(business_type, business_id);
CREATE INDEX idx_file_info_upload_user ON file_info(upload_user_id);
CREATE INDEX idx_file_info_type ON file_info(file_type);
CREATE INDEX idx_file_info_is_deleted ON file_info(is_deleted);
CREATE INDEX idx_file_info_created_time ON file_info(created_time);
```

#### 4.1.6 ç³»ç»Ÿé…ç½®è¡¨

**ç³»ç»Ÿé…ç½®è¡¨ï¼ˆsys_configï¼‰**

```sql
CREATE TABLE sys_config (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    config_key VARCHAR(100) NOT NULL,
    config_value TEXT,
    config_type VARCHAR(50),
    description VARCHAR(255),
    is_encrypted SMALLINT DEFAULT 0,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE sys_config IS 'ç³»ç»Ÿé…ç½®è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN sys_config.id IS 'é…ç½®IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN sys_config.config_key IS 'é…ç½®é”®ï¼Œå”¯ä¸€æ ‡è¯†';
COMMENT ON COLUMN sys_config.config_value IS 'é…ç½®å€¼';
COMMENT ON COLUMN sys_config.config_type IS 'é…ç½®ç±»å‹ï¼šstring/number/json/boolean';
COMMENT ON COLUMN sys_config.description IS 'é…ç½®æè¿°';
COMMENT ON COLUMN sys_config.is_encrypted IS 'æ˜¯å¦åŠ å¯†ï¼š0=å¦ï¼Œ1=æ˜¯';
COMMENT ON COLUMN sys_config.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN sys_config.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN sys_config.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_sys_config_key ON sys_config(config_key) WHERE is_deleted = 0;
CREATE INDEX idx_sys_config_type ON sys_config(config_type);
CREATE INDEX idx_sys_config_is_deleted ON sys_config(is_deleted);
```

**Dify é…ç½®è¡¨ï¼ˆdify_configï¼‰**

```sql
CREATE TABLE dify_config (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    config_name VARCHAR(100) NOT NULL,
    workflow_type VARCHAR(50),
    api_endpoint VARCHAR(500) NOT NULL,
    api_key VARCHAR(255) NOT NULL,
    knowledge_base_id VARCHAR(100),
    model_config JSONB,
    status SMALLINT DEFAULT 1,
    is_deleted SMALLINT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è¡¨æ³¨é‡Š
COMMENT ON TABLE dify_config IS 'Difyé…ç½®è¡¨';

-- å­—æ®µæ³¨é‡Š
COMMENT ON COLUMN dify_config.id IS 'é…ç½®IDï¼Œä¸»é”®ï¼Œè‡ªå¢';
COMMENT ON COLUMN dify_config.config_name IS 'é…ç½®åç§°';
COMMENT ON COLUMN dify_config.workflow_type IS 'å·¥ä½œæµç±»å‹ï¼šdeclaration/report_tech/report_self';
COMMENT ON COLUMN dify_config.api_endpoint IS 'APIç«¯ç‚¹';
COMMENT ON COLUMN dify_config.api_key IS 'APIå¯†é’¥ï¼ˆåŠ å¯†ï¼‰';
COMMENT ON COLUMN dify_config.knowledge_base_id IS 'çŸ¥è¯†åº“ID';
COMMENT ON COLUMN dify_config.model_config IS 'æ¨¡å‹é…ç½®ï¼ˆJSONï¼‰';
COMMENT ON COLUMN dify_config.status IS 'çŠ¶æ€ï¼š0=ç¦ç”¨ï¼Œ1=å¯ç”¨';
COMMENT ON COLUMN dify_config.is_deleted IS 'é€»è¾‘åˆ é™¤æ ‡è¯†ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
COMMENT ON COLUMN dify_config.created_time IS 'åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN dify_config.updated_time IS 'æ›´æ–°æ—¶é—´';

-- åˆ›å»ºç´¢å¼•
CREATE UNIQUE INDEX uk_dify_config_name ON dify_config(config_name) WHERE is_deleted = 0;
CREATE INDEX idx_dify_config_workflow_type ON dify_config(workflow_type);
CREATE INDEX idx_dify_config_status ON dify_config(status);
CREATE INDEX idx_dify_config_is_deleted ON dify_config(is_deleted);
```

### 4.2 æ•°æ®åº“è¡¨å…³ç³»å›¾

```mermaid
erDiagram
    sys_user ||--o{ sys_user_role : "has"
    sys_role ||--o{ sys_user_role : "belongs to"
    sys_role ||--o{ sys_role_permission : "has"
    sys_permission ||--o{ sys_role_permission : "belongs to"

    sys_user ||--o{ project_declaration : "creates"
    sys_user ||--o{ sys_login_log : "generates"

    project_declaration ||--o| project : "generates"

    project ||--o{ project_member : "has"
    project ||--o{ project_document : "contains"
    project ||--o{ project_progress : "tracks"
    project ||--|| project_acceptance : "undergoes"

    sys_user ||--o{ project_member : "participates"
    sys_user ||--o{ project_document : "uploads"
    sys_user ||--o{ project_progress : "records"

    project_acceptance ||--o{ acceptance_report : "generates"

    sys_user ||--o{ file_info : "uploads"

    sys_user {
        BIGINT id PK
        VARCHAR username UK
        VARCHAR password
        VARCHAR real_name
        VARCHAR email
        VARCHAR phone
        VARCHAR department
        SMALLINT status
    }

    sys_role {
        BIGINT id PK
        VARCHAR role_name UK
        VARCHAR role_code UK
        VARCHAR description
        SMALLINT status
    }

    sys_permission {
        BIGINT id PK
        BIGINT parent_id
        VARCHAR permission_name
        VARCHAR permission_code UK
        SMALLINT permission_type
        VARCHAR path
    }

    sys_user_role {
        BIGINT id PK
        BIGINT user_id FK
        BIGINT role_id FK
    }

    sys_role_permission {
        BIGINT id PK
        BIGINT role_id FK
        BIGINT permission_id FK
    }

    project_declaration {
        BIGINT id PK
        VARCHAR declaration_no UK
        BIGINT user_id FK
        TEXT research_direction
        TEXT research_field
        VARCHAR dify_project_id
        SMALLINT declaration_status
    }

    project {
        BIGINT id PK
        VARCHAR project_no UK
        BIGINT declaration_id FK
        BIGINT project_leader_id FK
        VARCHAR project_name
        VARCHAR dify_project_id
        VARCHAR dify_knowledge_base_id
        SMALLINT project_status
        INT progress
    }

    project_member {
        BIGINT id PK
        BIGINT project_id FK
        BIGINT user_id FK
        SMALLINT role_type
        SMALLINT status
    }

    project_document {
        BIGINT id PK
        BIGINT project_id FK
        VARCHAR document_name
        VARCHAR document_type
        BIGINT file_size
        VARCHAR minio_url
        VARCHAR dify_document_id
        BIGINT upload_user_id FK
        SMALLINT sync_status
    }

    project_progress {
        BIGINT id PK
        BIGINT project_id FK
        VARCHAR progress_title
        TEXT progress_content
        INT progress_percentage
        BIGINT record_user_id FK
    }

    project_acceptance {
        BIGINT id PK
        VARCHAR acceptance_no UK
        BIGINT project_id FK
        BIGINT applicant_id FK
        SMALLINT acceptance_status
        BIGINT reviewer_id FK
    }

    acceptance_report {
        BIGINT id PK
        BIGINT acceptance_id FK
        BIGINT project_id FK
        SMALLINT report_type
        VARCHAR report_name
        JSONB report_content
        VARCHAR minio_url
        SMALLINT generation_status
        INT word_count
    }

    file_info {
        BIGINT id PK
        VARCHAR file_name
        VARCHAR file_type
        BIGINT file_size
        VARCHAR file_md5
        VARCHAR minio_url
        VARCHAR business_type
        BIGINT business_id
        BIGINT upload_user_id FK
    }
```

### 4.3 è¡¨å…³ç³»è¯´æ˜

#### ç”¨æˆ·æƒé™å…³ç³»

- `sys_user` ä¸ `sys_role` å¤šå¯¹å¤šå…³ç³»ï¼Œé€šè¿‡ `sys_user_role` å…³è”
- `sys_role` ä¸ `sys_permission` å¤šå¯¹å¤šå…³ç³»ï¼Œé€šè¿‡ `sys_role_permission` å…³è”
- å®ç° RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ¨¡å‹

#### ç”³æŠ¥ä¸é¡¹ç›®å…³ç³»

- `project_declaration` ä¸ `project` ä¸€å¯¹ä¸€å…³ç³»
- ç”³æŠ¥æˆåŠŸåç”Ÿæˆé¡¹ç›®è®°å½•
- é€šè¿‡ `declaration_id` å…³è”

#### é¡¹ç›®æ ¸å¿ƒå…³ç³»

- `project` ä¸ `project_member` ä¸€å¯¹å¤šå…³ç³»ï¼ˆé¡¹ç›®åŒ…å«å¤šä¸ªæˆå‘˜ï¼‰
- `project` ä¸ `project_document` ä¸€å¯¹å¤šå…³ç³»ï¼ˆé¡¹ç›®åŒ…å«å¤šä¸ªæ–‡æ¡£ï¼‰
- `project` ä¸ `project_progress` ä¸€å¯¹å¤šå…³ç³»ï¼ˆé¡¹ç›®æœ‰å¤šæ¡è¿›åº¦è®°å½•ï¼‰
- `project` ä¸ `project_acceptance` ä¸€å¯¹ä¸€å…³ç³»ï¼ˆé¡¹ç›®è¿›è¡Œä¸€æ¬¡éªŒæ”¶ï¼‰

#### éªŒæ”¶ä¸æŠ¥å‘Šå…³ç³»

- `project_acceptance` ä¸ `acceptance_report` ä¸€å¯¹å¤šå…³ç³»
- ä¸€æ¬¡éªŒæ”¶å¯ä»¥ç”Ÿæˆå¤šä¸ªæŠ¥å‘Šï¼ˆç§‘æŠ€æŠ¥å‘Šã€è‡ªè¯„æŠ¥å‘Šï¼‰

#### ç”¨æˆ·å…³è”å…³ç³»

- `sys_user` ä½œä¸ºé¡¹ç›®è´Ÿè´£äººã€æˆå‘˜ã€æ–‡æ¡£ä¸Šä¼ è€…ã€è¿›åº¦è®°å½•è€…ç­‰å¤šç§è§’è‰²
- é€šè¿‡ä¸åŒå¤–é”®å­—æ®µå…³è”åˆ°å„ä¸šåŠ¡è¡¨

#### æ–‡ä»¶ç®¡ç†

- `file_info` é€šè¿‡ `business_type` å’Œ `business_id` å…³è”ä¸åŒä¸šåŠ¡åœºæ™¯
- æ”¯æŒæ–‡ä»¶ MD5 å»é‡
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ–‡ä»¶çš„ Minio å­˜å‚¨ä¿¡æ¯

---

## 5. åç«¯è®¾è®¡

### 5.1 DDD åˆ†å±‚æ¶æ„

é‡‡ç”¨ç»å…¸çš„ DDD å››å±‚æ¶æ„ï¼šæ¥å£å±‚ï¼ˆInterfacesï¼‰ã€åº”ç”¨å±‚ï¼ˆApplicationï¼‰ã€é¢†åŸŸå±‚ï¼ˆDomainï¼‰ã€åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰ã€‚

```
sci-z-server/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/
    â”œâ”€â”€ java/com/sciz/server/
    â”‚   â”œâ”€â”€ ServerApplication.java                    # åº”ç”¨å¯åŠ¨ç±»
    â”‚   â”‚
    â”‚   â”œâ”€â”€ interfaces/                                 # æ¥å£å±‚ï¼ˆç”¨æˆ·æ¥å£å±‚ï¼‰
    â”‚   â”‚   â”œâ”€â”€ controller/                            # REST æ§åˆ¶å™¨
    â”‚   â”‚   â”‚   â”œâ”€â”€ user/                              # ç”¨æˆ·æ¨¡å—æ§åˆ¶å™¨
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserController.java            # ç”¨æˆ·ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RoleController.java            # è§’è‰²ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionController.java      # æƒé™ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AuthController.java            # è®¤è¯æˆæƒ
    â”‚   â”‚   â”‚   â”œâ”€â”€ declaration/                       # ç”³æŠ¥æ¨¡å—æ§åˆ¶å™¨
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeclarationController.java     # é¡¹ç›®ç”³æŠ¥ç®¡ç†
    â”‚   â”‚   â”‚   â”œâ”€â”€ project/                           # é¡¹ç›®ç®¡ç†æ¨¡å—æ§åˆ¶å™¨
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectController.java         # é¡¹ç›®ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMemberController.java   # é¡¹ç›®æˆå‘˜ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDocumentController.java # é¡¹ç›®æ–‡æ¡£ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectProgressController.java # é¡¹ç›®è¿›åº¦ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KnowledgeBaseController.java   # çŸ¥è¯†åº“æœç´¢
    â”‚   â”‚   â”‚   â”œâ”€â”€ acceptance/                        # éªŒæ”¶æ¨¡å—æ§åˆ¶å™¨
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptanceController.java      # éªŒæ”¶ç®¡ç†
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ReportController.java          # æŠ¥å‘Šç®¡ç†
    â”‚   â”‚   â”‚   â””â”€â”€ file/                              # æ–‡ä»¶æ¨¡å—æ§åˆ¶å™¨
    â”‚   â”‚   â”‚       â””â”€â”€ FileController.java            # æ–‡ä»¶ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ assembler/                             # æ¥å£å±‚è½¬æ¢å™¨ï¼ˆDTO <-> VOï¼‰
    â”‚   â”‚   â”‚   â”œâ”€â”€ UserAssembler.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationAssembler.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectAssembler.java
    â”‚   â”‚   â”‚   â””â”€â”€ AcceptanceAssembler.java
    â”‚   â”‚   â”œâ”€â”€ dto/                                   # æ•°æ®ä¼ è¾“å¯¹è±¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ request/                           # è¯·æ±‚ DTO
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserRegisterRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserLoginRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserUpdateRequest.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ declaration/
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeclarationSubmitRequest.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project/
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCreateRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectUpdateRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MemberAddRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressAddRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DocumentSearchRequest.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ acceptance/
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ AcceptanceApplyRequest.java
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ReportGenerateRequest.java
    â”‚   â”‚   â”‚   â””â”€â”€ response/                          # å“åº” DTO
    â”‚   â”‚   â”‚       â”œâ”€â”€ user/
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserInfoResponse.java
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ LoginResponse.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ declaration/
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DeclarationDetailResponse.java
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ DeclarationListResponse.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ project/
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ProjectDetailResponse.java
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ProjectListResponse.java
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DocumentListResponse.java
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ SearchResultResponse.java
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ProgressListResponse.java
    â”‚   â”‚   â”‚       â””â”€â”€ acceptance/
    â”‚   â”‚   â”‚           â”œâ”€â”€ AcceptanceDetailResponse.java
    â”‚   â”‚   â”‚           â”œâ”€â”€ ReportStatusResponse.java
    â”‚   â”‚   â”‚           â””â”€â”€ ReportListResponse.java
    â”‚   â”‚   â””â”€â”€ facade/                                # é—¨é¢æ¥å£ï¼ˆå¯¹å¤–æš´éœ²ï¼‰
    â”‚   â”‚       â”œâ”€â”€ UserFacade.java
    â”‚   â”‚       â”œâ”€â”€ DeclarationFacade.java
    â”‚   â”‚       â”œâ”€â”€ ProjectFacade.java
    â”‚   â”‚       â””â”€â”€ AcceptanceFacade.java
    â”‚   â”‚
    â”‚   â”œâ”€â”€ application/                               # åº”ç”¨å±‚ï¼ˆç”¨ä¾‹ç¼–æ’ï¼‰
    â”‚   â”‚   â”œâ”€â”€ service/                              # åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ user/                             # ç”¨æˆ·åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserApplicationService.java   # ç”¨æˆ·ç®¡ç†åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthApplicationService.java   # è®¤è¯æˆæƒåº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RoleApplicationService.java   # è§’è‰²æƒé™åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ declaration/                      # ç”³æŠ¥åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeclarationApplicationService.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ project/                          # é¡¹ç›®åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectApplicationService.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMemberApplicationService.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDocumentApplicationService.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectProgressApplicationService.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KnowledgeBaseApplicationService.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ acceptance/                       # éªŒæ”¶åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptanceApplicationService.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ReportApplicationService.java
    â”‚   â”‚   â”‚   â””â”€â”€ file/                             # æ–‡ä»¶åº”ç”¨æœåŠ¡
    â”‚   â”‚   â”‚       â””â”€â”€ FileApplicationService.java
    â”‚   â”‚   â”œâ”€â”€ command/                              # å‘½ä»¤å¯¹è±¡ï¼ˆå†™æ“ä½œï¼‰
    â”‚   â”‚   â”‚   â”œâ”€â”€ user/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateUserCommand.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpdateUserCommand.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ declaration/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SubmitDeclarationCommand.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ project/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateProjectCommand.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateProjectCommand.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddMemberCommand.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UploadDocumentCommand.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AddProgressCommand.java
    â”‚   â”‚   â”‚   â””â”€â”€ acceptance/
    â”‚   â”‚   â”‚       â”œâ”€â”€ ApplyAcceptanceCommand.java
    â”‚   â”‚   â”‚       â””â”€â”€ GenerateReportCommand.java
    â”‚   â”‚   â”œâ”€â”€ query/                                # æŸ¥è¯¢å¯¹è±¡ï¼ˆè¯»æ“ä½œï¼‰
    â”‚   â”‚   â”‚   â”œâ”€â”€ user/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserQuery.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RoleQuery.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ declaration/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeclarationQuery.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ project/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectQuery.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentQuery.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProgressQuery.java
    â”‚   â”‚   â”‚   â””â”€â”€ acceptance/
    â”‚   â”‚   â”‚       â”œâ”€â”€ AcceptanceQuery.java
    â”‚   â”‚   â”‚       â””â”€â”€ ReportQuery.java
    â”‚   â”‚   â”œâ”€â”€ event/                                # åº”ç”¨äº‹ä»¶ï¼ˆè·¨èšåˆåè°ƒï¼‰
    â”‚   â”‚   â”‚   â”œâ”€â”€ handler/                          # äº‹ä»¶å¤„ç†å™¨
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationEventHandler.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectEventHandler.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AcceptanceEventHandler.java
    â”‚   â”‚   â”‚   â””â”€â”€ publisher/                        # äº‹ä»¶å‘å¸ƒå™¨
    â”‚   â”‚   â”‚       â””â”€â”€ DomainEventPublisher.java
    â”‚   â”‚   â””â”€â”€ assembler/                            # åº”ç”¨å±‚è½¬æ¢å™¨ï¼ˆCommand/Query <-> Domainï¼‰
    â”‚   â”‚       â”œâ”€â”€ UserApplicationAssembler.java
    â”‚   â”‚       â”œâ”€â”€ DeclarationApplicationAssembler.java
    â”‚   â”‚       â”œâ”€â”€ ProjectApplicationAssembler.java
    â”‚   â”‚       â””â”€â”€ AcceptanceApplicationAssembler.java
    â”‚   â”‚
    â”‚   â”œâ”€â”€ domain/                                    # é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
    â”‚   â”‚   â”œâ”€â”€ user/                                 # ç”¨æˆ·é¢†åŸŸ
    â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/                        # èšåˆæ ¹
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ User.java                     # ç”¨æˆ·èšåˆæ ¹
    â”‚   â”‚   â”‚   â”œâ”€â”€ entity/                           # å®ä½“
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Role.java                     # è§’è‰²å®ä½“
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Permission.java               # æƒé™å®ä½“
    â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/                      # å€¼å¯¹è±¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserProfile.java              # ç”¨æˆ·æ¡£æ¡ˆ
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserStatus.java               # ç”¨æˆ·çŠ¶æ€
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Password.java                 # å¯†ç å€¼å¯¹è±¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/                          # é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserDomainService.java        # ç”¨æˆ·é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthenticationService.java    # è®¤è¯é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PermissionService.java        # æƒé™é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â””â”€â”€ repository/                       # ä»“å‚¨æ¥å£
    â”‚   â”‚   â”‚       â”œâ”€â”€ UserRepository.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ RoleRepository.java
    â”‚   â”‚   â”‚       â””â”€â”€ PermissionRepository.java
    â”‚   â”‚   â”œâ”€â”€ declaration/                          # ç”³æŠ¥é¢†åŸŸ
    â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Declaration.java              # ç”³æŠ¥èšåˆæ ¹
    â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResearchDirection.java        # ç ”ç©¶æ–¹å‘
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResearchField.java            # ç ”ç©¶é¢†åŸŸ
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationStatus.java        # ç”³æŠ¥çŠ¶æ€
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DifyWorkflowResult.java       # Dify å·¥ä½œæµç»“æœ
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationDomainService.java # ç”³æŠ¥é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeclarationWorkflowService.java # ç”³æŠ¥å·¥ä½œæµæœåŠ¡
    â”‚   â”‚   â”‚   â””â”€â”€ repository/
    â”‚   â”‚   â”‚       â””â”€â”€ DeclarationRepository.java
    â”‚   â”‚   â”œâ”€â”€ project/                              # é¡¹ç›®ç®¡ç†é¢†åŸŸ
    â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Project.java                  # é¡¹ç›®èšåˆæ ¹
    â”‚   â”‚   â”‚   â”œâ”€â”€ entity/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMember.java            # é¡¹ç›®æˆå‘˜å®ä½“
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDocument.java          # é¡¹ç›®æ–‡æ¡£å®ä½“
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectProgress.java          # é¡¹ç›®è¿›åº¦å®ä½“
    â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectStatus.java            # é¡¹ç›®çŠ¶æ€
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectInfo.java              # é¡¹ç›®ä¿¡æ¯
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MemberRole.java               # æˆå‘˜è§’è‰²
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentMetadata.java         # æ–‡æ¡£å…ƒæ•°æ®
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressInfo.java             # è¿›åº¦ä¿¡æ¯
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DifyKnowledgeBaseId.java      # Dify çŸ¥è¯†åº“ ID
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDomainService.java     # é¡¹ç›®é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MemberManagementService.java  # æˆå‘˜ç®¡ç†æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentManagementService.java # æ–‡æ¡£ç®¡ç†æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressTrackingService.java  # è¿›åº¦è·Ÿè¸ªæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KnowledgeBaseService.java     # çŸ¥è¯†åº“æœåŠ¡
    â”‚   â”‚   â”‚   â””â”€â”€ repository/
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectRepository.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectMemberRepository.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectDocumentRepository.java
    â”‚   â”‚   â”‚       â””â”€â”€ ProjectProgressRepository.java
    â”‚   â”‚   â”œâ”€â”€ acceptance/                           # éªŒæ”¶é¢†åŸŸ
    â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Acceptance.java               # éªŒæ”¶èšåˆæ ¹
    â”‚   â”‚   â”‚   â”œâ”€â”€ entity/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Report.java                   # æŠ¥å‘Šå®ä½“
    â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptanceStatus.java         # éªŒæ”¶çŠ¶æ€
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportType.java               # æŠ¥å‘Šç±»å‹
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportContent.java            # æŠ¥å‘Šå†…å®¹
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportMetadata.java           # æŠ¥å‘Šå…ƒæ•°æ®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GenerationStatus.java         # ç”ŸæˆçŠ¶æ€
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptanceDomainService.java  # éªŒæ”¶é¢†åŸŸæœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ReportGenerationService.java  # æŠ¥å‘Šç”ŸæˆæœåŠ¡
    â”‚   â”‚   â”‚   â””â”€â”€ repository/
    â”‚   â”‚   â”‚       â”œâ”€â”€ AcceptanceRepository.java
    â”‚   â”‚   â”‚       â””â”€â”€ ReportRepository.java
    â”‚   â”‚   â”œâ”€â”€ file/                                 # æ–‡ä»¶ç®¡ç†é¢†åŸŸ
    â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileInfo.java                 # æ–‡ä»¶ä¿¡æ¯èšåˆæ ¹
    â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileMetadata.java             # æ–‡ä»¶å…ƒæ•°æ®
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileType.java                 # æ–‡ä»¶ç±»å‹
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileSize.java                 # æ–‡ä»¶å¤§å°
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MinioObjectInfo.java          # Minio å¯¹è±¡ä¿¡æ¯
    â”‚   â”‚   â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileStorageService.java       # æ–‡ä»¶å­˜å‚¨æœåŠ¡
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FilePreviewService.java       # æ–‡ä»¶é¢„è§ˆæœåŠ¡
    â”‚   â”‚   â”‚   â””â”€â”€ repository/
    â”‚   â”‚   â”‚       â””â”€â”€ FileRepository.java
    â”‚   â”‚   â””â”€â”€ shared/                               # å…±äº«é¢†åŸŸï¼ˆè·¨é¢†åŸŸï¼‰
    â”‚   â”‚       â”œâ”€â”€ valueobject/                      # å…±äº«å€¼å¯¹è±¡
    â”‚   â”‚       â”‚   â”œâ”€â”€ UserId.java
    â”‚   â”‚       â”‚   â”œâ”€â”€ ProjectId.java
    â”‚   â”‚       â”‚   â”œâ”€â”€ DeclarationId.java
    â”‚   â”‚       â”‚   â”œâ”€â”€ AcceptanceId.java
    â”‚   â”‚       â”‚   â”œâ”€â”€ DateRange.java
    â”‚   â”‚       â”‚   â””â”€â”€ AuditInfo.java                # å®¡è®¡ä¿¡æ¯
    â”‚   â”‚       â”œâ”€â”€ event/                            # é¢†åŸŸäº‹ä»¶
    â”‚   â”‚       â”‚   â”œâ”€â”€ DeclarationApprovedEvent.java # ç”³æŠ¥é€šè¿‡äº‹ä»¶
    â”‚   â”‚       â”‚   â”œâ”€â”€ DocumentUploadedEvent.java    # æ–‡æ¡£ä¸Šä¼ äº‹ä»¶
    â”‚   â”‚       â”‚   â”œâ”€â”€ ProjectCompletedEvent.java    # é¡¹ç›®å®Œæˆäº‹ä»¶
    â”‚   â”‚       â”‚   â””â”€â”€ ReportGeneratedEvent.java     # æŠ¥å‘Šç”Ÿæˆäº‹ä»¶
    â”‚   â”‚       â””â”€â”€ exception/                        # é¢†åŸŸå¼‚å¸¸
    â”‚   â”‚           â”œâ”€â”€ DomainException.java
    â”‚   â”‚           â”œâ”€â”€ UserNotFoundException.java
    â”‚   â”‚           â”œâ”€â”€ PermissionDeniedException.java
    â”‚   â”‚           â”œâ”€â”€ ProjectNotFoundException.java
    â”‚   â”‚           â””â”€â”€ InvalidOperationException.java
    â”‚   â”‚
    â”‚   â”œâ”€â”€ infrastructure/                            # åŸºç¡€è®¾æ–½å±‚ï¼ˆæŠ€æœ¯å®ç°ï¼‰
    â”‚   â”‚   â”œâ”€â”€ config/                               # é…ç½®ç±»
    â”‚   â”‚   â”‚   â”œâ”€â”€ database/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataSourceConfig.java         # æ•°æ®æºé…ç½®
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MyBatisPlusConfig.java        # MyBatis-Plus é…ç½®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TransactionConfig.java        # äº‹åŠ¡é…ç½®
    â”‚   â”‚   â”‚   â”œâ”€â”€ cache/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedisConfig.java              # Redis é…ç½®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CacheConfig.java              # ç¼“å­˜é…ç½®
    â”‚   â”‚   â”‚   â”œâ”€â”€ mq/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KafkaConfig.java              # Kafka é…ç½®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KafkaTopicConfig.java         # Kafka Topic é…ç½®
    â”‚   â”‚   â”‚   â”œâ”€â”€ security/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SaTokenConfig.java            # Sa-Token é…ç½®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SecurityConfig.java           # å®‰å…¨é…ç½®
    â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MinioConfig.java              # Minio é…ç½®
    â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DifyConfig.java               # Dify é…ç½®
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LangChain4jConfig.java        # LangChain4j é…ç½®
    â”‚   â”‚   â”‚   â””â”€â”€ web/
    â”‚   â”‚   â”‚       â”œâ”€â”€ WebMvcConfig.java             # Spring MVC é…ç½®
    â”‚   â”‚   â”‚       â””â”€â”€ CorsConfig.java               # è·¨åŸŸé…ç½®
    â”‚   â”‚   â”œâ”€â”€ persistence/                          # æŒä¹…åŒ–å®ç°
    â”‚   â”‚   â”‚   â”œâ”€â”€ mapper/                           # MyBatis-Plus Mapper
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RoleMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMemberMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDocumentMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectProgressMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptanceMapper.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportMapper.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileInfoMapper.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ po/                               # æŒä¹…åŒ–å¯¹è±¡ï¼ˆæ•°æ®åº“å®ä½“ï¼‰
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RolePO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMemberPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectDocumentPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectProgressPO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AcceptancePO.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportPO.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileInfoPO.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ converter/                        # è½¬æ¢å™¨ï¼ˆPO <-> Domainï¼‰
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserConverter.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeclarationConverter.java
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectConverter.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AcceptanceConverter.java
    â”‚   â”‚   â”‚   â””â”€â”€ repository/                       # ä»“å‚¨å®ç°
    â”‚   â”‚   â”‚       â”œâ”€â”€ UserRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ RoleRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ DeclarationRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectMemberRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ProjectDocumentRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ AcceptanceRepositoryImpl.java
    â”‚   â”‚   â”‚       â”œâ”€â”€ ReportRepositoryImpl.java
    â”‚   â”‚   â”‚       â””â”€â”€ FileRepositoryImpl.java
    â”‚   â”‚   â”œâ”€â”€ integration/                          # å¤–éƒ¨ç³»ç»Ÿé›†æˆ
    â”‚   â”‚   â”‚   â”œâ”€â”€ dify/                             # Dify é›†æˆ
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DifyClient.java               # Dify å®¢æˆ·ç«¯
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DifyWorkflowClient.java       # å·¥ä½œæµå®¢æˆ·ç«¯
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DifyKnowledgeBaseClient.java  # çŸ¥è¯†åº“å®¢æˆ·ç«¯
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                          # Dify DTO
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowResponse.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeBaseRequest.java
    â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KnowledgeBaseResponse.java
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ adapter/                      # Dify é€‚é…å™¨
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DeclarationWorkflowAdapter.java
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ReportWorkflowAdapter.java
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ KnowledgeBaseAdapter.java
    â”‚   â”‚   â”‚   â”œâ”€â”€ minio/                            # Minio é›†æˆ
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MinioClient.java              # Minio å®¢æˆ·ç«¯
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MinioStorageService.java      # å­˜å‚¨æœåŠ¡å®ç°
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/
    â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UploadRequest.java
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UploadResponse.java
    â”‚   â”‚   â”‚   â””â”€â”€ kafka/                            # Kafka é›†æˆ
    â”‚   â”‚   â”‚       â”œâ”€â”€ producer/                     # ç”Ÿäº§è€…
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ EventProducer.java
    â”‚   â”‚   â”‚       â””â”€â”€ consumer/                     # æ¶ˆè´¹è€…
    â”‚   â”‚   â”‚           â”œâ”€â”€ DeclarationEventConsumer.java
    â”‚   â”‚   â”‚           â”œâ”€â”€ DocumentEventConsumer.java
    â”‚   â”‚   â”‚           â””â”€â”€ ReportEventConsumer.java
    â”‚   â”‚   â””â”€â”€ common/                               # åŸºç¡€è®¾æ–½å…¬å…±ç»„ä»¶
    â”‚   â”‚       â”œâ”€â”€ aspect/                           # AOP åˆ‡é¢
    â”‚   â”‚       â”‚   â”œâ”€â”€ LogAspect.java                # æ—¥å¿—åˆ‡é¢
    â”‚   â”‚       â”‚   â”œâ”€â”€ PermissionAspect.java         # æƒé™åˆ‡é¢
    â”‚   â”‚       â”‚   â””â”€â”€ TransactionAspect.java        # äº‹åŠ¡åˆ‡é¢
    â”‚   â”‚       â”œâ”€â”€ interceptor/                      # æ‹¦æˆªå™¨
    â”‚   â”‚       â”‚   â”œâ”€â”€ AuthInterceptor.java          # è®¤è¯æ‹¦æˆªå™¨
    â”‚   â”‚       â”‚   â””â”€â”€ RateLimitInterceptor.java     # é™æµæ‹¦æˆªå™¨
    â”‚   â”‚       â”œâ”€â”€ filter/                           # è¿‡æ»¤å™¨
    â”‚   â”‚       â”‚   â”œâ”€â”€ AuthFilter.java               # è®¤è¯è¿‡æ»¤å™¨
    â”‚   â”‚       â”‚   â””â”€â”€ CorsFilter.java               # è·¨åŸŸè¿‡æ»¤å™¨
    â”‚   â”‚       â””â”€â”€ handler/                          # å¤„ç†å™¨
    â”‚   â”‚           â”œâ”€â”€ GlobalExceptionHandler.java   # å…¨å±€å¼‚å¸¸å¤„ç†å™¨
    â”‚   â”‚           â””â”€â”€ ResponseHandler.java          # å“åº”å¤„ç†å™¨
    â”‚   â”‚
    â”‚   â””â”€â”€ shared/                                    # å…±äº«å†…æ ¸ï¼ˆè·¨å±‚å…±äº«ï¼‰
    â”‚       â”œâ”€â”€ result/                               # ç»Ÿä¸€è¿”å›ç»“æœ
    â”‚       â”‚   â”œâ”€â”€ Result.java                       # ç»Ÿä¸€ç»“æœç±»
    â”‚       â”‚   â”œâ”€â”€ PageResult.java                   # åˆ†é¡µç»“æœç±»
    â”‚       â”‚   â””â”€â”€ ResultCode.java                   # ç»“æœç æšä¸¾
    â”‚       â”œâ”€â”€ exception/                            # å…¨å±€å¼‚å¸¸
    â”‚       â”‚   â”œâ”€â”€ BusinessException.java            # ä¸šåŠ¡å¼‚å¸¸
    â”‚       â”‚   â”œâ”€â”€ SystemException.java              # ç³»ç»Ÿå¼‚å¸¸
    â”‚       â”‚   â””â”€â”€ ExceptionCode.java                # å¼‚å¸¸ç æšä¸¾
    â”‚       â”œâ”€â”€ constant/                             # å¸¸é‡å®šä¹‰
    â”‚       â”‚   â”œâ”€â”€ SystemConstants.java              # ç³»ç»Ÿå¸¸é‡
    â”‚       â”‚   â”œâ”€â”€ CacheConstants.java               # ç¼“å­˜å¸¸é‡
    â”‚       â”‚   â””â”€â”€ KafkaTopicConstants.java          # Kafka Topic å¸¸é‡
    â”‚       â”œâ”€â”€ enums/                                # æšä¸¾å®šä¹‰
    â”‚       â”‚   â”œâ”€â”€ UserStatus.java                   # ç”¨æˆ·çŠ¶æ€
    â”‚       â”‚   â”œâ”€â”€ DeclarationStatus.java            # ç”³æŠ¥çŠ¶æ€
    â”‚       â”‚   â”œâ”€â”€ ProjectStatus.java                # é¡¹ç›®çŠ¶æ€
    â”‚       â”‚   â”œâ”€â”€ AcceptanceStatus.java             # éªŒæ”¶çŠ¶æ€
    â”‚       â”‚   â””â”€â”€ ReportType.java                   # æŠ¥å‘Šç±»å‹
    â”‚       â””â”€â”€ util/                                 # å·¥å…·ç±»
    â”‚           â”œâ”€â”€ JsonUtil.java                     # JSON å·¥å…·
    â”‚           â”œâ”€â”€ DateUtil.java                     # æ—¥æœŸå·¥å…·
    â”‚           â”œâ”€â”€ StringUtil.java                   # å­—ç¬¦ä¸²å·¥å…·
    â”‚           â”œâ”€â”€ EncryptUtil.java                  # åŠ å¯†å·¥å…·
    â”‚           â””â”€â”€ IdGenerator.java                  # ID ç”Ÿæˆå™¨
    â”‚
    â””â”€â”€ resources/
        â”œâ”€â”€ application.yml                            # ä¸»é…ç½®æ–‡ä»¶
        â”œâ”€â”€ application-dev.yml                        # å¼€å‘ç¯å¢ƒé…ç½®
        â”œâ”€â”€ application-test.yml                       # æµ‹è¯•ç¯å¢ƒé…ç½®
        â”œâ”€â”€ application-prod.yml                       # ç”Ÿäº§ç¯å¢ƒé…ç½®
        â”œâ”€â”€ mapper/                                    # MyBatis XML æ˜ å°„æ–‡ä»¶
        â”‚   â”œâ”€â”€ UserMapper.xml
        â”‚   â”œâ”€â”€ DeclarationMapper.xml
        â”‚   â”œâ”€â”€ ProjectMapper.xml
        â”‚   â””â”€â”€ AcceptanceMapper.xml
        â”œâ”€â”€ db/                                        # æ•°æ®åº“è„šæœ¬
        â”‚   â”œâ”€â”€ migration/                            # æ•°æ®åº“è¿ç§»è„šæœ¬
        â”‚   â”‚   â”œâ”€â”€ V1__init_user_tables.sql
        â”‚   â”‚   â”œâ”€â”€ V2__init_declaration_tables.sql
        â”‚   â”‚   â”œâ”€â”€ V3__init_project_tables.sql
        â”‚   â”‚   â””â”€â”€ V4__init_acceptance_tables.sql
        â”‚   â””â”€â”€ seed/                                 # åˆå§‹æ•°æ®
        â”‚       â””â”€â”€ init_data.sql
        â”œâ”€â”€ logback-spring.xml                         # æ—¥å¿—é…ç½®
        â””â”€â”€ static/                                    # é™æ€èµ„æº
```

#### DDD åˆ†å±‚èŒè´£è¯´æ˜

**æ¥å£å±‚ï¼ˆInterfaces Layerï¼‰**

- **èŒè´£**ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€æƒé™éªŒè¯ã€å“åº”è¿”å›
- **æ ¸å¿ƒç»„ä»¶**ï¼š
  - Controllerï¼šRESTful API ç«¯ç‚¹
  - DTOï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆRequest/Responseï¼‰
  - Assemblerï¼šDTO ä¸é¢†åŸŸæ¨¡å‹çš„è½¬æ¢
  - Facadeï¼šå¯¹å¤–æš´éœ²çš„é—¨é¢æ¥å£

**åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰**

- **èŒè´£**ï¼šä¸šåŠ¡ç”¨ä¾‹ç¼–æ’ã€äº‹åŠ¡ç®¡ç†ã€è·¨èšåˆåè°ƒ
- **æ ¸å¿ƒç»„ä»¶**ï¼š
  - ApplicationServiceï¼šåº”ç”¨æœåŠ¡ï¼Œåè°ƒå¤šä¸ªé¢†åŸŸæœåŠ¡å®Œæˆä¸šåŠ¡ç”¨ä¾‹
  - Commandï¼šå‘½ä»¤å¯¹è±¡ï¼Œå°è£…å†™æ“ä½œ
  - Queryï¼šæŸ¥è¯¢å¯¹è±¡ï¼Œå°è£…è¯»æ“ä½œ
  - EventHandlerï¼šå¤„ç†é¢†åŸŸäº‹ä»¶

**é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰**

- **èŒè´£**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€ä¸šåŠ¡è§„åˆ™ã€é¢†åŸŸæ¨¡å‹
- **æ ¸å¿ƒç»„ä»¶**ï¼š
  - Aggregateï¼šèšåˆæ ¹ï¼Œä¿è¯ä¸šåŠ¡ä¸€è‡´æ€§è¾¹ç•Œ
  - Entityï¼šå®ä½“ï¼Œå…·æœ‰å”¯ä¸€æ ‡è¯†çš„é¢†åŸŸå¯¹è±¡
  - ValueObjectï¼šå€¼å¯¹è±¡ï¼Œæ— æ ‡è¯†çš„ä¸å¯å˜å¯¹è±¡
  - DomainServiceï¼šé¢†åŸŸæœåŠ¡ï¼Œè·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘
  - Repositoryï¼šä»“å‚¨æ¥å£ï¼Œå®šä¹‰æ•°æ®è®¿é—®å¥‘çº¦

**åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰**

- **èŒè´£**ï¼šæŠ€æœ¯å®ç°ã€å¤–éƒ¨é›†æˆã€æ•°æ®æŒä¹…åŒ–
- **æ ¸å¿ƒç»„ä»¶**ï¼š
  - RepositoryImplï¼šä»“å‚¨å®ç°
  - Mapperï¼šMyBatis æ•°æ®è®¿é—®
  - POï¼šæŒä¹…åŒ–å¯¹è±¡
  - Integrationï¼šå¤–éƒ¨ç³»ç»Ÿé›†æˆï¼ˆDifyã€Minioã€Kafkaï¼‰
  - Configï¼šå„ç§æŠ€æœ¯é…ç½®

#### é¢†åŸŸæ¨¡å‹ä¸åŠŸèƒ½æ¨¡å—æ˜ å°„

| é¢†åŸŸæ¨¡å‹           | åŠŸèƒ½æ¨¡å—     | æ ¸å¿ƒèšåˆæ ¹  | ä¸»è¦é¢†åŸŸæœåŠ¡               |
| ------------------ | ------------ | ----------- | -------------------------- |
| User Domain        | ç”¨æˆ·ç®¡ç†æ¨¡å— | User        | AuthenticationService      |
| Declaration Domain | ç”³æŠ¥æ¨¡å—     | Declaration | DeclarationWorkflowService |
| Project Domain     | é¡¹ç›®ç®¡ç†æ¨¡å— | Project     | KnowledgeBaseService       |
| Acceptance Domain  | éªŒæ”¶æ¨¡å—     | Acceptance  | ReportGenerationService    |
| File Domain        | æ–‡ä»¶ç®¡ç†æ¨¡å— | FileInfo    | FileStorageService         |

#### ä¾èµ–å…³ç³»

```
Interfaces â†’ Application â†’ Domain â† Infrastructure
                            â†‘
                         Shared
```

- æ¥å£å±‚ä¾èµ–åº”ç”¨å±‚
- åº”ç”¨å±‚ä¾èµ–é¢†åŸŸå±‚
- åŸºç¡€è®¾æ–½å±‚å®ç°é¢†åŸŸå±‚å®šä¹‰çš„æ¥å£ï¼ˆä¾èµ–å€’ç½®ï¼‰
- æ‰€æœ‰å±‚éƒ½å¯ä»¥ä¾èµ–å…±äº«å†…æ ¸

### 5.2 åç«¯ API æ¥å£è®¾è®¡

#### 5.2.1 ç”¨æˆ·æœåŠ¡ API

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/user`

| æ¥å£è·¯å¾„    | æ–¹æ³• | åŠŸèƒ½             | æƒé™   |
| ----------- | ---- | ---------------- | ------ |
| `/register` | POST | ç”¨æˆ·æ³¨å†Œ         | å…¬å¼€   |
| `/login`    | POST | ç”¨æˆ·ç™»å½•         | å…¬å¼€   |
| `/logout`   | POST | ç”¨æˆ·ç™»å‡º         | éœ€ç™»å½• |
| `/info`     | GET  | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | éœ€ç™»å½• |
| `/update`   | PUT  | æ›´æ–°ç”¨æˆ·ä¿¡æ¯     | éœ€ç™»å½• |
| `/password` | PUT  | ä¿®æ”¹å¯†ç          | éœ€ç™»å½• |
| `/avatar`   | POST | ä¸Šä¼ å¤´åƒ         | éœ€ç™»å½• |

**ç”¨æˆ·æ³¨å†Œæ¥å£**

```json
POST /api/v1/user/register
Request:
{
  "username": "20230001",
  "password": "123456",
  "realName": "å¼ ä¸‰",
  "email": "zhangsan@university.edu.cn",
  "phone": "13800138000",
  "department": "è®¡ç®—æœºå­¦é™¢"
}

Response:
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "20230001"
  }
}
```

**ç”¨æˆ·ç™»å½•æ¥å£**

```json
POST /api/v1/user/login
Request:
{
  "username": "20230001",
  "password": "123456"
}

Response:
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "userId": 1,
      "username": "20230001",
      "realName": "å¼ ä¸‰",
      "department": "è®¡ç®—æœºå­¦é™¢",
      "roles": ["researcher"]
    }
  }
}
```

#### 5.2.2 ç”³æŠ¥æœåŠ¡ API

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/declaration`

| æ¥å£è·¯å¾„         | æ–¹æ³• | åŠŸèƒ½         | æƒé™     |
| ---------------- | ---- | ------------ | -------- |
| `/submit`        | POST | æäº¤é¡¹ç›®ç”³æŠ¥ | ç§‘ç ”äººå‘˜ |
| `/list`          | GET  | è·å–ç”³æŠ¥åˆ—è¡¨ | ç§‘ç ”äººå‘˜ |
| `/detail/{id}`   | GET  | è·å–ç”³æŠ¥è¯¦æƒ… | ç§‘ç ”äººå‘˜ |
| `/withdraw/{id}` | PUT  | æ’¤å›ç”³æŠ¥     | ç§‘ç ”äººå‘˜ |
| `/status/{id}`   | GET  | æŸ¥è¯¢ç”³æŠ¥çŠ¶æ€ | ç§‘ç ”äººå‘˜ |

**æäº¤é¡¹ç›®ç”³æŠ¥æ¥å£**

```json
POST /api/v1/declaration/submit
Request:
{
  "researchDirection": "äººå·¥æ™ºèƒ½åœ¨åŒ»ç–—å½±åƒè¯Šæ–­ä¸­çš„åº”ç”¨ç ”ç©¶",
  "researchField": "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ã€åŒ»å­¦å½±åƒå­¦ã€äººå·¥æ™ºèƒ½"
}

Response:
{
  "code": 200,
  "message": "ç”³æŠ¥æäº¤æˆåŠŸ",
  "data": {
    "declarationId": 1001,
    "declarationNo": "DECL-2025-001",
    "status": 1,
    "difyProjectId": "dify_proj_abc123"
  }
}
```

#### 5.2.3 é¡¹ç›®ç®¡ç†æœåŠ¡ API

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/project`

| æ¥å£è·¯å¾„          | æ–¹æ³•   | åŠŸèƒ½         | æƒé™       |
| ----------------- | ------ | ------------ | ---------- |
| `/list`           | GET    | è·å–é¡¹ç›®åˆ—è¡¨ | ç§‘ç ”äººå‘˜   |
| `/detail/{id}`    | GET    | è·å–é¡¹ç›®è¯¦æƒ… | ç§‘ç ”äººå‘˜   |
| `/create`         | POST   | åˆ›å»ºé¡¹ç›®     | ç§‘ç ”ç®¡ç†å‘˜ |
| `/update/{id}`    | PUT    | æ›´æ–°é¡¹ç›®ä¿¡æ¯ | é¡¹ç›®è´Ÿè´£äºº |
| `/members/{id}`   | GET    | è·å–é¡¹ç›®æˆå‘˜ | é¡¹ç›®æˆå‘˜   |
| `/members/add`    | POST   | æ·»åŠ é¡¹ç›®æˆå‘˜ | é¡¹ç›®è´Ÿè´£äºº |
| `/members/remove` | DELETE | ç§»é™¤é¡¹ç›®æˆå‘˜ | é¡¹ç›®è´Ÿè´£äºº |
| `/progress/{id}`  | GET    | è·å–é¡¹ç›®è¿›åº¦ | é¡¹ç›®æˆå‘˜   |
| `/progress/add`   | POST   | æ·»åŠ è¿›åº¦è®°å½• | é¡¹ç›®æˆå‘˜   |

**æ–‡æ¡£ç®¡ç† API**

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/project/document`

| æ¥å£è·¯å¾„            | æ–¹æ³•   | åŠŸèƒ½         | æƒé™          |
| ------------------- | ------ | ------------ | ------------- |
| `/upload`           | POST   | ä¸Šä¼ æ–‡æ¡£     | é¡¹ç›®æˆå‘˜      |
| `/list/{projectId}` | GET    | è·å–æ–‡æ¡£åˆ—è¡¨ | é¡¹ç›®æˆå‘˜      |
| `/preview/{id}`     | GET    | è·å–é¢„è§ˆé“¾æ¥ | é¡¹ç›®æˆå‘˜      |
| `/download/{id}`    | GET    | ä¸‹è½½æ–‡æ¡£     | é¡¹ç›®æˆå‘˜      |
| `/delete/{id}`      | DELETE | åˆ é™¤æ–‡æ¡£     | ä¸Šä¼ è€…/è´Ÿè´£äºº |
| `/search`           | POST   | çŸ¥è¯†åº“æœç´¢   | é¡¹ç›®æˆå‘˜      |

**ä¸Šä¼ æ–‡æ¡£æ¥å£**

```json
POST /api/v1/project/document/upload
Content-Type: multipart/form-data
Request:
{
  "projectId": 1,
  "files": [File, File, ...]
}

Response:
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": {
    "successCount": 3,
    "failCount": 0,
    "documents": [
      {
        "documentId": 101,
        "documentName": "ç ”ç©¶æŠ¥å‘Š.pdf",
        "fileSize": 2048576,
        "uploadTime": "2025-10-10T10:30:00"
      }
    ]
  }
}
```

**çŸ¥è¯†åº“æœç´¢æ¥å£**

```json
POST /api/v1/project/document/search
Request:
{
  "projectId": 1,
  "keyword": "æ·±åº¦å­¦ä¹ ç®—æ³•",
  "searchType": "semantic",
  "limit": 10
}

Response:
{
  "code": 200,
  "message": "æœç´¢æˆåŠŸ",
  "data": {
    "total": 5,
    "results": [
      {
        "documentId": 101,
        "documentName": "æ·±åº¦å­¦ä¹ ç ”ç©¶æŠ¥å‘Š.pdf",
        "relevanceScore": 0.95,
        "snippet": "...æ·±åº¦å­¦ä¹ ç®—æ³•åœ¨å›¾åƒè¯†åˆ«é¢†åŸŸçš„åº”ç”¨...",
        "uploadTime": "2025-09-15T14:20:00"
      }
    ]
  }
}
```

#### 5.2.4 éªŒæ”¶æœåŠ¡ API

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/acceptance`

| æ¥å£è·¯å¾„                      | æ–¹æ³• | åŠŸèƒ½         | æƒé™       |
| ----------------------------- | ---- | ------------ | ---------- |
| `/apply`                      | POST | ç”³è¯·éªŒæ”¶     | é¡¹ç›®è´Ÿè´£äºº |
| `/list`                       | GET  | è·å–éªŒæ”¶åˆ—è¡¨ | ç§‘ç ”äººå‘˜   |
| `/detail/{id}`                | GET  | è·å–éªŒæ”¶è¯¦æƒ… | ç§‘ç ”äººå‘˜   |
| `/report/generate`            | POST | ç”ŸæˆæŠ¥å‘Š     | é¡¹ç›®è´Ÿè´£äºº |
| `/report/list/{acceptanceId}` | GET  | è·å–æŠ¥å‘Šåˆ—è¡¨ | é¡¹ç›®è´Ÿè´£äºº |
| `/report/preview/{id}`        | GET  | é¢„è§ˆæŠ¥å‘Š     | é¡¹ç›®è´Ÿè´£äºº |
| `/report/download/{id}`       | GET  | ä¸‹è½½æŠ¥å‘Š     | é¡¹ç›®è´Ÿè´£äºº |
| `/submit/{id}`                | PUT  | æäº¤éªŒæ”¶     | é¡¹ç›®è´Ÿè´£äºº |
| `/review/{id}`                | PUT  | å®¡æ ¸éªŒæ”¶     | ç§‘ç ”ç®¡ç†å‘˜ |

**ç”ŸæˆæŠ¥å‘Šæ¥å£**

```json
POST /api/v1/acceptance/report/generate
Request:
{
  "acceptanceId": 1,
  "projectId": 1,
  "reportType": 1,
  "reportConfig": {
    "includeAllDocuments": true,
    "dateRange": {
      "startDate": "2024-01-01",
      "endDate": "2025-10-10"
    }
  }
}

Response:
{
  "code": 200,
  "message": "æŠ¥å‘Šç”Ÿæˆä»»åŠ¡å·²æäº¤",
  "data": {
    "reportId": 1001,
    "taskId": "task_abc123",
    "status": 1,
    "estimatedTime": 300
  }
}
```

**æŸ¥è¯¢æŠ¥å‘Šç”ŸæˆçŠ¶æ€æ¥å£**

```json
GET /api/v1/acceptance/report/status/{reportId}
Response:
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "reportId": 1001,
    "status": 2,
    "progress": 100,
    "wordCount": 1250000,
    "generatedTime": "2025-10-10T15:30:00",
    "downloadUrl": "https://minio.sciz.edu.cn/reports/tech_report_1001.pdf"
  }
}
```

#### 5.2.5 AI é›†æˆæœåŠ¡ API

**åŸºç¡€è·¯å¾„ï¼š** `/api/v1/ai`

| æ¥å£è·¯å¾„                    | æ–¹æ³• | åŠŸèƒ½             | æƒé™     |
| --------------------------- | ---- | ---------------- | -------- |
| `/workflow/execute`         | POST | æ‰§è¡Œ Dify å·¥ä½œæµ | å†…éƒ¨æœåŠ¡ |
| `/knowledge/sync`           | POST | åŒæ­¥çŸ¥è¯†åº“       | å†…éƒ¨æœåŠ¡ |
| `/knowledge/search`         | POST | æœç´¢çŸ¥è¯†åº“       | å†…éƒ¨æœåŠ¡ |
| `/workflow/status/{taskId}` | GET  | æŸ¥è¯¢å·¥ä½œæµçŠ¶æ€   | å†…éƒ¨æœåŠ¡ |

### 5.3 ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": "2025-10-10T10:30:00",
  "traceId": "abc123def456"
}
```

**çŠ¶æ€ç è§„èŒƒï¼š**

- `200`ï¼šæˆåŠŸ
- `400`ï¼šè¯·æ±‚å‚æ•°é”™è¯¯
- `401`ï¼šæœªæˆæƒ
- `403`ï¼šæ— æƒé™
- `404`ï¼šèµ„æºä¸å­˜åœ¨
- `500`ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯
- `503`ï¼šæœåŠ¡ä¸å¯ç”¨

---

## 6. å‰ç«¯è®¾è®¡

### 6.1 å‰ç«¯é¡¹ç›®ç»“æ„

```
sci-z-web/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                      # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ user.js              # ç”¨æˆ·ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ declaration.js       # ç”³æŠ¥ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ project.js           # é¡¹ç›®ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ document.js          # æ–‡æ¡£ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ acceptance.js        # éªŒæ”¶ç›¸å…³
â”‚   â”‚   â””â”€â”€ index.js             # API ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ assets/                   # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/              # å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ styles/              # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.scss   # SCSS å˜é‡
â”‚   â”‚   â”‚   â”œâ”€â”€ mixins.scss      # SCSS æ··å…¥
â”‚   â”‚   â”‚   â””â”€â”€ common.scss      # é€šç”¨æ ·å¼
â”‚   â”‚   â””â”€â”€ icons/               # å›¾æ ‡
â”‚   â”œâ”€â”€ components/               # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/              # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.vue
â”‚   â”‚   â”‚   â””â”€â”€ MainLayout.vue
â”‚   â”‚   â”œâ”€â”€ FileUpload/          # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.vue
â”‚   â”‚   â”‚   â””â”€â”€ FileList.vue
â”‚   â”‚   â”œâ”€â”€ FilePreview/         # æ–‡ä»¶é¢„è§ˆç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ FilePreview.vue
â”‚   â”‚   â”œâ”€â”€ SearchBox/           # æœç´¢æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ SearchBox.vue
â”‚   â”‚   â”œâ”€â”€ StatusTag/           # çŠ¶æ€æ ‡ç­¾ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ StatusTag.vue
â”‚   â”‚   â””â”€â”€ Common/              # é€šç”¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ Pagination.vue
â”‚   â”‚       â”œâ”€â”€ Dialog.vue
â”‚   â”‚       â””â”€â”€ Loading.vue
â”‚   â”œâ”€â”€ composables/              # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useAuth.js           # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ useUpload.js         # ä¸Šä¼ ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ useSearch.js         # æœç´¢ç›¸å…³
â”‚   â”‚   â””â”€â”€ useTable.js          # è¡¨æ ¼ç›¸å…³
â”‚   â”œâ”€â”€ directives/               # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ permission.js        # æƒé™æŒ‡ä»¤
â”‚   â”‚   â””â”€â”€ loading.js           # åŠ è½½æŒ‡ä»¤
â”‚   â”œâ”€â”€ router/                   # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.js             # è·¯ç”±ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ modules/             # è·¯ç”±æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js
â”‚   â”‚   â”‚   â”œâ”€â”€ declaration.js
â”‚   â”‚   â”‚   â”œâ”€â”€ project.js
â”‚   â”‚   â”‚   â””â”€â”€ acceptance.js
â”‚   â”‚   â””â”€â”€ guards.js            # è·¯ç”±å®ˆå«
â”‚   â”œâ”€â”€ store/                    # çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
â”‚   â”‚   â”œâ”€â”€ index.js             # Store å…¥å£
â”‚   â”‚   â”œâ”€â”€ modules/             # Store æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ user.js          # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ app.js           # åº”ç”¨çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ project.js       # é¡¹ç›®çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ permission.js    # æƒé™çŠ¶æ€
â”‚   â”‚   â””â”€â”€ types.js             # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.js           # Axios å°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js              # è®¤è¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ validate.js          # è¡¨å•éªŒè¯
â”‚   â”‚   â”œâ”€â”€ date.js              # æ—¥æœŸå¤„ç†
â”‚   â”‚   â”œâ”€â”€ file.js              # æ–‡ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ constants.js         # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ views/                    # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ Login/               # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ Register/            # æ³¨å†Œé¡µ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ Dashboard/           # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ User/                # ç”¨æˆ·ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.vue      # ä¸ªäººä¿¡æ¯
â”‚   â”‚   â”‚   â””â”€â”€ Security.vue     # å®‰å…¨è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ Declaration/         # ç”³æŠ¥æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ List.vue         # ç”³æŠ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Create.vue       # æ–°å»ºç”³æŠ¥
â”‚   â”‚   â”‚   â””â”€â”€ Detail.vue       # ç”³æŠ¥è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ Project/             # é¡¹ç›®æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ List.vue         # é¡¹ç›®åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Detail.vue       # é¡¹ç›®è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Documents.vue    # é¡¹ç›®æ–‡æ¡£
â”‚   â”‚   â”‚   â”œâ”€â”€ Progress.vue     # é¡¹ç›®è¿›åº¦
â”‚   â”‚   â”‚   â”œâ”€â”€ Members.vue      # é¡¹ç›®æˆå‘˜
â”‚   â”‚   â”‚   â””â”€â”€ KnowledgeBase.vue # çŸ¥è¯†åº“æœç´¢
â”‚   â”‚   â”œâ”€â”€ Acceptance/          # éªŒæ”¶æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ List.vue         # éªŒæ”¶åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Apply.vue        # ç”³è¯·éªŒæ”¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Detail.vue       # éªŒæ”¶è¯¦æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ Reports.vue      # æŠ¥å‘Šç®¡ç†
â”‚   â”‚   â””â”€â”€ Error/               # é”™è¯¯é¡µ
â”‚   â”‚       â”œâ”€â”€ 403.vue
â”‚   â”‚       â””â”€â”€ 404.vue
â”‚   â”œâ”€â”€ App.vue                   # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js                   # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env.development              # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production               # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ .eslintrc.js                  # ESLint é…ç½®
â”œâ”€â”€ .prettierrc.js                # Prettier é…ç½®
â”œâ”€â”€ vite.config.js                # Vite é…ç½®
â””â”€â”€ package.json                  # é¡¹ç›®ä¾èµ–
```

### 6.2 å‰ç«¯åŠŸèƒ½æ¨¡å—

#### 6.2.1 é¡µé¢åˆ—è¡¨

| æ¨¡å— | é¡µé¢åç§°   | è·¯ç”±è·¯å¾„                       | åŠŸèƒ½æè¿°             |
| ---- | ---------- | ------------------------------ | -------------------- |
| è®¤è¯ | ç™»å½•é¡µ     | `/login`                       | ç”¨æˆ·ç™»å½•             |
| è®¤è¯ | æ³¨å†Œé¡µ     | `/register`                    | ç”¨æˆ·æ³¨å†Œ             |
| é¦–é¡µ | ä»ªè¡¨æ¿     | `/dashboard`                   | æ•°æ®æ¦‚è§ˆã€å¿«æ·å…¥å£   |
| ç”¨æˆ· | ä¸ªäººä¿¡æ¯   | `/user/profile`                | æŸ¥çœ‹/ç¼–è¾‘ä¸ªäººä¿¡æ¯    |
| ç”¨æˆ· | å®‰å…¨è®¾ç½®   | `/user/security`               | ä¿®æ”¹å¯†ç ã€ç™»å½•æ—¥å¿—   |
| ç”³æŠ¥ | ç”³æŠ¥åˆ—è¡¨   | `/declaration/list`            | æŸ¥çœ‹ç”³æŠ¥å†å²         |
| ç”³æŠ¥ | æ–°å»ºç”³æŠ¥   | `/declaration/create`          | å¡«å†™å¹¶æäº¤ç”³æŠ¥       |
| ç”³æŠ¥ | ç”³æŠ¥è¯¦æƒ…   | `/declaration/detail/:id`      | æŸ¥çœ‹ç”³æŠ¥è¯¦æƒ…ä¸çŠ¶æ€   |
| é¡¹ç›® | é¡¹ç›®åˆ—è¡¨   | `/project/list`                | æŸ¥çœ‹æ‰€æœ‰é¡¹ç›®         |
| é¡¹ç›® | é¡¹ç›®è¯¦æƒ…   | `/project/detail/:id`          | æŸ¥çœ‹é¡¹ç›®åŸºæœ¬ä¿¡æ¯     |
| é¡¹ç›® | é¡¹ç›®æ–‡æ¡£   | `/project/:id/documents`       | æ–‡æ¡£ä¸Šä¼ ã€åˆ—è¡¨ã€é¢„è§ˆ |
| é¡¹ç›® | çŸ¥è¯†åº“æœç´¢ | `/project/:id/knowledge`       | æœç´¢é¡¹ç›®çŸ¥è¯†åº“       |
| é¡¹ç›® | é¡¹ç›®è¿›åº¦   | `/project/:id/progress`        | æŸ¥çœ‹/æ·»åŠ è¿›åº¦è®°å½•    |
| é¡¹ç›® | é¡¹ç›®æˆå‘˜   | `/project/:id/members`         | ç®¡ç†é¡¹ç›®æˆå‘˜         |
| éªŒæ”¶ | éªŒæ”¶åˆ—è¡¨   | `/acceptance/list`             | æŸ¥çœ‹éªŒæ”¶è®°å½•         |
| éªŒæ”¶ | ç”³è¯·éªŒæ”¶   | `/acceptance/apply/:projectId` | å‘èµ·éªŒæ”¶ç”³è¯·         |
| éªŒæ”¶ | éªŒæ”¶è¯¦æƒ…   | `/acceptance/detail/:id`       | æŸ¥çœ‹éªŒæ”¶çŠ¶æ€         |
| éªŒæ”¶ | æŠ¥å‘Šç®¡ç†   | `/acceptance/:id/reports`      | ç”Ÿæˆã€é¢„è§ˆã€ä¸‹è½½æŠ¥å‘Š |
| é”™è¯¯ | 403 é¡µé¢   | `/403`                         | æ— æƒé™æç¤º           |
| é”™è¯¯ | 404 é¡µé¢   | `/404`                         | é¡µé¢ä¸å­˜åœ¨           |

#### 6.2.2 é¡µé¢ä¸šåŠ¡æµè½¬å…³ç³»å›¾

```mermaid
graph TD
    %% é¡µé¢èŠ‚ç‚¹
    A[ç™»å½•é¡µ] -->|ç™»å½•æˆåŠŸ| B[ä»ªè¡¨æ¿]
    A -->|æ³¨å†Œ| C[æ³¨å†Œé¡µ]
    C -->|æ³¨å†ŒæˆåŠŸ| A

    B -->|ç”³æŠ¥é¡¹ç›®| D[æ–°å»ºç”³æŠ¥]
    B -->|æŸ¥çœ‹ç”³æŠ¥| E[ç”³æŠ¥åˆ—è¡¨]
    B -->|æˆ‘çš„é¡¹ç›®| F[é¡¹ç›®åˆ—è¡¨]
    B -->|éªŒæ”¶ç®¡ç†| G[éªŒæ”¶åˆ—è¡¨]
    B -->|ä¸ªäººä¸­å¿ƒ| H[ä¸ªäººä¿¡æ¯]

    D -->|æäº¤ç”³æŠ¥| E
    E -->|æŸ¥çœ‹è¯¦æƒ…| I[ç”³æŠ¥è¯¦æƒ…]
    I -->|ç”³æŠ¥æˆåŠŸ| F

    F -->|æŸ¥çœ‹é¡¹ç›®| J[é¡¹ç›®è¯¦æƒ…]
    J -->|æ–‡æ¡£ç®¡ç†| K[é¡¹ç›®æ–‡æ¡£]
    J -->|çŸ¥è¯†åº“| L[çŸ¥è¯†åº“æœç´¢]
    J -->|è¿›åº¦ç®¡ç†| M[é¡¹ç›®è¿›åº¦]
    J -->|æˆå‘˜ç®¡ç†| N[é¡¹ç›®æˆå‘˜]
    J -->|ç”³è¯·éªŒæ”¶| O[ç”³è¯·éªŒæ”¶]

    K -->|ä¸Šä¼ æ–‡ä»¶| K
    K -->|é¢„è§ˆæ–‡ä»¶| P[æ–‡ä»¶é¢„è§ˆ]
    K -->|åŒæ­¥çŸ¥è¯†åº“| L

    L -->|æœç´¢ç»“æœ| P

    O -->|æäº¤ç”³è¯·| G
    G -->|æŸ¥çœ‹è¯¦æƒ…| Q[éªŒæ”¶è¯¦æƒ…]
    Q -->|æŠ¥å‘Šç®¡ç†| R[æŠ¥å‘Šç®¡ç†]
    R -->|ç”ŸæˆæŠ¥å‘Š| R
    R -->|é¢„è§ˆæŠ¥å‘Š| S[æŠ¥å‘Šé¢„è§ˆ]
    R -->|ä¸‹è½½æŠ¥å‘Š| R

    H -->|å®‰å…¨è®¾ç½®| T[å®‰å…¨è®¾ç½®]

    %% æ ·å¼å®šä¹‰
    classDef login fill:#e1f5ff,stroke:#03a9f4,stroke-width:2px;
    classDef dashboard fill:#fff3e0,stroke:#ff9800,stroke-width:2px;
    classDef form fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px;
    classDef list fill:#e8f5e9,stroke:#4caf50,stroke-width:2px;
    classDef detail fill:#e0f7fa,stroke:#00bcd4,stroke-width:2px;
    classDef process fill:#fff9c4,stroke:#ffeb3b,stroke-width:2px;
    classDef preview fill:#fce4ec,stroke:#e91e63,stroke-width:2px;

    %% åº”ç”¨æ ·å¼
    class A,C,T login
    class B dashboard
    class D,O,R form
    class E,F,G,M,N list
    class I,J,Q detail
    class K,L,P,S preview
    class G,O,Q process
```

### 6.3 æ ¸å¿ƒé¡µé¢è®¾è®¡è¯´æ˜

#### 6.3.1 ä»ªè¡¨æ¿ï¼ˆDashboardï¼‰

**åŠŸèƒ½è¦ç‚¹ï¼š**

- æ•°æ®ç»Ÿè®¡å¡ç‰‡ï¼ˆé¡¹ç›®æ€»æ•°ã€è¿›è¡Œä¸­é¡¹ç›®ã€å¾…éªŒæ”¶é¡¹ç›®ã€å·²å®Œæˆé¡¹ç›®ï¼‰
- æœ€è¿‘ç”³æŠ¥åˆ—è¡¨
- é¡¹ç›®è¿›åº¦æ¦‚è§ˆ
- å¾…åŠäº‹é¡¹æé†’
- å¿«æ·æ“ä½œå…¥å£

#### 6.3.2 æ–°å»ºç”³æŠ¥ï¼ˆDeclaration Createï¼‰

**åŠŸèƒ½è¦ç‚¹ï¼š**

- ç ”ç©¶æ–¹å‘è¾“å…¥æ¡†ï¼ˆæ”¯æŒå¯Œæ–‡æœ¬ï¼‰
- ç ”ç©¶é¢†åŸŸè¾“å…¥æ¡†ï¼ˆæ”¯æŒæ ‡ç­¾è¾“å…¥ï¼‰
- è¡¨å•éªŒè¯
- æäº¤åå®æ—¶æ˜¾ç¤º Dify å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€
- æ”¯æŒä¿å­˜è‰ç¨¿

#### 6.3.3 é¡¹ç›®æ–‡æ¡£ï¼ˆProject Documentsï¼‰

**åŠŸèƒ½è¦ç‚¹ï¼š**

- æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ
- æ”¯æŒå¤šæ–‡ä»¶æ‰¹é‡ä¸Šä¼ 
- æ–‡ä»¶åˆ—è¡¨å±•ç¤ºï¼ˆè¡¨æ ¼å½¢å¼ï¼‰
- æ–‡ä»¶ç±»å‹å›¾æ ‡åŒºåˆ†
- æ–‡ä»¶é¢„è§ˆåŠŸèƒ½
- æ–‡ä»¶ä¸‹è½½
- æ–‡ä»¶åˆ é™¤ï¼ˆå¸¦æƒé™æ§åˆ¶ï¼‰
- ä¸Šä¼ è¿›åº¦æ¡
- åŒæ­¥åˆ° Dify çŸ¥è¯†åº“çŠ¶æ€æ˜¾ç¤º

#### 6.3.4 çŸ¥è¯†åº“æœç´¢ï¼ˆKnowledge Baseï¼‰

**åŠŸèƒ½è¦ç‚¹ï¼š**

- æœç´¢æ¡†ï¼ˆæ”¯æŒå…³é”®è¯ã€è¯­ä¹‰æœç´¢ï¼‰
- æœç´¢ç»“æœåˆ—è¡¨
- é«˜äº®æ˜¾ç¤ºåŒ¹é…å†…å®¹
- ç›¸å…³åº¦è¯„åˆ†å±•ç¤º
- ç‚¹å‡»ç»“æœè·³è½¬æ–‡ä»¶é¢„è§ˆ
- æœç´¢å†å²è®°å½•

#### 6.3.5 æŠ¥å‘Šç®¡ç†ï¼ˆReportsï¼‰

**åŠŸèƒ½è¦ç‚¹ï¼š**

- æŠ¥å‘Šç±»å‹é€‰æ‹©ï¼ˆç§‘æŠ€æŠ¥å‘Šã€è‡ªè¯„æŠ¥å‘Šï¼‰
- ç”ŸæˆæŠ¥å‘ŠæŒ‰é’®
- æŠ¥å‘Šç”Ÿæˆè¿›åº¦æ¡
- å®æ—¶æ˜¾ç¤ºç”ŸæˆçŠ¶æ€
- æŠ¥å‘Šåˆ—è¡¨
- æŠ¥å‘Šé¢„è§ˆï¼ˆæ”¯æŒ PDFã€Wordï¼‰
- æŠ¥å‘Šä¸‹è½½
- æŠ¥å‘Šå­—æ•°ç»Ÿè®¡

### 6.4 UI/UX è®¾è®¡è§„èŒƒ

#### é¢œè‰²è§„èŒƒï¼ˆé«˜æ ¡ç§‘ç ”é£æ ¼ï¼‰

- ä¸»è‰²è°ƒ Primaryï¼š`#1E3A8A`ï¼ˆå­¦æœ¯è“ï¼Indigo 800ï¼Œç”¨äºå“ç‰Œè‰²ã€ä¸»æŒ‰é’®ã€é€‰ä¸­æ€ï¼‰
- è¾…è‰² Accentï¼š`#0EA5E9`ï¼ˆç§‘ç ”æ´»åŠ›è“ï¼Sky 500ï¼Œç”¨äºé“¾æ¥ã€æ¬¡çº§æŒ‰é’®ã€å¼ºè°ƒä¿¡æ¯ï¼‰
- ä¿¡æ¯è‰² Infoï¼š`#2563EB`ï¼ˆä¿¡æ¯æç¤º/æ ‡ç­¾ï¼‰
- æˆåŠŸè‰² Successï¼š`#16A34A`ï¼ˆé€šè¿‡/æˆåŠŸçŠ¶æ€ï¼‰
- è­¦å‘Šè‰² Warningï¼š`#F59E0B`ï¼ˆæé†’/è­¦å‘ŠçŠ¶æ€ï¼‰
- é”™è¯¯è‰² Errorï¼š`#DC2626`ï¼ˆé”™è¯¯/å±é™©æ“ä½œï¼‰
- èƒŒæ™¯è‰² Backgroundï¼š`#F7F9FC`ï¼ˆä½é¥±å’Œæ˜äº®èƒŒæ™¯ï¼Œæå‡å­¦æœ¯æ°›å›´ä¸é˜…è¯»èˆ’é€‚åº¦ï¼‰
- è¡¨é¢è‰² Surfaceï¼š`#FFFFFF`ï¼ˆå¡ç‰‡ã€å†…å®¹å®¹å™¨ï¼‰
- è¾¹æ¡†/åˆ†éš”çº¿ Borderï¼š`#E5E7EB`
- æ–‡å­—ä¸»è‰² Text Primaryï¼š`#111827`
- æ–‡å­—æ¬¡è‰² Text Secondaryï¼š`#4B5563`
- è¾…åŠ©æ–‡å­— Text Tertiaryï¼š`#6B7280`
- é«˜äº®/é€‰ä¸­ Hover/Selectedï¼š`#EEF2FF`ï¼ˆè½»æŸ”é«˜äº®ï¼Œä¸åˆºçœ¼ï¼‰
- ç¦ç”¨ Disabledï¼š`#9CA3AF`

ä½¿ç”¨å»ºè®®ï¼š

- é¡µé¢å¤§èƒŒæ™¯é‡‡ç”¨ Backgroundï¼Œå¡ç‰‡/è¡¨æ ¼ç­‰å®¹å™¨ä½¿ç”¨ Surfaceï¼Œå¹¶é…åˆè½»è¾¹æ¡†ä¸ç»†é˜´å½±å¢å¼ºå±‚æ¬¡æ„Ÿã€‚
- äº¤äº’ä¸»æŒ‰é’®ä¸å…³é”®å¯¼èˆªé‡‡ç”¨ Primaryï¼Œé“¾æ¥ä¸æ¬¡è¦äº¤äº’ç”¨ Accentï¼›é¿å…åŒå±ä½¿ç”¨è¿‡å¤šé¥±å’Œè‰²ã€‚
- è¯­ä¹‰è‰²ä»…ç”¨äºçŠ¶æ€ä¸åé¦ˆï¼ˆæˆåŠŸ/è­¦å‘Š/é”™è¯¯/ä¿¡æ¯ï¼‰ï¼Œä¸è¦æ›¿ä»£å“ç‰Œä¸»è‰²ã€‚
- å›¾è¡¨é…è‰²ä»¥ä¸»è‰²ç³»ï¼ˆIndigo/Skyï¼‰å±•å¼€ç±»ç›®è‰²ï¼Œä¿è¯ç§‘ç ”åœºæ™¯çš„å…‹åˆ¶ä¸ä¸“ä¸šæ„Ÿã€‚

#### ç»„ä»¶è§„èŒƒ

- ä½¿ç”¨ Element Plus ç»„ä»¶åº“
- ç»Ÿä¸€çš„è¡¨å•æ ·å¼
- ç»Ÿä¸€çš„è¡¨æ ¼æ ·å¼
- ç»Ÿä¸€çš„æŒ‰é’®é£æ ¼
- ç»Ÿä¸€çš„å¡ç‰‡æ ·å¼

#### äº¤äº’è§„èŒƒ

- æ‰€æœ‰å¼‚æ­¥æ“ä½œæ˜¾ç¤º Loading çŠ¶æ€
- æ“ä½œæˆåŠŸ/å¤±è´¥ç»™äºˆæ˜ç¡®æç¤º
- å±é™©æ“ä½œéœ€äºŒæ¬¡ç¡®è®¤
- è¡¨å•éªŒè¯å®æ—¶åé¦ˆ
- æ”¯æŒé”®ç›˜å¿«æ·é”®æ“ä½œ

---

## 7. éƒ¨ç½²è¯´æ˜

### 7.1 ç¯å¢ƒè¦æ±‚

**åç«¯ç¯å¢ƒï¼š**

- JDK 11+
- Maven 3.6+
- PostgreSQL 14+
- Redis 6+
- Kafka 3.x
- Minio

**å‰ç«¯ç¯å¢ƒï¼š**

- Node.js 16+
- npm 8+ æˆ– yarn 1.22+

### 7.2 éƒ¨ç½²æ¶æ„

```mermaid
graph TB
    %% å­å›¾å®šä¹‰ï¼ˆå¸¦ ID å’Œæ ‡ç­¾ï¼‰
    subgraph lb[è´Ÿè½½å‡è¡¡å±‚]
        A[Nginx / HAProxy]
    end

    subgraph frontend[å‰ç«¯æœåŠ¡]
        B1[Vue App 1]
        B2[Vue App 2]
    end

    subgraph gateway[API ç½‘å…³]
        C[Gateway Service]
    end

    subgraph microservices[å¾®æœåŠ¡é›†ç¾¤]
        D1[User Service]
        D2[Declaration Service]
        D3[Project Service]
        D4[Acceptance Service]
        D5[File Service]
        D6[AI Service]
    end

    subgraph data[æ•°æ®å±‚]
        E[(PostgreSQL Master)]
        E1[(PostgreSQL Slave)]
        F[(Redis Cluster)]
        G[Kafka Cluster]
        H[MinIO Cluster]
    end

    subgraph governance[æœåŠ¡æ²»ç†]
        I[Nacos / Consul]
        J[Sentinel]
        K[SkyWalking]
    end

    %% è¿æ¥å…³ç³»
    A --> B1
    A --> B2

    B1 -->|HTTP/HTTPS| C
    B2 -->|HTTP/HTTPS| C

    C -->|gRPC/REST| D1
    C -->|gRPC/REST| D2
    C -->|gRPC/REST| D3
    C -->|gRPC/REST| D4
    C -->|gRPC/REST| D5
    C -->|gRPC/REST| D6

    D1 -->|è¯»å†™æ•°æ®åº“| E
    D2 -->|è¯»å†™æ•°æ®åº“| E
    D3 -->|è¯»å†™æ•°æ®åº“| E
    D4 -->|è¯»å†™æ•°æ®åº“| E

    E -->|ä¸»ä»åŒæ­¥| E1

    D1 -->|ç¼“å­˜æ“ä½œ| F
    D2 -->|ç¼“å­˜æ“ä½œ| F
    D3 -->|ç¼“å­˜æ“ä½œ| F

    D3 -->|å‘å¸ƒè¿›åº¦äº‹ä»¶| G
    D4 -->|å‘å¸ƒéªŒæ”¶äº‹ä»¶| G

    D5 -->|å¯¹è±¡å­˜å‚¨| H

    D1 -.->|æœåŠ¡æ³¨å†Œ| I
    D2 -.->|æœåŠ¡æ³¨å†Œ| I
    D3 -.->|æœåŠ¡æ³¨å†Œ| I
    D5 -.->|æœåŠ¡æ³¨å†Œ| I
    D6 -.->|æœåŠ¡æ³¨å†Œ| I
    C    -.->|æœåŠ¡æ³¨å†Œ| I

    C -.->|é™æµé…ç½®| J
    D1 -.->|ç†”æ–­ç›‘æ§| K
    D3 -.->|é“¾è·¯è¿½è¸ª| K
    D4 -.->|é“¾è·¯è¿½è¸ª| K

    %% æ ·å¼å®šä¹‰ï¼ˆå¯é€‰ï¼šæå‡å¯è¯»æ€§ï¼‰
    classDef layer fill:#f0f8ff,stroke:#333,stroke-width:1px;
    classDef service fill:#d0ebff,stroke:#007acc;
    classDef data fill:#e6f4ea,stroke:#2e7d32;
    classDef mgmt fill:#fff4e6,stroke:#c75c07;

    class lb,gateway governance
    class B1,B2,C,D1,D2,D3,D4,D5,D6 service
    class E,E1,F,G,H data
```

### 7.3 éƒ¨ç½²æ­¥éª¤

#### 7.3.1 åŸºç¡€è®¾æ–½éƒ¨ç½²

1. **PostgreSQL éƒ¨ç½²**

```bash
# ä½¿ç”¨ Docker Compose
docker-compose up -d postgres
```

2. **Redis éƒ¨ç½²**

```bash
docker-compose up -d redis
```

3. **Kafka éƒ¨ç½²**

```bash
docker-compose up -d kafka
```

4. **Minio éƒ¨ç½²**

```bash
docker-compose up -d minio
```

#### 7.3.2 åç«¯æœåŠ¡éƒ¨ç½²

1. **ç¼–è¯‘æ‰“åŒ…**

```bash
mvn clean package -Dmaven.test.skip=true
```

2. **å¯åŠ¨æœåŠ¡**

```bash
java -jar gateway-service.jar
java -jar user-service.jar
java -jar declaration-service.jar
java -jar project-service.jar
java -jar acceptance-service.jar
java -jar file-service.jar
java -jar ai-integration-service.jar
```

#### 7.3.3 å‰ç«¯éƒ¨ç½²

1. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**

```bash
npm run build
```

2. **Nginx é…ç½®**

```nginx
server {
    listen 80;
    server_name sciz.edu.cn;

    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://gateway:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 7.4 é…ç½®è¯´æ˜

#### 7.4.1 æ•°æ®åº“é…ç½®

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/sciz_platform
    username: postgres
    password: your_password
    driver-class-name: org.postgresql.Driver
```

#### 7.4.2 Redis é…ç½®

```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password: your_password
    database: 0
```

#### 7.4.3 Minio é…ç½®

```yaml
minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket-name: sciz-files
```

#### 7.4.4 Dify é…ç½®

```yaml
dify:
  api:
    base-url: https://api.dify.ai/v1
    api-key: your_dify_api_key
  workflows:
    declaration: workflow_id_1
    tech-report: workflow_id_2
    self-report: workflow_id_3
  knowledge-base:
    base-id: knowledge_base_id
```

---

## é™„å½•

### A. å¼€å‘è§„èŒƒ

#### A.1 ä»£ç è§„èŒƒ

- éµå¾ªé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ
- å‰ç«¯éµå¾ª Vue.js å®˜æ–¹é£æ ¼æŒ‡å—
- ä½¿ç”¨ ESLint + Prettier ç»Ÿä¸€ä»£ç é£æ ¼

#### A.2 Git æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾ç›¸å…³
```

#### A.3 æ—¥å¿—è§„èŒƒ

- ä½¿ç”¨ SLF4J + Logback
- æ—¥å¿—çº§åˆ«ï¼šERRORã€WARNã€INFOã€DEBUG
- å…³é”®ä¸šåŠ¡æ“ä½œå¿…é¡»è®°å½•æ—¥å¿—

### B. æµ‹è¯•ç­–ç•¥

#### B.1 å•å…ƒæµ‹è¯•

- ä½¿ç”¨ JUnit 5 + Mockito
- ä»£ç è¦†ç›–ç‡è¦æ±‚ > 70%

#### B.2 é›†æˆæµ‹è¯•

- ä½¿ç”¨ Spring Boot Test
- æµ‹è¯•æœåŠ¡é—´è°ƒç”¨

#### B.3 å‰ç«¯æµ‹è¯•

- ä½¿ç”¨ Vitest + Vue Test Utils
- ç»„ä»¶å•å…ƒæµ‹è¯•

### C. ç›‘æ§ä¸è¿ç»´

#### C.1 åº”ç”¨ç›‘æ§

- ä½¿ç”¨ Spring Boot Actuator
- é›†æˆ Prometheus + Grafana

#### C.2 æ—¥å¿—æ”¶é›†

- ä½¿ç”¨ ELK Stackï¼ˆElasticsearch + Logstash + Kibanaï¼‰

#### C.3 é“¾è·¯è¿½è¸ª

- ä½¿ç”¨ SkyWalking æˆ– Zipkin

---

## è”ç³»æ–¹å¼

- é¡¹ç›®è´Ÿè´£äººï¼š[è´Ÿè´£äººå§“å]
- æŠ€æœ¯æ”¯æŒï¼šsupport@sciz.edu.cn
- é¡¹ç›®åœ°å€ï¼šhttps://github.com/sciz-platform/sci-z-web

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0.0  
**æœ€åæ›´æ–°ï¼š** 2025-10-10  
**ç»´æŠ¤å›¢é˜Ÿï¼š** Sci-Z Platform Development Team
