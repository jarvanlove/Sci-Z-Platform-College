# 通用分页组件使用说明

## 概述

通用分页组件 (`组件-分页.html`) 是一个完整的、中文界面的分页解决方案，支持完整的分页联动交互功能。

## 功能特性

### ✅ 完整功能

- **分页信息显示**：显示总记录数
- **每页显示数量选择**：支持 10、20、50、100 条/页
- **页码导航**：上一页、下一页、页码按钮
- **智能页码显示**：自动显示省略号，优化大量页码的显示
- **快速跳转**：支持输入页码直接跳转
- **响应式设计**：适配移动端和桌面端

### ✅ 交互特性

- **联动更新**：页码变化时自动更新数据
- **状态管理**：正确显示当前页、禁用状态
- **键盘支持**：支持回车键快速跳转
- **视觉反馈**：悬停效果、激活状态、禁用状态

## 使用方法

### 1. 基本使用

```html
<!-- 在页面头部引用主样式文件（包含分页样式） -->
<link rel="stylesheet" href="../通用规范/样式.css" />

<!-- 在页面中添加分页容器 -->
<div id="pagination-component"></div>
```

### 2. JavaScript 集成

```javascript
// 初始化分页组件
const initPagination = () => {
  const paginationContainer = document.getElementById("pagination-component");
  if (paginationContainer) {
    // 创建分页HTML
    const paginationHTML = `
      <div class="pagination-container">
        <!-- 分页信息 -->
        <div class="pagination-info">
          共 ${pagination.total} 条记录
        </div>

        <!-- 每页显示数量选择器 -->
        <div class="page-size-selector">
          每页显示
          <select id="page-size-select">
            <option value="10" ${
              pagination.size === 10 ? "selected" : ""
            }>10 条</option>
            <option value="20" ${
              pagination.size === 20 ? "selected" : ""
            }>20 条</option>
            <option value="50" ${
              pagination.size === 50 ? "selected" : ""
            }>50 条</option>
          </select>
        </div>

        <!-- 分页控制器 -->
        <div class="pagination-controls">
          <!-- 上一页按钮 -->
          <a href="javascript:void(0)" class="page-btn ${
            pagination.current === 1 ? "disabled" : ""
          }" id="prev-btn">
            上一页
          </a>

          <!-- 页码按钮 -->
          <div class="page-nav" id="page-nav">
            ${generatePageButtons()}
          </div>

          <!-- 下一页按钮 -->
          <a href="javascript:void(0)" class="page-btn ${
            pagination.current === Math.ceil(pagination.total / pagination.size)
              ? "disabled"
              : ""
          }" id="next-btn">
            下一页
          </a>
        </div>

        <!-- 快速跳转 -->
        <div class="page-jumper">
          跳至
          <input type="number" id="jump-input" value="${
            pagination.current
          }" min="1" max="${Math.ceil(pagination.total / pagination.size)}">
          页
          <button class="jump-btn" id="jump-btn">确定</button>
        </div>
      </div>
    `;

    paginationContainer.innerHTML = paginationHTML;

    // 绑定事件
    bindPaginationEvents();
  }
};

// 绑定分页事件
const bindPaginationEvents = () => {
  // 每页显示数量变化
  const pageSizeSelect = document.getElementById("page-size-select");
  if (pageSizeSelect) {
    pageSizeSelect.addEventListener("change", (e) => {
      pagination.size = parseInt(e.target.value);
      pagination.current = 1;
      loadData(); // 重新加载数据
      initPagination(); // 重新初始化分页组件
    });
  }

  // 上一页、下一页、页码点击、快速跳转等事件...
};
```

### 3. 数据状态管理

```javascript
// 分页状态
const pagination = reactive({
  current: 1, // 当前页码
  size: 10, // 每页显示数量
  total: 0, // 总记录数
});

// 数据加载函数
const loadData = async () => {
  try {
    loading.value = true;

    // 模拟API调用
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // 模拟数据
    const allData = generateMockData(); // 生成所有数据

    // 分页处理
    const start = (pagination.current - 1) * pagination.size;
    const end = start + pagination.size;
    data.value = allData.slice(start, end);
    pagination.total = allData.length; // 设置总记录数
  } catch (error) {
    console.error("数据加载失败:", error);
  } finally {
    loading.value = false;
    // 数据加载完成后重新初始化分页组件
    setTimeout(() => {
      initPagination();
    }, 100);
  }
};
```

## 样式定制

### CSS 类名说明

```css
.pagination-container     /* 分页容器 */
/* 分页容器 */
/* 分页容器 */
/* 分页容器 */
.pagination-info         /* 分页信息显示 */
.page-size-selector      /* 每页显示数量选择器 */
.pagination-controls     /* 分页控制器 */
.page-nav               /* 页码导航 */
.page-btn               /* 页码按钮 */
.page-btn.active        /* 当前页按钮 */
.page-btn.disabled      /* 禁用按钮 */
.page-ellipsis          /* 省略号 */
.page-jumper            /* 快速跳转 */
.jump-btn; /* 跳转按钮 */
```

### 响应式设计

组件已内置响应式设计，在移动端会自动调整布局：

```css
@media (max-width: 768px) {
  .pagination-container {
    flex-direction: column;
    gap: 16px;
  }

  .pagination-info,
  .page-size-selector {
    margin-right: 0;
    margin-bottom: 8px;
  }

  .page-jumper {
    margin-left: 0;
  }

  .page-nav {
    order: -1;
  }
}
```

## 完整示例

参考 `原型图/申报模块/申报列表.html` 中的完整实现示例。

## 注意事项

1. **样式引用**：使用分页组件前必须先引用 `样式.css` 文件（已包含分页样式）
2. **数据同步**：确保分页状态与数据状态保持同步
3. **事件绑定**：每次重新渲染分页组件后需要重新绑定事件
4. **错误处理**：处理页码越界、无效输入等情况
5. **性能优化**：大量数据时考虑虚拟滚动或服务端分页
6. **组件独立性**：分页组件样式完全独立，其他页面无需重复定义 CSS

## 扩展功能

可以根据需要扩展以下功能：

- 页码显示数量配置
- 自定义每页显示选项
- 分页信息格式化
- 国际化支持
- 主题定制
