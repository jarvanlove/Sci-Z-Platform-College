# 原型图设计补充要求

## 🎯 重要提醒

每个模块的原型图设计都必须包含以下补充要求，确保原型图的完整性和可用性。

## 📋 必须包含的补充要求

### 1. 页面跳转逻辑

每个 HTML 文件必须包含完整的页面跳转逻辑：

```javascript
// 页面跳转方法
methods: {
  // 跳转到指定页面
  navigateTo(pageName, params = {}) {
    // 根据页面名称跳转到对应页面
    const pageMap = {
      '登录': '/auth/login',
      '注册': '/auth/register',
      '仪表板': '/dashboard',
      '申报列表': '/declaration/list',
      '新建申报': '/declaration/create',
      '申报详情': '/declaration/detail',
      '项目列表': '/project/list',
      '项目详情': '/project/detail',
      '项目进度': '/project/progress',
      '验收列表': '/acceptance/list',
      '验收申请': '/acceptance/create',
      '验收详情': '/acceptance/detail',
      '报告管理': '/report/list',
      '用户管理': '/system/user',
      '角色权限': '/system/role',
      '系统配置': '/system/config',
      '日志管理': '/system/log',
      'AI对话': '/ai/chat',
      '知识库搜索': '/ai/search'
    }

    // 模拟页面跳转
    console.log(`跳转到: ${pageName}`, params)
    alert(`跳转到: ${pageName}${params.id ? ` (ID: ${params.id})` : ''}`)
  },

  // 返回上一页
  goBack() {
    console.log('返回上一页')
    alert('返回上一页')
  },

  // 返回首页
  goHome() {
    this.navigateTo('仪表板')
  }
}
```

### 2. 按钮点击交互

所有按钮都必须有对应的点击事件处理：

```javascript
// 按钮点击处理
handleButtonClick(action, data = {}) {
  switch(action) {
    case 'create':
      this.navigateTo('新建申报')
      break
    case 'view':
      this.navigateTo('申报详情', { id: data.id })
      break
    case 'edit':
      this.navigateTo('申报编辑', { id: data.id })
      break
    case 'delete':
      this.handleDelete(data.id)
      break
    case 'submit':
      this.handleSubmit()
      break
    case 'save':
      this.handleSave()
      break
    case 'cancel':
      this.goBack()
      break
    case 'reset':
      this.handleReset()
      break
    case 'search':
      this.handleSearch()
      break
    default:
      console.log('未知操作:', action)
  }
}
```

### 3. 表单提交处理

所有表单都必须有完整的提交逻辑：

```javascript
// 表单提交处理
handleSubmit() {
  // 验证表单
  if (!this.validateForm()) {
    return
  }

  // 显示加载状态
  this.loading = true

  // 模拟API调用
  setTimeout(() => {
    this.loading = false

    // 显示成功提示
    this.$message.success('操作成功')

    // 跳转到结果页面
    this.navigateTo('申报详情', { id: this.generateId() })
  }, 1000)
},

// 表单验证
validateForm() {
  // 具体的验证逻辑
  return true
}
```

### 4. 数据展示要求

每个页面都必须包含完整的示例数据：

```javascript
// 示例数据
data() {
  return {
    // 列表数据
    list: [
      {
        id: 1,
        name: '示例项目1',
        status: '进行中',
        createTime: '2024-01-15',
        updateTime: '2024-01-20'
      },
      {
        id: 2,
        name: '示例项目2',
        status: '已完成',
        createTime: '2024-01-10',
        updateTime: '2024-01-18'
      }
    ],

    // 表单数据
    form: {
      name: '',
      description: '',
      type: ''
    },

    // 加载状态
    loading: false,

    // 分页数据
    pagination: {
      current: 1,
      size: 10,
      total: 100
    }
  }
}
```

### 5. 权限控制实现

所有页面都必须包含权限控制逻辑：

```javascript
// 权限控制
methods: {
  // 检查权限
  hasPermission(permission) {
    // 模拟权限检查
    const permissions = [
      'btn:declaration:create',
      'btn:declaration:edit',
      'btn:declaration:delete',
      'btn:project:create',
      'btn:project:edit',
      'btn:project:delete',
      'btn:user:create',
      'btn:user:edit',
      'btn:user:delete'
    ]
    return permissions.includes(permission)
  },

  // 权限指令
  has(permission) {
    return this.hasPermission(permission)
  }
}
```

### 6. 交互反馈要求

所有交互都必须有适当的反馈：

```javascript
// 交互反馈
methods: {
  // 成功提示
  showSuccess(message) {
    this.$message.success(message)
  },

  // 错误提示
  showError(message) {
    this.$message.error(message)
  },

  // 警告提示
  showWarning(message) {
    this.$message.warning(message)
  },

  // 确认对话框
  confirmAction(message, callback) {
    this.$confirm(message, '确认操作', {
      confirmButtonText: '确定',
      cancelButtonText: '取消',
      type: 'warning'
    }).then(() => {
      callback()
    }).catch(() => {
      this.$message.info('已取消操作')
    })
  }
}
```

### 7. 加载状态处理

所有异步操作都必须有加载状态：

```javascript
// 加载状态
data() {
  return {
    loading: false,
    submitting: false,
    searching: false
  }
},

methods: {
  // 开始加载
  startLoading() {
    this.loading = true
  },

  // 结束加载
  endLoading() {
    this.loading = false
  },

  // 模拟异步操作
  async simulateAsyncOperation() {
    this.startLoading()

    try {
      // 模拟API调用
      await new Promise(resolve => setTimeout(resolve, 1000))

      // 操作成功
      this.showSuccess('操作成功')
    } catch (error) {
      // 操作失败
      this.showError('操作失败')
    } finally {
      this.endLoading()
    }
  }
}
```

## ✅ 质量检查清单

### 页面完整性检查

- [ ] 页面内容完整显示
- [ ] 所有按钮都有点击事件
- [ ] 所有表单都有提交逻辑
- [ ] 所有链接都有跳转功能

### 跳转逻辑检查

- [ ] 按钮点击能正确跳转
- [ ] 链接点击能正确跳转
- [ ] 返回按钮功能正常
- [ ] 导航菜单跳转正确

### 交互体验检查

- [ ] 加载状态正确显示
- [ ] 错误提示清晰明确
- [ ] 成功反馈及时有效
- [ ] 操作流程顺畅自然

### 数据展示检查

- [ ] 示例数据完整真实
- [ ] 表格数据正确显示
- [ ] 表单数据正确绑定
- [ ] 分页功能正常工作

### 权限控制检查

- [ ] 权限验证逻辑正确
- [ ] 无权限按钮不显示
- [ ] 权限提示清晰明确
- [ ] 权限变更实时生效

## 🚀 实施要求

### 1. 每个 HTML 文件必须包含

- 完整的页面内容和布局
- 完整的跳转逻辑和交互处理
- 完整的示例数据和状态管理
- 完整的权限控制和错误处理

### 2. 页面间跳转必须

- 使用统一的跳转方法
- 传递必要的参数
- 处理跳转错误
- 显示跳转状态

### 3. 交互反馈必须

- 显示操作结果
- 处理错误情况
- 提供用户引导
- 保持状态一致

### 4. 代码质量必须

- 格式化良好的代码
- 详细的注释说明
- 清晰的逻辑结构
- 完整的错误处理

## 📋 最终检查

在完成每个模块的原型图设计后，必须进行以下检查：

1. **功能完整性**：所有功能都能正常工作
2. **跳转完整性**：所有页面都能正确跳转
3. **交互完整性**：所有交互都有适当反馈
4. **数据完整性**：所有数据都能正确显示
5. **权限完整性**：所有权限控制都正确实现

只有通过所有检查的原型图才能被认为是合格的。
