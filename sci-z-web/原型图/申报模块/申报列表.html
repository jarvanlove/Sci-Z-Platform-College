<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>申报列表 - 高校科研项目管理平台</title>
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-plus@2.3.14/dist/index.css"
    />
    <script src="https://unpkg.com/vue@3.2.47/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/element-plus@2.3.14"></script>
    <link rel="stylesheet" href="../通用规范/样式.css" />
    <style>
      .declaration-list-container {
        padding: 20px;
        background: #f7f9fc;
        min-height: calc(100vh - 56px);
      }

      .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: #1e3a8a;
        margin: 0;
      }

      .search-card {
        background: #ffffff;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
        border: 1px solid #e5e7eb;
      }

      .search-form {
        display: flex;
        gap: 16px;
        align-items: end;
      }

      .search-form .el-form-item {
        margin-bottom: 0;
      }

      .table-card {
        background: #ffffff;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
        border: 1px solid #e5e7eb;
      }

      .status-tag {
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
      }

      .status-draft {
        background-color: #f3f4f6;
        color: #6b7280;
      }

      .status-submitting {
        background-color: #fef3c7;
        color: #f59e0b;
      }

      .status-success {
        background-color: #dcfce7;
        color: #16a34a;
      }

      .status-failed {
        background-color: #fee2e2;
        color: #dc2626;
      }

      .status-withdrawn {
        background-color: #e0e7ff;
        color: #2563eb;
      }

      .operation-buttons {
        display: flex;
        gap: 8px;
      }

      .operation-buttons .el-button {
        padding: 4px 8px;
        font-size: 12px;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #6b7280;
      }

      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
      }

      .empty-state-text {
        font-size: 16px;
        margin-bottom: 8px;
      }

      .empty-state-hint {
        font-size: 14px;
        color: #9ca3af;
      }

      /* 加载状态样式 */
      .loading-container {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
        color: #6b7280;
        font-size: 14px;
      }

      .loading-container .el-icon {
        margin-right: 8px;
        font-size: 16px;
      }

      /* 原生HTML表格样式 */
      .table-wrapper {
        overflow-x: auto;
      }

      .native-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
        color: #374151;
        background-color: #ffffff;
        border: 1px solid #e5e7eb;
      }

      /* 表头样式 */
      .native-table thead th {
        background-color: #f5f5f5;
        color: #374151;
        font-weight: 600;
        padding: 12px 8px;
        border-right: 1px solid #e5e7eb;
        border-bottom: 1px solid #e5e7eb;
        text-align: left;
        white-space: nowrap;
      }

      /* 表格内容样式 */
      .native-table tbody td {
        padding: 12px 8px;
        border-right: 1px solid #e5e7eb;
        border-bottom: 1px solid #e5e7eb;
        vertical-align: top;
      }

      /* 斑马纹效果 */
      .native-table tbody tr:nth-child(even) {
        background-color: #f9fafb;
      }

      /* 悬停效果 */
      .native-table tbody tr:hover {
        background-color: #f3f4f6;
      }

      /* 列宽度设置 */
      .native-table .col-number {
        width: 150px;
        min-width: 120px;
      }

      .native-table .col-applicant {
        width: 120px;
        min-width: 100px;
        text-align: center;
      }

      .native-table .col-direction {
        width: 300px;
        min-width: 200px;
      }

      .native-table .col-time {
        width: 140px;
        min-width: 120px;
        text-align: center;
      }

      .native-table .col-fields {
        width: 180px;
        min-width: 150px;
      }

      .native-table .col-status {
        width: 100px;
        text-align: center;
      }

      .native-table .col-actions {
        width: 120px;
        text-align: center;
      }

      /* 最后一列不显示右边框 */
      .native-table thead th:last-child,
      .native-table tbody td:last-child {
        border-right: none;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="declaration-list-container">
        <!-- 页面标题和操作 -->
        <div class="page-header">
          <h1 class="page-title">申报管理</h1>
          <el-button type="primary" size="large" @click="handleNewDeclaration">
            <el-icon><Plus /></el-icon>
            新建申报
          </el-button>
        </div>

        <!-- 搜索筛选区域 -->
        <div class="search-card">
          <el-form :model="searchForm" class="search-form" label-width="100px">
            <el-form-item label="关键词搜索">
              <el-input
                v-model="searchForm.keyword"
                placeholder="请输入研究方向或研究领域关键词"
                clearable
                style="width: 300px"
                @keyup.enter="handleSearch"
              >
                <template #prefix>
                  <el-icon><Search /></el-icon>
                </template>
              </el-input>
            </el-form-item>
            <el-form-item label="状态筛选">
              <el-select
                v-model="searchForm.status"
                placeholder="请选择状态"
                clearable
                style="width: 150px"
                @change="handleStatusChange"
              >
                <el-option
                  v-for="option in statusOptions"
                  :key="option.value"
                  :label="option.label"
                  :value="option.value"
                />
              </el-select>
            </el-form-item>
            <el-form-item>
              <el-button type="primary" @click="handleSearch">
                <el-icon><Search /></el-icon>
                搜索
              </el-button>
              <el-button @click="handleReset">
                <el-icon><Refresh /></el-icon>
                重置
              </el-button>
            </el-form-item>
          </el-form>
        </div>

        <!-- 申报列表表格 -->
        <div class="table-card">
          <!-- 加载状态 -->
          <div v-if="loading" class="loading-container">
            <el-icon class="is-loading"><Loading /></el-icon>
            <span>加载中...</span>
          </div>

          <!-- 原生HTML表格 -->
          <div v-else class="table-wrapper">
            <table class="native-table">
              <thead>
                <tr>
                  <th class="col-number">申报编号</th>
                  <th class="col-applicant">申报人</th>
                  <th class="col-direction">研究方向</th>
                  <th class="col-time">申报时间</th>
                  <th class="col-fields">研究领域</th>
                  <th class="col-status">状态</th>
                  <th class="col-actions">操作</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="declaration in declarations" :key="declaration.id">
                  <td class="col-number">{{ declaration.number }}</td>
                  <td class="col-applicant">{{ declaration.applicant }}</td>
                  <td class="col-direction">{{ declaration.direction }}</td>
                  <td class="col-time">{{ declaration.submitTime }}</td>
                  <td class="col-fields">
                    <el-tag
                      v-for="field in declaration.fields.slice(0, 2)"
                      :key="field"
                      size="small"
                      style="margin-right: 4px; margin-bottom: 2px"
                    >
                      {{ field }}
                    </el-tag>
                    <el-tag
                      v-if="declaration.fields.length > 2"
                      size="small"
                      type="info"
                    >
                      +{{ declaration.fields.length - 2 }}
                    </el-tag>
                  </td>
                  <td class="col-status">
                    <span
                      class="status-tag"
                      :class="`status-${declaration.statusType}`"
                    >
                      {{ declaration.status }}
                    </span>
                  </td>
                  <td class="col-actions">
                    <div class="operation-buttons">
                      <el-button
                        type="primary"
                        size="small"
                        link
                        @click="handleView(declaration.id)"
                      >
                        查看详情
                      </el-button>
                      <el-button
                        v-if="declaration.statusType === 'submitting'"
                        type="warning"
                        size="small"
                        link
                        @click="handleWithdraw(declaration.id)"
                      >
                        撤回申报
                      </el-button>
                      <el-button
                        v-if="declaration.statusType === 'failed'"
                        type="info"
                        size="small"
                        link
                        @click="handleRedeclare(declaration.id)"
                      >
                        重新申报
                      </el-button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- 空状态 -->
          <div v-if="!loading && declarations.length === 0" class="empty-state">
            <div class="empty-state-icon">📝</div>
            <div class="empty-state-text">暂无申报记录</div>
            <div class="empty-state-hint">
              点击"新建申报"按钮开始您的第一个申报
            </div>
          </div>

          <!-- 分页 -->
          <div v-if="declarations.length > 0" class="pagination-container">
            <!-- 通用分页组件 -->
            <div id="pagination-component"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const { createApp, ref, reactive, onMounted } = Vue;
      const { ElMessage, ElMessageBox } = ElementPlus;

      // 注册Loading图标
      const Loading = {
        template:
          '<svg class="el-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 896a32 32 0 0 1-32-32V736a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32zm448-480a32 32 0 0 1-32 32H736a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM96 512a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64H128a32 32 0 0 1-32-32zm778.24-200.96a32 32 0 0 1 45.248 45.248l-135.68 135.68a32 32 0 1 1-45.248-45.248l135.68-135.68zm-636.48 636.48a32 32 0 0 1 45.248 45.248l-135.68 135.68a32 32 0 1 1-45.248-45.248l135.68-135.68zM778.24 712.96a32 32 0 0 1-45.248 45.248l-135.68-135.68a32 32 0 1 1 45.248-45.248l135.68 135.68zM141.76 311.04a32 32 0 0 1-45.248-45.248l135.68-135.68a32 32 0 1 1 45.248 45.248l-135.68 135.68z"/></svg>',
      };

      createApp({
        components: {
          Loading,
        },
        setup() {
          // 数据状态
          const loading = ref(false);

          // 搜索表单
          const searchForm = reactive({
            keyword: "",
            status: "",
          });

          // 申报列表数据
          const declarations = ref([]);

          // 分页信息
          const pagination = reactive({
            current: 1,
            size: 10,
            total: 0,
          });

          // 状态选项
          const statusOptions = ref([
            { label: "全部", value: "" },
            { label: "草稿", value: "draft" },
            { label: "申报中", value: "submitting" },
            { label: "申报成功", value: "success" },
            { label: "申报失败", value: "failed" },
            { label: "已撤回", value: "withdrawn" },
          ]);

          // 加载申报列表
          const loadDeclarations = async () => {
            try {
              loading.value = true;

              // 模拟API调用延迟
              await new Promise((resolve) => setTimeout(resolve, 1000));

              // 模拟申报数据
              declarations.value = [
                {
                  id: 1,
                  number: "SB2024001",
                  applicant: "张教授",
                  direction: "人工智能在教育领域的应用研究",
                  fields: ["人工智能", "教育技术", "机器学习"],
                  submitTime: "2024-01-15",
                  status: "申报中",
                  statusType: "submitting",
                },
                {
                  id: 2,
                  number: "SB2024002",
                  applicant: "李博士",
                  direction: "区块链技术在供应链管理中的应用",
                  fields: ["区块链", "供应链", "分布式系统"],
                  submitTime: "2024-01-14",
                  status: "申报成功",
                  statusType: "success",
                },
                {
                  id: 3,
                  number: "SB2024003",
                  applicant: "王研究员",
                  direction: "量子计算算法优化研究",
                  fields: ["量子计算", "算法优化", "物理"],
                  submitTime: "2024-01-13",
                  status: "申报失败",
                  statusType: "failed",
                },
                {
                  id: 4,
                  number: "SB2024004",
                  applicant: "刘教授",
                  direction: "生物信息学数据分析方法研究",
                  fields: ["生物信息学", "数据分析", "统计学"],
                  submitTime: "2024-01-12",
                  status: "已撤回",
                  statusType: "withdrawn",
                },
                {
                  id: 5,
                  number: "SB2024005",
                  applicant: "陈博士",
                  direction: "物联网安全防护技术研究",
                  fields: ["物联网", "网络安全", "加密技术"],
                  submitTime: "2024-01-11",
                  status: "草稿",
                  statusType: "draft",
                },
                {
                  id: 6,
                  number: "SB2024006",
                  applicant: "赵教授",
                  direction: "机器学习在医疗诊断中的应用",
                  fields: ["机器学习", "医疗诊断", "深度学习"],
                  submitTime: "2024-01-10",
                  status: "申报中",
                  statusType: "submitting",
                },
                {
                  id: 7,
                  number: "SB2024007",
                  applicant: "孙研究员",
                  direction: "新材料设计与性能预测",
                  fields: ["材料科学", "计算化学", "机器学习"],
                  submitTime: "2024-01-09",
                  status: "申报成功",
                  statusType: "success",
                },
                {
                  id: 8,
                  number: "SB2024008",
                  applicant: "周博士",
                  direction: "可再生能源系统优化",
                  fields: ["可再生能源", "系统优化", "能源工程"],
                  submitTime: "2024-01-08",
                  status: "申报失败",
                  statusType: "failed",
                },
                {
                  id: 9,
                  number: "SB2024009",
                  applicant: "吴教授",
                  direction: "数字孪生技术在智能制造中的应用",
                  fields: ["数字孪生", "智能制造", "工业4.0"],
                  submitTime: "2024-01-07",
                  status: "申报中",
                  statusType: "submitting",
                },
                {
                  id: 10,
                  number: "SB2024010",
                  applicant: "郑研究员",
                  direction: "脑机接口技术研究",
                  fields: ["脑机接口", "神经科学", "信号处理"],
                  submitTime: "2024-01-06",
                  status: "草稿",
                  statusType: "draft",
                },
                {
                  id: 11,
                  number: "SB2024010",
                  applicant: "李研究员",
                  direction: "脑机接口技术研究",
                  fields: ["脑机接口", "神经科学", "信号处理"],
                  submitTime: "2024-01-06",
                  status: "草稿",
                  statusType: "draft",
                },
              ];

              // 模拟分页数据
              const start = (pagination.current - 1) * pagination.size;
              const end = start + pagination.size;
              declarations.value = declarations.value.slice(start, end);
              pagination.total = 11; // 模拟总数
            } catch (error) {
              ElMessage.error("加载申报列表失败，请重试");
            } finally {
              loading.value = false;
              // 数据加载完成后重新初始化分页组件
              setTimeout(() => {
                initPagination();
              }, 100);
            }
          };

          // 搜索处理
          const handleSearch = () => {
            pagination.current = 1;
            loadDeclarations();
            ElMessage.info("搜索完成");
          };

          // 状态筛选处理
          const handleStatusChange = () => {
            pagination.current = 1;
            loadDeclarations();
          };

          // 重置搜索
          const handleReset = () => {
            searchForm.keyword = "";
            searchForm.status = "";
            pagination.current = 1;
            loadDeclarations();
            ElMessage.info("已重置搜索条件");
          };

          // 新建申报
          const handleNewDeclaration = () => {
            ElMessage.info("跳转到新建申报页面");
            // 检查是否在iframe中
            if (window.parent !== window) {
              window.parent.postMessage(
                {
                  type: "navigate",
                  path: "declaration/create",
                },
                "*"
              );
            }
          };

          // 查看详情
          const handleView = (id) => {
            ElMessage.info(`查看申报详情：ID ${id}`);
            // 检查是否在iframe中
            if (window.parent !== window) {
              window.parent.postMessage(
                {
                  type: "navigate",
                  path: "declaration/detail",
                },
                "*"
              );
            }
          };

          // 撤回申报
          const handleWithdraw = async (id) => {
            try {
              await ElMessageBox.confirm(
                "确定要撤回此申报吗？撤回后将无法恢复。",
                "确认撤回",
                {
                  confirmButtonText: "确定撤回",
                  cancelButtonText: "取消",
                  type: "warning",
                }
              );
              ElMessage.success("申报已撤回");
              loadDeclarations();
            } catch {
              ElMessage.info("已取消撤回");
            }
          };

          // 重新申报
          const handleRedeclare = (id) => {
            ElMessage.info(`重新申报：ID ${id}`);
            // 跳转到新建申报页面，并预填数据
            if (window.parent !== window) {
              window.parent.postMessage(
                {
                  type: "navigate",
                  path: "declaration/create",
                },
                "*"
              );
            } else {
              window.location.href = "新建申报.html";
            }
          };

          // 分页大小变化
          const handleSizeChange = (size) => {
            pagination.size = size;
            pagination.current = 1;
            loadDeclarations();
          };

          // 当前页变化
          const handleCurrentChange = (current) => {
            pagination.current = current;
            loadDeclarations();
          };

          // 初始化分页组件
          const initPagination = () => {
            const paginationContainer = document.getElementById(
              "pagination-component"
            );
            if (paginationContainer) {
              // 创建分页组件HTML
              const paginationHTML = `
                <div class="pagination-container">
                  <!-- 分页信息 -->
                  <div class="pagination-info">
                    共 ${pagination.total} 条记录
                  </div>

                  <!-- 每页显示数量选择器 -->
                  <div class="page-size-selector">
                    每页显示
                    <select id="page-size-select">
                      <option value="10" ${
                        pagination.size === 10 ? "selected" : ""
                      }>10 条</option>
                      <option value="20" ${
                        pagination.size === 20 ? "selected" : ""
                      }>20 条</option>
                      <option value="50" ${
                        pagination.size === 50 ? "selected" : ""
                      }>50 条</option>
                    </select>
                  </div>

                  <!-- 分页控制器 -->
                  <div class="pagination-controls">
                    <!-- 上一页按钮 -->
                    <a href="javascript:void(0)" class="page-btn ${
                      pagination.current === 1 ? "disabled" : ""
                    }" id="prev-btn">
                      上一页
                    </a>

                    <!-- 页码按钮 -->
                    <div class="page-nav" id="page-nav">
                      ${generatePageButtons()}
                    </div>

                    <!-- 下一页按钮 -->
                    <a href="javascript:void(0)" class="page-btn ${
                      pagination.current ===
                      Math.ceil(pagination.total / pagination.size)
                        ? "disabled"
                        : ""
                    }" id="next-btn">
                      下一页
                    </a>
                  </div>

                  <!-- 快速跳转 -->
                  <div class="page-jumper">
                    跳至
                    <input type="number" id="jump-input" value="${
                      pagination.current
                    }" min="1" max="${Math.ceil(
                pagination.total / pagination.size
              )}">
                    页
                    <button class="jump-btn" id="jump-btn">确定</button>
                  </div>
                </div>
              `;

              paginationContainer.innerHTML = paginationHTML;

              // 绑定事件
              bindPaginationEvents();
            }
          };

          // 生成页码按钮
          const generatePageButtons = () => {
            const totalPages = Math.ceil(pagination.total / pagination.size);
            const current = pagination.current;
            const pagerCount = 7; // 显示的页码数量

            let buttons = "";

            if (totalPages <= pagerCount) {
              // 总页数小于等于显示数量，显示所有页码
              for (let i = 1; i <= totalPages; i++) {
                buttons += `<a href="javascript:void(0)" class="page-btn ${
                  i === current ? "active" : ""
                }" data-page="${i}">${i}</a>`;
              }
            } else {
              // 计算中间页码范围
              const half = Math.floor(pagerCount / 2);
              let start = Math.max(1, current - half);
              let end = Math.min(totalPages, start + pagerCount - 1);

              // 调整起始位置
              if (end - start + 1 < pagerCount) {
                start = Math.max(1, end - pagerCount + 1);
              }

              // 第一页
              if (start > 1) {
                buttons += `<a href="javascript:void(0)" class="page-btn ${
                  1 === current ? "active" : ""
                }" data-page="1">1</a>`;
                if (start > 2) {
                  buttons += '<span class="page-ellipsis">...</span>';
                }
              }

              // 中间页码
              for (let i = start; i <= end; i++) {
                buttons += `<a href="javascript:void(0)" class="page-btn ${
                  i === current ? "active" : ""
                }" data-page="${i}">${i}</a>`;
              }

              // 最后一页
              if (end < totalPages) {
                if (end < totalPages - 1) {
                  buttons += '<span class="page-ellipsis">...</span>';
                }
                buttons += `<a href="javascript:void(0)" class="page-btn ${
                  totalPages === current ? "active" : ""
                }" data-page="${totalPages}">${totalPages}</a>`;
              }
            }

            return buttons;
          };

          // 绑定分页事件
          const bindPaginationEvents = () => {
            // 每页显示数量变化
            const pageSizeSelect = document.getElementById("page-size-select");
            if (pageSizeSelect) {
              pageSizeSelect.addEventListener("change", (e) => {
                pagination.size = parseInt(e.target.value);
                pagination.current = 1;
                loadDeclarations();
                initPagination(); // 重新初始化分页组件
              });
            }

            // 上一页
            const prevBtn = document.getElementById("prev-btn");
            if (prevBtn) {
              prevBtn.addEventListener("click", () => {
                if (pagination.current > 1) {
                  pagination.current--;
                  loadDeclarations();
                  initPagination();
                }
              });
            }

            // 下一页
            const nextBtn = document.getElementById("next-btn");
            if (nextBtn) {
              nextBtn.addEventListener("click", () => {
                const totalPages = Math.ceil(
                  pagination.total / pagination.size
                );
                if (pagination.current < totalPages) {
                  pagination.current++;
                  loadDeclarations();
                  initPagination();
                }
              });
            }

            // 页码点击
            const pageNav = document.getElementById("page-nav");
            if (pageNav) {
              pageNav.addEventListener("click", (e) => {
                if (
                  e.target.classList.contains("page-btn") &&
                  !e.target.classList.contains("active")
                ) {
                  const page = parseInt(e.target.getAttribute("data-page"));
                  if (page && page !== pagination.current) {
                    pagination.current = page;
                    loadDeclarations();
                    initPagination();
                  }
                }
              });
            }

            // 快速跳转
            const jumpBtn = document.getElementById("jump-btn");
            const jumpInput = document.getElementById("jump-input");
            if (jumpBtn && jumpInput) {
              const handleJump = () => {
                const page = parseInt(jumpInput.value);
                const totalPages = Math.ceil(
                  pagination.total / pagination.size
                );
                if (
                  page &&
                  page >= 1 &&
                  page <= totalPages &&
                  page !== pagination.current
                ) {
                  pagination.current = page;
                  loadDeclarations();
                  initPagination();
                } else {
                  jumpInput.value = pagination.current;
                }
              };

              jumpBtn.addEventListener("click", handleJump);
              jumpInput.addEventListener("keyup", (e) => {
                if (e.key === "Enter") {
                  handleJump();
                }
              });
            }
          };

          // 组件挂载时加载数据
          onMounted(() => {
            console.log("申报列表页面加载中...");
            loadDeclarations();

            // 调试信息：检查原生HTML表格
            setTimeout(() => {
              const nativeTable = document.querySelector(".native-table");
              const tableRows = nativeTable
                ? nativeTable.querySelectorAll("tbody tr")
                : [];

              console.log("=== 原生HTML表格调试信息 ===");
              console.log("- 表格元素存在:", !!nativeTable);
              console.log("- 数据行数:", tableRows.length);
              console.log("- 申报数据:", declarations.value);
              console.log("- 是否在iframe中:", window.parent !== window);

              if (tableRows.length > 0) {
                const firstRowCells = tableRows[0].querySelectorAll("td");
                console.log("- 第一行单元格数:", firstRowCells.length);
                for (let i = 0; i < firstRowCells.length; i++) {
                  const cell = firstRowCells[i];
                  console.log(
                    `- 第${i + 1}列 (${
                      [
                        "申报编号",
                        "申报人",
                        "研究方向",
                        "申报时间",
                        "研究领域",
                        "状态",
                        "操作",
                      ][i]
                    }):`
                  );
                  console.log(`  - 单元格内容:`, cell.textContent.trim());
                  console.log(`  - 单元格宽度:`, cell.offsetWidth);
                }
              }

              // 检查数据绑定
              console.log("- 数据绑定检查:");
              console.log(
                "  - declarations.value长度:",
                declarations.value.length
              );
              if (declarations.value.length > 0) {
                console.log("  - 第一行数据:", declarations.value[0]);
                console.log("  - number字段:", declarations.value[0].number);
                console.log(
                  "  - applicant字段:",
                  declarations.value[0].applicant
                );
                console.log(
                  "  - direction字段:",
                  declarations.value[0].direction
                );
                console.log(
                  "  - submitTime字段:",
                  declarations.value[0].submitTime
                );
              }

              // 初始化分页组件
              initPagination();
            }, 1500);
          });

          return {
            loading,
            searchForm,
            declarations,
            pagination,
            statusOptions,
            handleSearch,
            handleStatusChange,
            handleReset,
            handleNewDeclaration,
            handleView,
            handleWithdraw,
            handleRedeclare,
            handleSizeChange,
            handleCurrentChange,
          };
        },
      })
        .use(ElementPlus)
        .mount("#app");
    </script>
  </body>
</html>
