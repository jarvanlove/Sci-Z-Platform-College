<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>é¡¹ç›®è¯¦æƒ… - é«˜æ ¡ç§‘ç ”é¡¹ç›®ç®¡ç†å¹³å°</title>
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-plus@2.3.14/dist/index.css"
    />
    <script src="https://unpkg.com/vue@3.2.47/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/element-plus@2.3.14"></script>
    <link rel="stylesheet" href="../é€šç”¨è§„èŒƒ/æ ·å¼.css" />
    <style>
      .project-detail-container {
        padding: 20px;
        background: #f7f9fc;
        min-height: calc(100vh - 56px);
      }

      .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: #1e3a8a;
        margin: 0;
      }

      .content-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .main-content {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .sidebar-content {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .card {
        background: #ffffff;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
        border: 1px solid #e5e7eb;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid #e5e7eb;
      }

      .card-title {
        font-size: 16px;
        font-weight: 600;
        color: #111827;
        margin: 0;
      }

      .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .info-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .info-label {
        font-size: 14px;
        color: #6b7280;
        font-weight: 500;
      }

      .info-value {
        font-size: 14px;
        color: #374151;
      }

      .status-tag {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
      }

      .status-progress {
        background-color: #fef3c7;
        color: #f59e0b;
      }

      /* æˆå‘˜ç®¡ç†æ ·å¼ */
      .member-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .member-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: #f8fafc;
        border-radius: 6px;
      }

      .member-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6b7280;
        font-weight: 600;
      }

      .member-info {
        flex: 1;
      }

      .member-name {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 2px;
      }

      .member-role {
        font-size: 12px;
        color: #6b7280;
      }

      .member-actions {
        display: flex;
        gap: 8px;
      }

      .add-member-section {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
      }

      .search-member {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
      }

      .search-results {
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        background: #ffffff;
      }

      .search-result-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 12px;
        cursor: pointer;
        border-bottom: 1px solid #f3f4f6;
      }

      .search-result-item:hover {
        background: #f8fafc;
      }

      .search-result-item:last-child {
        border-bottom: none;
      }

      /* æ–‡æ¡£ç®¡ç†æ ·å¼ */
      .document-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .document-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: #f8fafc;
        border-radius: 6px;
      }

      .document-icon {
        width: 32px;
        height: 32px;
        border-radius: 4px;
        background: #dbeafe;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #1e40af;
      }

      .document-info {
        flex: 1;
      }

      .document-name {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 2px;
      }

      .document-meta {
        font-size: 12px;
        color: #6b7280;
      }

      .document-actions {
        display: flex;
        gap: 8px;
      }

      .upload-section {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
      }

      .upload-area {
        border: 2px dashed #d1d5db;
        border-radius: 6px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: border-color 0.3s;
      }

      .upload-area:hover {
        border-color: #1e3a8a;
      }

      .upload-area.dragover {
        border-color: #1e3a8a;
        background: #f0f9ff;
      }

      .upload-icon {
        font-size: 24px;
        color: #9ca3af;
        margin-bottom: 8px;
      }

      .upload-text {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 4px;
      }

      .upload-hint {
        font-size: 12px;
        color: #9ca3af;
      }

      /* æ“ä½œæŒ‰é’®åŒºåŸŸ */
      .action-buttons {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #e5e7eb;
      }

      .loading-container {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px;
        color: #6b7280;
        font-size: 14px;
      }

      .loading-container .el-icon {
        margin-right: 8px;
        font-size: 16px;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #6b7280;
      }

      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
      }

      .empty-state-text {
        font-size: 16px;
        margin-bottom: 8px;
      }

      .empty-state-hint {
        font-size: 14px;
        color: #9ca3af;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .content-grid {
          grid-template-columns: 1fr;
        }

        .info-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="project-detail-container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="page-header">
          <h1 class="page-title">é¡¹ç›®è¯¦æƒ…</h1>
          <div>
            <el-button @click="handleBack">
              <el-icon><ArrowLeft /></el-icon>
              è¿”å›åˆ—è¡¨
            </el-button>
            <el-button type="primary" @click="handleEdit">
              <el-icon><Edit /></el-icon>
              ç¼–è¾‘é¡¹ç›®
            </el-button>
          </div>
        </div>

        <!-- åŠ è½½çŠ¶æ€ -->
        <div v-if="loading" class="loading-container">
          <el-icon class="is-loading"><Loading /></el-icon>
          <span>åŠ è½½ä¸­...</span>
        </div>

        <!-- ä¸»è¦å†…å®¹ -->
        <div v-else class="content-grid">
          <!-- å·¦ä¾§ä¸»è¦å†…å®¹ -->
          <div class="main-content">
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">åŸºæœ¬ä¿¡æ¯</h2>
              </div>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">é¡¹ç›®ç¼–å·</span>
                  <span class="info-value">{{ project.number }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">é¡¹ç›®åç§°</span>
                  <span class="info-value">{{ project.name }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">é¡¹ç›®è´Ÿè´£äºº</span>
                  <span class="info-value">{{ project.manager }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">é¡¹ç›®çŠ¶æ€</span>
                  <span class="status-tag status-progress"
                    >{{ getStatusText(project.status) }}</span
                  >
                </div>
                <div class="info-item">
                  <span class="info-label">åˆ›å»ºæ—¶é—´</span>
                  <span class="info-value">{{ project.createTime }}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">æ›´æ–°æ—¶é—´</span>
                  <span class="info-value">{{ project.updateTime }}</span>
                </div>
              </div>
              <div class="info-item" style="margin-top: 16px">
                <span class="info-label">é¡¹ç›®æè¿°</span>
                <span class="info-value">{{ project.description }}</span>
              </div>
            </div>

            <!-- æˆå‘˜ç®¡ç† -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">æˆå‘˜ç®¡ç†</h2>
                <el-button
                  type="primary"
                  size="small"
                  @click="showAddMember = !showAddMember"
                >
                  <el-icon><Plus /></el-icon>
                  æ·»åŠ æˆå‘˜
                </el-button>
              </div>

              <!-- æˆå‘˜åˆ—è¡¨ -->
              <div class="member-list">
                <div
                  v-for="member in members"
                  :key="member.id"
                  class="member-item"
                >
                  <div class="member-avatar">{{ member.name.charAt(0) }}</div>
                  <div class="member-info">
                    <div class="member-name">{{ member.name }}</div>
                    <div class="member-role">
                      {{ member.role }} Â· åŠ å…¥æ—¶é—´ï¼š{{ member.joinTime }}
                    </div>
                  </div>
                  <div class="member-actions">
                    <el-button
                      size="small"
                      @click="handleEditMember(member.id)"
                    >
                      ç¼–è¾‘
                    </el-button>
                    <el-button
                      size="small"
                      type="danger"
                      @click="handleRemoveMember(member.id)"
                    >
                      ç§»é™¤
                    </el-button>
                  </div>
                </div>
              </div>

              <!-- æ·»åŠ æˆå‘˜åŒºåŸŸ -->
              <div v-if="showAddMember" class="add-member-section">
                <div class="search-member">
                  <el-input
                    v-model="searchMemberKeyword"
                    placeholder="æœç´¢ç”¨æˆ·å§“åæˆ–å­¦å·¥å·"
                    style="flex: 1"
                  >
                    <template #append>
                      <el-button @click="searchMembers">
                        <el-icon><Search /></el-icon>
                      </el-button>
                    </template>
                  </el-input>
                </div>

                <div v-if="searchResults.length > 0" class="search-results">
                  <div
                    v-for="user in searchResults"
                    :key="user.id"
                    class="search-result-item"
                    @click="handleAddMember(user)"
                  >
                    <div
                      class="member-avatar"
                      style="width: 32px; height: 32px"
                    >
                      {{ user.name.charAt(0) }}
                    </div>
                    <div class="member-info">
                      <div class="member-name">{{ user.name }}</div>
                      <div class="member-role">{{ user.studentId }}</div>
                    </div>
                    <el-button size="small" type="primary">æ·»åŠ </el-button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- å³ä¾§è¾¹æ  -->
          <div class="sidebar-content">
            <!-- æ–‡æ¡£ç®¡ç† -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">æ–‡æ¡£ç®¡ç†</h2>
              </div>

              <!-- æ–‡æ¡£åˆ—è¡¨ -->
              <div v-if="documents.length > 0" class="document-list">
                <div
                  v-for="doc in documents"
                  :key="doc.id"
                  class="document-item"
                >
                  <div class="document-icon">
                    <el-icon><Document /></el-icon>
                  </div>
                  <div class="document-info">
                    <div class="document-name">{{ doc.name }}</div>
                    <div class="document-meta">
                      {{ doc.type }} Â· {{ doc.uploader }} Â· {{ doc.uploadTime }}
                      Â· {{ doc.size }}
                    </div>
                  </div>
                  <div class="document-actions">
                    <el-button size="small" @click="handleDownload(doc.id)">
                      ä¸‹è½½
                    </el-button>
                    <el-button
                      size="small"
                      type="danger"
                      @click="handleDeleteDoc(doc.id)"
                    >
                      åˆ é™¤
                    </el-button>
                  </div>
                </div>
              </div>

              <!-- ç©ºçŠ¶æ€ -->
              <div v-else class="empty-state">
                <div class="empty-state-icon">ğŸ“„</div>
                <div class="empty-state-text">æš‚æ— æ–‡æ¡£</div>
                <div class="empty-state-hint">ä¸Šä¼ é¡¹ç›®ç›¸å…³æ–‡æ¡£</div>
              </div>

              <!-- ä¸Šä¼ åŒºåŸŸ -->
              <div class="upload-section">
                <div
                  class="upload-area"
                  @click="triggerUpload"
                  @dragover.prevent="handleDragOver"
                  @dragleave.prevent="handleDragLeave"
                  @drop.prevent="handleDrop"
                  :class="{ dragover: isDragOver }"
                >
                  <div class="upload-icon">
                    <el-icon><Upload /></el-icon>
                  </div>
                  <div class="upload-text">ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</div>
                  <div class="upload-hint">
                    æ”¯æŒ PDFã€DOCã€DOCXã€XLSã€XLSX ç­‰æ ¼å¼
                  </div>
                </div>
                <input
                  ref="fileInput"
                  type="file"
                  multiple
                  style="display: none"
                  @change="handleFileSelect"
                  accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"
                />
              </div>
            </div>
          </div>
        </div>

        <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
        <div class="action-buttons">
          <el-button @click="handleExport">
            <el-icon><Download /></el-icon>
            å¯¼å‡ºæŠ¥å‘Š
          </el-button>
          <el-button type="danger" @click="handleDeleteProject">
            <el-icon><Delete /></el-icon>
            åˆ é™¤é¡¹ç›®
          </el-button>
        </div>
      </div>
    </div>

    <script>
      const { createApp, ref, onMounted } = Vue;
      const { ElMessage, ElMessageBox } = ElementPlus;

      // æ³¨å†ŒLoadingå›¾æ ‡
      const Loading = {
        template:
          '<svg class="el-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 896a32 32 0 0 1-32-32V736a32 32 0 0 1 64 0v192a32 32 0 0 1-32 32zm448-480a32 32 0 0 1-32 32H736a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM96 512a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64H128a32 32 0 0 1-32-32zm778.24-200.96a32 32 0 0 1 45.248 45.248l-135.68 135.68a32 32 0 1 1-45.248-45.248l135.68-135.68zm-636.48 636.48a32 32 0 0 1 45.248 45.248l-135.68 135.68a32 32 0 1 1-45.248-45.248l135.68-135.68zM778.24 712.96a32 32 0 0 1-45.248 45.248l-135.68-135.68a32 32 0 1 1 45.248-45.248l135.68 135.68zM141.76 311.04a32 32 0 0 1-45.248-45.248l135.68-135.68a32 32 0 1 1 45.248 45.248l-135.68 135.68z"/></svg>',
      };

      createApp({
        components: {
          Loading,
        },
        setup() {
          // å“åº”å¼æ•°æ®
          const loading = ref(false);
          const project = ref({});
          const members = ref([]);
          const documents = ref([]);
          const showAddMember = ref(false);
          const searchMemberKeyword = ref("");
          const searchResults = ref([]);
          const isDragOver = ref(false);
          const fileInput = ref(null);

          // æ¨¡æ‹Ÿé¡¹ç›®æ•°æ®
          const mockProject = {
            id: 1,
            number: "PRJ-2024-001",
            name: "åŸºäºäººå·¥æ™ºèƒ½çš„æ™ºèƒ½è¯Šæ–­ç³»ç»Ÿç ”ç©¶",
            description:
              "æœ¬é¡¹ç›®æ—¨åœ¨å¼€å‘ä¸€å¥—åŸºäºæ·±åº¦å­¦ä¹ çš„æ™ºèƒ½è¯Šæ–­ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æåŒ»å­¦å½±åƒæ•°æ®ï¼Œä¸ºåŒ»ç”Ÿæä¾›è¾…åŠ©è¯Šæ–­å»ºè®®ã€‚ç³»ç»Ÿå°†é‡‡ç”¨å·ç§¯ç¥ç»ç½‘ç»œå’Œå¾ªç¯ç¥ç»ç½‘ç»œç›¸ç»“åˆçš„æ–¹æ³•ï¼Œæé«˜è¯Šæ–­å‡†ç¡®ç‡å’Œæ•ˆç‡ã€‚",
            manager: "å¼ æ•™æˆ",
            status: "progress",
            createTime: "2024-01-15 09:00:00",
            updateTime: "2024-01-20 14:30:00",
          };

          // æ¨¡æ‹Ÿæˆå‘˜æ•°æ®
          const mockMembers = [
            {
              id: 1,
              name: "å¼ æ•™æˆ",
              role: "é¡¹ç›®è´Ÿè´£äºº",
              joinTime: "2024-01-15",
            },
            {
              id: 2,
              name: "æåšå£«",
              role: "æ ¸å¿ƒæˆå‘˜",
              joinTime: "2024-01-16",
            },
            {
              id: 3,
              name: "ç‹ç¡•å£«",
              role: "æ™®é€šæˆå‘˜",
              joinTime: "2024-01-18",
            },
          ];

          // æ¨¡æ‹Ÿæ–‡æ¡£æ•°æ®
          const mockDocuments = [
            {
              id: 1,
              name: "é¡¹ç›®éœ€æ±‚åˆ†ææŠ¥å‘Š.pdf",
              type: "PDF",
              uploader: "å¼ æ•™æˆ",
              uploadTime: "2024-01-15",
              size: "2.3MB",
            },
            {
              id: 2,
              name: "æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡.docx",
              type: "DOCX",
              uploader: "æåšå£«",
              uploadTime: "2024-01-18",
              size: "1.8MB",
            },
            {
              id: 3,
              name: "æµ‹è¯•æ•°æ®.xlsx",
              type: "XLSX",
              uploader: "ç‹ç¡•å£«",
              uploadTime: "2024-01-20",
              size: "856KB",
            },
          ];

          // æ¨¡æ‹Ÿæœç´¢ç»“æœ
          const mockSearchResults = [
            {
              id: 4,
              name: "èµµåšå£«",
              studentId: "2021001",
            },
            {
              id: 5,
              name: "é™ˆç¡•å£«",
              studentId: "2021002",
            },
          ];

          // è·å–çŠ¶æ€æ–‡æœ¬
          const getStatusText = (status) => {
            const statusMap = {
              planned: "è®¡åˆ’ä¸­",
              progress: "è¿›è¡Œä¸­",
              completed: "å·²å®Œæˆ",
              delayed: "å·²å»¶æœŸ",
            };
            return statusMap[status] || "æœªçŸ¥";
          };

          // åŠ è½½é¡¹ç›®è¯¦æƒ…
          const loadProjectDetail = async () => {
            loading.value = true;
            try {
              // æ¨¡æ‹ŸAPIè°ƒç”¨
              await new Promise((resolve) => setTimeout(resolve, 1000));

              project.value = mockProject;
              members.value = mockMembers;
              documents.value = mockDocuments;
            } catch (error) {
              ElMessage.error("åŠ è½½é¡¹ç›®è¯¦æƒ…å¤±è´¥");
            } finally {
              loading.value = false;
            }
          };

          // è¿”å›åˆ—è¡¨
          const handleBack = () => {
            ElMessage.info("è¿”å›é¡¹ç›®åˆ—è¡¨");
            // æ£€æŸ¥æ˜¯å¦åœ¨iframeä¸­
            if (window.parent !== window) {
              window.parent.postMessage(
                {
                  type: "navigate",
                  path: "project/list",
                },
                "*"
              );
            } else {
              window.location.href = "é¡¹ç›®åˆ—è¡¨.html";
            }
          };

          // ç¼–è¾‘é¡¹ç›®
          const handleEdit = () => {
            ElMessage.info("ç¼–è¾‘é¡¹ç›®");
            // è¿™é‡Œåº”è¯¥è·³è½¬åˆ°é¡¹ç›®ç¼–è¾‘é¡µé¢
          };

          // æœç´¢æˆå‘˜
          const searchMembers = () => {
            if (searchMemberKeyword.value.trim()) {
              searchResults.value = mockSearchResults.filter(
                (user) =>
                  user.name.includes(searchMemberKeyword.value) ||
                  user.studentId.includes(searchMemberKeyword.value)
              );
            } else {
              searchResults.value = [];
            }
          };

          // æ·»åŠ æˆå‘˜
          const handleAddMember = (user) => {
            ElMessage.success(`æ·»åŠ æˆå‘˜: ${user.name}`);
            // è¿™é‡Œåº”è¯¥è°ƒç”¨APIæ·»åŠ æˆå‘˜
            showAddMember.value = false;
            searchMemberKeyword.value = "";
            searchResults.value = [];
          };

          // ç¼–è¾‘æˆå‘˜
          const handleEditMember = (memberId) => {
            ElMessage.info(`ç¼–è¾‘æˆå‘˜: ${memberId}`);
            // è¿™é‡Œåº”è¯¥æ‰“å¼€ç¼–è¾‘æˆå‘˜å¯¹è¯æ¡†
          };

          // ç§»é™¤æˆå‘˜
          const handleRemoveMember = async (memberId) => {
            try {
              await ElMessageBox.confirm("ç¡®å®šè¦ç§»é™¤è¿™ä¸ªæˆå‘˜å—ï¼Ÿ", "ç¡®è®¤ç§»é™¤", {
                confirmButtonText: "ç¡®å®š",
                cancelButtonText: "å–æ¶ˆ",
                type: "warning",
              });

              ElMessage.success("æˆå‘˜ç§»é™¤æˆåŠŸ");
              // è¿™é‡Œåº”è¯¥è°ƒç”¨APIç§»é™¤æˆå‘˜
            } catch (error) {
              // ç”¨æˆ·å–æ¶ˆæ“ä½œ
            }
          };

          // ä¸‹è½½æ–‡æ¡£
          const handleDownload = (docId) => {
            ElMessage.info(`ä¸‹è½½æ–‡æ¡£: ${docId}`);
            // è¿™é‡Œåº”è¯¥è§¦å‘æ–‡æ¡£ä¸‹è½½
          };

          // åˆ é™¤æ–‡æ¡£
          const handleDeleteDoc = async (docId) => {
            try {
              await ElMessageBox.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡æ¡£å—ï¼Ÿ", "ç¡®è®¤åˆ é™¤", {
                confirmButtonText: "ç¡®å®š",
                cancelButtonText: "å–æ¶ˆ",
                type: "warning",
              });

              ElMessage.success("æ–‡æ¡£åˆ é™¤æˆåŠŸ");
              // è¿™é‡Œåº”è¯¥è°ƒç”¨APIåˆ é™¤æ–‡æ¡£
            } catch (error) {
              // ç”¨æˆ·å–æ¶ˆæ“ä½œ
            }
          };

          // è§¦å‘æ–‡ä»¶ä¸Šä¼ 
          const triggerUpload = () => {
            fileInput.value.click();
          };

          // å¤„ç†æ–‡ä»¶é€‰æ‹©
          const handleFileSelect = (event) => {
            const files = event.target.files;
            if (files.length > 0) {
              uploadFiles(files);
            }
          };

          // å¤„ç†æ‹–æ‹½äº‹ä»¶
          const handleDragOver = (event) => {
            event.preventDefault();
            isDragOver.value = true;
          };

          const handleDragLeave = (event) => {
            event.preventDefault();
            isDragOver.value = false;
          };

          const handleDrop = (event) => {
            event.preventDefault();
            isDragOver.value = false;
            const files = event.dataTransfer.files;
            if (files.length > 0) {
              uploadFiles(files);
            }
          };

          // ä¸Šä¼ æ–‡ä»¶
          const uploadFiles = (files) => {
            ElMessage.info(`å¼€å§‹ä¸Šä¼  ${files.length} ä¸ªæ–‡ä»¶`);
            // è¿™é‡Œåº”è¯¥å®ç°æ–‡ä»¶ä¸Šä¼ é€»è¾‘
            // æ¨¡æ‹Ÿä¸Šä¼ è¿›åº¦
            setTimeout(() => {
              ElMessage.success("æ–‡ä»¶ä¸Šä¼ æˆåŠŸ");
            }, 2000);
          };

          // å¯¼å‡ºæŠ¥å‘Š
          const handleExport = () => {
            ElMessage.info("å¯¼å‡ºé¡¹ç›®æŠ¥å‘Š");
            // è¿™é‡Œåº”è¯¥è§¦å‘æŠ¥å‘Šå¯¼å‡º
          };

          // åˆ é™¤é¡¹ç›®
          const handleDeleteProject = async () => {
            try {
              await ElMessageBox.confirm(
                "ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚",
                "ç¡®è®¤åˆ é™¤",
                {
                  confirmButtonText: "ç¡®å®š",
                  cancelButtonText: "å–æ¶ˆ",
                  type: "warning",
                }
              );

              ElMessage.success("é¡¹ç›®åˆ é™¤æˆåŠŸ");
              handleBack();
            } catch (error) {
              // ç”¨æˆ·å–æ¶ˆåˆ é™¤
            }
          };

          // ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æ•°æ®
          onMounted(() => {
            console.log("é¡¹ç›®è¯¦æƒ…é¡µé¢åŠ è½½ä¸­...");
            loadProjectDetail();
          });

          return {
            loading,
            project,
            members,
            documents,
            showAddMember,
            searchMemberKeyword,
            searchResults,
            isDragOver,
            fileInput,
            getStatusText,
            handleBack,
            handleEdit,
            searchMembers,
            handleAddMember,
            handleEditMember,
            handleRemoveMember,
            handleDownload,
            handleDeleteDoc,
            triggerUpload,
            handleFileSelect,
            handleDragOver,
            handleDragLeave,
            handleDrop,
            handleExport,
            handleDeleteProject,
          };
        },
      })
        .use(ElementPlus)
        .mount("#app");
    </script>
  </body>
</html>
