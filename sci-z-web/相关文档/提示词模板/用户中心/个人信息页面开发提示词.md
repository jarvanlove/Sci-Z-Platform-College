# 个人信息页面开发提示词

## 📋 页面信息
- **原型图路径**：`原型图/用户中心/个人信息.html`
- **页面类型**：表单页面
- **页面名称**：个人信息
- **主要功能**：个人信息管理、头像上传、表单验证、邮箱/手机验证
- **对应文件路径**：`src/views/User/Profile.vue`

## 🎨 原型图视觉分析

### **整体布局**
- 双栏布局：左侧基本信息表单 + 右侧头像管理
- 背景色：`#f7f9fc`
- 容器：`padding: 20px`，`min-height: calc(100vh - 56px)`
- 页面标题：`font-size: 24px`，`color: #1e3a8a`，`font-weight: 600`

### **左侧基本信息区域**
- 白色卡片：`background: #ffffff`，`border-radius: 8px`，`padding: 20px`
- 表单布局：`max-width: 600px`
- 表单项：`margin-bottom: 20px`
- 标签宽度：`120px`，`font-weight: 500`

### **右侧头像管理区域**
- 头像容器：`width: 120px`，`height: 120px`，`border-radius: 50%`
- 悬停效果：`opacity: 0.8`，`transform: scale(1.05)`
- 上传提示：支持JPG、PNG、GIF格式，最大2MB
- 裁剪对话框：`width: 600px`，预览区域`height: 400px`

### **表单验证样式**
- 只读字段：`background-color: #f3f4f6`，`cursor: not-allowed`
- 成功图标：`color: #16a34a`
- 错误文本：`color: #dc2626`，`font-size: 12px`
- 验证按钮：邮箱/手机验证功能

## 🔧 技术实现要求

### 1. 页面结构
```vue
<template>
  <div class="user-profile-container">
    <!-- 页面标题 -->
    <div class="page-header">
      <h1 class="page-title">{{ $t('user.profile.title') }}</h1>
    </div>

    <!-- 内容区域 -->
    <div class="profile-content">
      <!-- 左侧：基本信息表单 -->
      <BaseCard class="info-card">
        <template #header>
          <div class="card-title">{{ $t('user.profile.basicInfo') }}</div>
        </template>

        <el-form
          ref="formRef"
          :model="userInfo"
          :rules="rules"
          label-width="120px"
          class="profile-form"
        >
          <!-- 用户名 - 只读 -->
          <el-form-item :label="$t('user.profile.username')" prop="username">
            <el-input
              v-model="userInfo.username"
              readonly
              class="readonly-input"
            >
              <template #suffix>
                <el-tooltip :content="$t('user.profile.usernameTip')" placement="top">
                  <el-icon><InfoFilled /></el-icon>
                </el-tooltip>
              </template>
            </el-input>
          </el-form-item>

          <!-- 真实姓名 -->
          <el-form-item :label="$t('user.profile.realName')" prop="realName">
            <el-input
              v-model="userInfo.realName"
              :placeholder="$t('user.profile.realNamePlaceholder')"
              clearable
              @blur="validateField('realName')"
            >
              <template #suffix v-if="validation.realName.success">
                <el-icon class="success-icon"><CircleCheck /></el-icon>
              </template>
            </el-input>
            <div v-if="validation.realName.error" class="error-text">
              {{ validation.realName.message }}
            </div>
          </el-form-item>

          <!-- 邮箱 -->
          <el-form-item :label="$t('user.profile.email')" prop="email">
            <el-input
              v-model="userInfo.email"
              :placeholder="$t('user.profile.emailPlaceholder')"
              clearable
              @blur="validateField('email')"
            >
              <template #suffix v-if="validation.email.success">
                <el-icon class="success-icon"><CircleCheck /></el-icon>
              </template>
              <template #append>
                <el-button
                  :disabled="!userInfo.email || validation.email.error"
                  @click="sendEmailVerification"
                >
                  {{ $t('user.profile.verifyEmail') }}
                </el-button>
              </template>
            </el-input>
            <div v-if="validation.email.error" class="error-text">
              {{ validation.email.message }}
            </div>
            <div v-if="validation.email.loading" class="loading-text">
              <el-icon class="is-loading"><Loading /></el-icon>
              {{ $t('user.profile.validating') }}
            </div>
          </el-form-item>

          <!-- 手机号 -->
          <el-form-item :label="$t('user.profile.phone')" prop="phone">
            <el-input
              v-model="userInfo.phone"
              :placeholder="$t('user.profile.phonePlaceholder')"
              clearable
              maxlength="11"
              @blur="validateField('phone')"
            >
              <template #suffix v-if="validation.phone.success">
                <el-icon class="success-icon"><CircleCheck /></el-icon>
              </template>
              <template #append>
                <el-button
                  :disabled="!userInfo.phone || validation.phone.error"
                  @click="sendSMSVerification"
                >
                  {{ $t('user.profile.verifyPhone') }}
                </el-button>
              </template>
            </el-input>
            <div v-if="validation.phone.error" class="error-text">
              {{ validation.phone.message }}
            </div>
            <div v-if="validation.phone.loading" class="loading-text">
              <el-icon class="is-loading"><Loading /></el-icon>
              {{ $t('user.profile.validating') }}
            </div>
          </el-form-item>

          <!-- 所属部门 -->
          <el-form-item :label="industryConfig.departmentLabel" prop="department">
            <el-select
              v-model="userInfo.department"
              :placeholder="$t('user.profile.selectDepartment')"
              filterable
              clearable
              style="width: 100%"
            >
              <el-option
                v-for="dept in departments"
                :key="dept.value"
                :label="dept.label"
                :value="dept.value"
              />
            </el-select>
          </el-form-item>

          <!-- 职务/职称 -->
          <el-form-item :label="industryConfig.roleLabel" prop="title">
            <el-select
              v-model="userInfo.title"
              :placeholder="$t('user.profile.selectTitle')"
              filterable
              clearable
              style="width: 100%"
            >
              <el-option
                v-for="title in titles"
                :key="title.value"
                :label="title.label"
                :value="title.value"
              />
            </el-select>
          </el-form-item>

          <!-- 表单操作按钮 -->
          <div class="form-actions">
            <BaseButton
              type="primary"
              size="large"
              :loading="saving"
              @click="handleSave"
            >
              {{ $t('user.profile.saveInfo') }}
            </BaseButton>
            <BaseButton size="large" @click="handleReset">
              {{ $t('common.reset') }}
            </BaseButton>
          </div>
        </el-form>
      </BaseCard>

      <!-- 右侧：头像上传 -->
      <BaseCard class="avatar-card">
        <template #header>
          <div class="card-title">{{ $t('user.profile.avatarManagement') }}</div>
        </template>

        <div class="avatar-upload">
          <div class="avatar-container">
            <img
              :src="userInfo.avatar || defaultAvatar"
              class="avatar-display"
              @click="openFileDialog"
            />
            <div class="avatar-overlay" @click="openFileDialog">
              <div class="avatar-overlay-text">
                <el-icon :size="24"><Upload /></el-icon>
                <div>{{ $t('user.profile.clickUpload') }}</div>
              </div>
            </div>
          </div>

          <input
            ref="fileInput"
            type="file"
            accept="image/jpeg,image/png,image/gif"
            style="display: none"
            @change="handleFileSelect"
          />

          <div class="upload-tips">
            <p>{{ $t('user.profile.supportedFormats') }}</p>
            <p>{{ $t('user.profile.maxSize') }}</p>
            <p>{{ $t('user.profile.recommendedSize') }}</p>
          </div>

          <BaseButton type="primary" @click="openFileDialog">
            <el-icon><Upload /></el-icon>
            {{ $t('user.profile.selectImage') }}
          </BaseButton>
        </div>
      </BaseCard>
    </div>

    <!-- 图片裁剪对话框 -->
    <el-dialog
      v-model="showCropDialog"
      :title="$t('user.profile.cropAvatar')"
      width="600px"
      @close="handleCropDialogClose"
    >
      <div class="crop-container">
        <img v-if="cropImageSrc" :src="cropImageSrc" class="crop-preview" />
      </div>
      <template #footer>
        <el-button @click="showCropDialog = false">
          {{ $t('common.cancel') }}
        </el-button>
        <el-button type="primary" @click="handleCropConfirm">
          {{ $t('user.profile.confirmUpload') }}
        </el-button>
      </template>
    </el-dialog>
  </div>
</template>
```

### 2. 核心功能实现
```javascript
<script setup>
import { ref, reactive, onMounted } from 'vue'
import { useI18n } from 'vue-i18n'
import { ElMessage, ElMessageBox } from 'element-plus'
import {
  InfoFilled, CircleCheck, Upload, Loading
} from '@element-plus/icons-vue'
import { BaseCard, BaseButton } from '@/components/Common'
import { getUserInfo, updateUserInfo, uploadAvatar, verifyEmail, verifyPhone } from '@/api/User'
import { validateEmail, validatePhone, validateChineseName } from '@/utils/validate'
import { formatDate } from '@/utils/date'
import { createLogger } from '@/utils/simpleLogger'

const { t } = useI18n()
const logger = createLogger('UserProfile')

// 响应式数据
const formRef = ref()
const fileInput = ref()
const saving = ref(false)
const showCropDialog = ref(false)
const cropImageSrc = ref('')
const defaultAvatar = ref('/images/default-avatar.png')

// 用户信息
const userInfo = reactive({
  username: '',
  realName: '',
  email: '',
  phone: '',
  department: '',
  title: '',
  avatar: ''
})

// 行业配置
const industryConfig = ref({
  industryType: 'education',
  industryName: '教育行业',
  departmentLabel: '所属院系',
  roleLabel: '职称',
  employeeIdLabel: '学工号'
})

// 院系列表
const departments = ref([])

// 职称列表
const titles = ref([])

// 表单验证规则
const rules = {
  realName: [
    { required: true, message: t('user.profile.realNameRequired'), trigger: 'blur' },
    { 
      validator: (rule, value, callback) => {
        if (!validateChineseName(value)) {
          callback(new Error(t('user.profile.realNameFormat')))
        } else {
          callback()
        }
      }, 
      trigger: 'blur' 
    }
  ],
  email: [
    { required: true, message: t('user.profile.emailRequired'), trigger: 'blur' },
    { 
      validator: (rule, value, callback) => {
        if (!validateEmail(value)) {
          callback(new Error(t('user.profile.emailFormat')))
        } else {
          callback()
        }
      }, 
      trigger: 'blur' 
    }
  ],
  phone: [
    { required: true, message: t('user.profile.phoneRequired'), trigger: 'blur' },
    { 
      validator: (rule, value, callback) => {
        if (!validatePhone(value)) {
          callback(new Error(t('user.profile.phoneFormat')))
        } else {
          callback()
        }
      }, 
      trigger: 'blur' 
    }
  ],
  department: [
    {
      required: true,
      message: t('user.profile.departmentRequired'),
      trigger: 'change'
    }
  ]
}

// 验证状态
const validation = reactive({
  realName: { error: false, success: false, message: '' },
  email: {
    error: false,
    success: false,
    message: '',
    loading: false
  },
  phone: {
    error: false,
    success: false,
    message: '',
    loading: false
  }
})

// 模拟数据
const mockDepartments = [
  { label: '计算机科学学院', value: 'computer' },
  { label: '人工智能学院', value: 'ai' },
  { label: '软件学院', value: 'software' },
  { label: '信息工程学院', value: 'information' },
  { label: '数学学院', value: 'math' },
  { label: '物理学院', value: 'physics' }
]

const mockTitles = [
  { label: '教授', value: 'professor' },
  { label: '副教授', value: 'associate_professor' },
  { label: '讲师', value: 'lecturer' },
  { label: '助教', value: 'assistant' },
  { label: '研究员', value: 'researcher' }
]

// 方法
const loadUserInfo = async () => {
  try {
    // TODO: 调用API获取用户信息
    // const response = await getUserInfo()
    // Object.assign(userInfo, response.data)
    
    // 模拟数据
    Object.assign(userInfo, {
      username: 'admin',
      realName: '管理员',
      email: 'admin@university.edu.cn',
      phone: '13800138000',
      department: 'computer',
      title: 'professor',
      avatar: '/images/default-avatar.png'
    })
  } catch (error) {
    ElMessage.error(t('user.profile.loadError'))
  }
}

const loadIndustryConfig = async () => {
  try {
    // TODO: 调用API获取行业配置
    // const response = await getIndustryConfig()
    // industryConfig.value = response.data
    
    // 使用默认配置
    industryConfig.value = {
      industryType: 'education',
      industryName: '教育行业',
      departmentLabel: '所属院系',
      roleLabel: '职称',
      employeeIdLabel: '学工号'
    }
  } catch (error) {
    console.log('Using default education industry configuration')
  }
}

const loadDepartments = async () => {
  try {
    // TODO: 调用API获取部门列表
    // const response = await getDepartments(industryConfig.value.industryType)
    // departments.value = response.data
    
    departments.value = [...mockDepartments]
  } catch (error) {
    departments.value = [...mockDepartments]
  }
}

const loadTitles = async () => {
  try {
    // TODO: 调用API获取职称列表
    // const response = await getTitles(industryConfig.value.industryType)
    // titles.value = response.data
    
    titles.value = [...mockTitles]
  } catch (error) {
    titles.value = [...mockTitles]
  }
}

const validateField = async (field) => {
  validation[field].error = false
  validation[field].success = false
  validation[field].message = ''

  switch (field) {
    case 'realName':
      if (!userInfo.realName) {
        validation.realName.error = true
        validation.realName.message = t('user.profile.realNameRequired')
      } else if (userInfo.realName.length < 2 || userInfo.realName.length > 10) {
        validation.realName.error = true
        validation.realName.message = t('user.profile.realNameLength')
      } else {
        validation.realName.success = true
      }
      break

    case 'email':
      if (!userInfo.email) {
        validation.email.error = true
        validation.email.message = t('user.profile.emailRequired')
      } else if (!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(userInfo.email)) {
        validation.email.error = true
        validation.email.message = t('user.profile.emailFormat')
      } else {
        // 异步验证唯一性
        validation.email.loading = true
        try {
          // TODO: 调用API验证邮箱唯一性
          // await verifyEmailUnique(userInfo.email)
          await new Promise(resolve => setTimeout(resolve, 1000))
          validation.email.loading = false
          validation.email.success = true
        } catch (error) {
          validation.email.loading = false
          validation.email.error = true
          validation.email.message = t('user.profile.emailExists')
        }
      }
      break

    case 'phone':
      if (!userInfo.phone) {
        validation.phone.error = true
        validation.phone.message = t('user.profile.phoneRequired')
      } else if (!/^1[3-9]\d{9}$/.test(userInfo.phone)) {
        validation.phone.error = true
        validation.phone.message = t('user.profile.phoneFormat')
      } else {
        // 异步验证唯一性
        validation.phone.loading = true
        try {
          // TODO: 调用API验证手机唯一性
          // await verifyPhoneUnique(userInfo.phone)
          await new Promise(resolve => setTimeout(resolve, 1000))
          validation.phone.loading = false
          validation.phone.success = true
        } catch (error) {
          validation.phone.loading = false
          validation.phone.error = true
          validation.phone.message = t('user.profile.phoneExists')
        }
      }
      break
  }
}

const sendEmailVerification = async () => {
  try {
    // TODO: 调用API发送邮箱验证
    // await verifyEmail(userInfo.email)
    
    ElMessage.success(t('user.profile.emailSent'))
  } catch (error) {
    ElMessage.error(t('user.profile.emailSendError'))
  }
}

const sendSMSVerification = async () => {
  try {
    // TODO: 调用API发送短信验证
    // await verifyPhone(userInfo.phone)
    
    ElMessage.success(t('user.profile.smsSent'))
  } catch (error) {
    ElMessage.error(t('user.profile.smsSendError'))
  }
}

const openFileDialog = () => {
  fileInput.value.click()
}

const handleFileSelect = (event) => {
  const file = event.target.files[0]
  if (!file) return

  // 验证文件类型
  if (!['image/jpeg', 'image/png', 'image/gif'].includes(file.type)) {
    ElMessage.error(t('user.profile.invalidFormat'))
    return
  }

  // 验证文件大小
  if (file.size > 2 * 1024 * 1024) {
    ElMessage.error(t('user.profile.fileTooLarge'))
    return
  }

  // 读取文件并显示预览
  const reader = new FileReader()
  reader.onload = (e) => {
    cropImageSrc.value = e.target.result
    showCropDialog.value = true
  }
  reader.readAsDataURL(file)
}

const handleCropDialogClose = () => {
  cropImageSrc.value = ''
  fileInput.value.value = ''
}

const handleCropConfirm = async () => {
  try {
    // TODO: 调用API上传头像
    // const response = await uploadAvatar(cropImageSrc.value)
    // userInfo.avatar = response.data.avatarUrl
    
    // 模拟上传
    userInfo.avatar = cropImageSrc.value
    ElMessage.success(t('user.profile.avatarUploadSuccess'))
    showCropDialog.value = false
    cropImageSrc.value = ''
    fileInput.value.value = ''
  } catch (error) {
    ElMessage.error(t('user.profile.avatarUploadError'))
  }
}

const handleSave = async () => {
  try {
    await formRef.value.validate()

    await ElMessageBox.confirm(
      t('user.profile.saveConfirm'),
      t('user.profile.saveTitle'),
      {
        confirmButtonText: t('common.confirm'),
        cancelButtonText: t('common.cancel'),
        type: 'warning'
      }
    )

    saving.value = true
    
    // TODO: 调用API保存用户信息
    // await updateUserInfo(userInfo)
    
    // 模拟保存
    await new Promise(resolve => setTimeout(resolve, 1000))
    ElMessage.success(t('user.profile.saveSuccess'))
    saving.value = false
  } catch (error) {
    if (error !== 'cancel') {
      ElMessage.error(t('user.profile.saveError'))
    }
    saving.value = false
  }
}

const handleReset = () => {
  ElMessageBox.confirm(
    t('user.profile.resetConfirm'),
    t('user.profile.resetTitle'),
    {
      confirmButtonText: t('common.confirm'),
      cancelButtonText: t('common.cancel'),
      type: 'warning'
    }
  )
    .then(() => {
      formRef.value.resetFields()
      Object.keys(validation).forEach((key) => {
        validation[key].error = false
        validation[key].success = false
        validation[key].message = ''
      })
      ElMessage.info(t('user.profile.resetSuccess'))
    })
    .catch(() => {
      // 用户取消
    })
}

onMounted(async () => {
  await loadIndustryConfig()
  await loadDepartments()
  await loadTitles()
  await loadUserInfo()
})
</script>
```

### 3. 样式实现
```scss
<style lang="scss" scoped>
.user-profile-container {
  padding: 20px;
  background: #f7f9fc;
  min-height: calc(100vh - 56px);
}

.page-header {
  margin-bottom: 20px;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0;
}

.profile-content {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 20px;
}

.info-card,
.avatar-card {
  background: #ffffff;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  border: 1px solid #e5e7eb;
}

.card-title {
  font-size: 16px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 1px solid #e5e7eb;
}

.profile-form {
  max-width: 600px;
}

.readonly-input {
  background-color: #f3f4f6 !important;
  cursor: not-allowed;
}

.success-icon {
  color: #16a34a;
  margin-left: 8px;
}

.error-text {
  color: #dc2626;
  font-size: 12px;
  margin-top: 4px;
}

.loading-text {
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.form-actions {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin-top: 32px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

/* 头像上传区域 */
.avatar-upload {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.avatar-container {
  position: relative;
  width: 120px;
  height: 120px;
}

.avatar-display {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 2px solid #1e3a8a;
  object-fit: cover;
  cursor: pointer;
  transition: all 0.3s;
}

.avatar-display:hover {
  opacity: 0.8;
  transform: scale(1.05);
}

.avatar-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s;
  cursor: pointer;
}

.avatar-container:hover .avatar-overlay {
  opacity: 1;
}

.avatar-overlay-text {
  color: #ffffff;
  font-size: 14px;
  text-align: center;
}

.upload-tips {
  text-align: center;
  color: #6b7280;
  font-size: 12px;
  line-height: 1.6;
}

.upload-tips p {
  margin: 4px 0;
}

/* 图片裁剪预览 */
.crop-container {
  width: 100%;
  height: 400px;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  overflow: hidden;
}

.crop-preview {
  max-width: 100%;
  max-height: 100%;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .profile-content {
    grid-template-columns: 1fr;
  }
  
  .user-profile-container {
    padding: 16px;
  }
  
  .form-actions {
    flex-direction: column;
    align-items: center;
  }
}
</style>
```

## ⚠️ 重要注意事项

1. **双栏布局**：左侧表单 + 右侧头像管理
2. **表单验证**：实时验证、异步唯一性检查、成功/错误状态显示
3. **头像上传**：文件类型验证、大小限制、裁剪预览
4. **行业配置**：支持不同行业的部门/职称配置
5. **验证功能**：邮箱/手机验证码发送
6. **响应式设计**：移动端单栏布局
7. **国际化支持**：所有文本使用$t()函数
8. **Mock数据**：包含TODO注释，便于后端集成

**最终要求：生成的代码必须与原型图的视觉效果和交互逻辑完全一致！**
