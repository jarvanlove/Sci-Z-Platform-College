# 报告列表页面开发提示词

## 📋 页面信息
- **原型图路径**：`原型图/验收模块/报告列表.html`
- **页面类型**：列表页面
- **页面名称**：报告列表
- **主要功能**：报告列表展示、搜索筛选、报告操作（预览、下载、重新生成、删除）
- **对应文件路径**：`src/views/Report/List.vue`

## 🎨 原型图视觉分析

### **整体布局**
- 背景色：`#f7f9fc`
- 容器：`padding: 20px`，`min-height: calc(100vh - 56px)`
- 页面标题：`font-size: 24px`，`color: #1e3a8a`，`font-weight: 600`

### **搜索筛选区域**
- 白色卡片：`background: #ffffff`，`border-radius: 8px`，`padding: 20px`
- 搜索表单：`display: flex`，`gap: 16px`，`align-items: end`
- 关键词搜索：`width: 300px`，带搜索图标
- 报告类型筛选：`width: 150px`
- 时间筛选：`width: 240px`，日期范围选择器

### **报告卡片设计**
- 网格布局：`grid-template-columns: repeat(auto-fill, minmax(350px, 1fr))`，`gap: 20px`
- 卡片样式：`background: #ffffff`，`border-radius: 8px`，`padding: 20px`
- 悬停效果：`box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15)`，`transform: translateY(-2px)`
- 选中状态：`border-color: #1e3a8a`，`box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.2)`

### **卡片内容结构**
- 报告类型标签：`display: inline-flex`，`padding: 4px 8px`，`border-radius: 4px`
- 项目名称：`font-size: 16px`，`font-weight: 600`，`color: #111827`
- 报告摘要：`font-size: 14px`，`color: #6b7280`，`line-height: 1.6`，`-webkit-line-clamp: 2`
- 元数据网格：`grid-template-columns: repeat(3, 1fr)`，`gap: 12px`
- 操作按钮：`display: flex`，`gap: 8px`，`flex: 1`

## 🔧 技术实现要求

### 1. 页面结构
```vue
<template>
  <div class="report-list-container">
    <!-- 页面头部 -->
    <div class="page-header">
      <h1 class="page-title">{{ $t('report.list.title') }}</h1>
      <div class="header-actions">
        <el-button type="primary" size="large" @click="handleGenerate">
          <el-icon><Plus /></el-icon>
          {{ $t('report.list.generateNew') }}
        </el-button>
      </div>
    </div>

    <!-- 搜索筛选区域 -->
    <BaseCard class="search-card">
      <el-form :model="searchForm" class="search-form" label-width="100px">
        <el-form-item :label="$t('report.list.keywordSearch')">
          <el-input
            v-model="searchForm.keyword"
            :placeholder="$t('report.list.keywordPlaceholder')"
            clearable
            style="width: 300px"
            @keyup.enter="handleSearch"
          >
            <template #prefix>
              <el-icon><Search /></el-icon>
            </template>
          </el-input>
        </el-form-item>
        
        <el-form-item :label="$t('report.list.reportType')">
          <el-select
            v-model="searchForm.reportType"
            :placeholder="$t('common.all')"
            clearable
            style="width: 150px"
            @change="handleFilterChange"
          >
            <el-option
              v-for="option in reportTypeOptions"
              :key="option.value"
              :label="option.label"
              :value="option.value"
            />
          </el-select>
        </el-form-item>
        
        <el-form-item :label="$t('report.list.dateRange')">
          <el-date-picker
            v-model="searchForm.dateRange"
            type="daterange"
            :range-separator="$t('common.to')"
            :start-placeholder="$t('common.startDate')"
            :end-placeholder="$t('common.endDate')"
            style="width: 240px"
            format="YYYY-MM-DD"
            value-format="YYYY-MM-DD"
            @change="handleDateChange"
          />
        </el-form-item>
      </el-form>

      <!-- 按钮行 -->
      <div class="search-actions">
        <el-button type="primary" @click="handleSearch">
          <el-icon><Search /></el-icon>
          {{ $t('common.search') }}
        </el-button>
        <el-button @click="handleReset">
          <el-icon><Refresh /></el-icon>
          {{ $t('common.reset') }}
        </el-button>
      </div>
    </BaseCard>

    <!-- 报告列表 -->
    <BaseCard class="table-card">
      <!-- 加载状态 -->
      <div v-if="loading" class="loading-container">
        <el-icon class="is-loading"><Loading /></el-icon>
        <span>{{ $t('common.loading') }}</span>
      </div>

      <!-- 报告统计 -->
      <div v-if="!loading" class="result-count-bar">
        {{ $t('report.list.totalCount', { count: pagination.total }) }}
      </div>

      <!-- 卡片视图 -->
      <div v-if="!loading" class="card-grid">
        <div
          v-for="report in filteredReports"
          :key="report.id"
          class="report-card"
          :class="{ selected: selectedReports.includes(report.id) }"
          @click="toggleSelection(report.id)"
        >
          <div class="card-header">
            <div class="report-type-tag" :class="report.type">
              <span>{{ report.type === 'tech' ? '📄' : '📊' }}</span>
              {{ report.typeText }}
            </div>
          </div>

          <div class="card-content">
            <h3 class="project-name">{{ report.projectName }}</h3>
            <p class="report-summary">{{ report.summary }}</p>
          </div>

          <div class="card-meta">
            <div class="meta-item">
              <p class="meta-value">{{ formatDate(report.createdAt) }}</p>
              <p class="meta-label">{{ $t('report.list.generateTime') }}</p>
            </div>
            <div class="meta-item">
              <p class="meta-value">{{ report.wordCount }}</p>
              <p class="meta-label">{{ $t('report.list.wordCount') }}</p>
            </div>
            <div class="meta-item">
              <p class="meta-value">{{ report.refDocsCount }}</p>
              <p class="meta-label">{{ $t('report.list.refDocsCount') }}</p>
            </div>
          </div>

          <div class="card-actions" @click.stop>
            <el-button size="small" @click="handlePreview(report)">
              {{ $t('common.preview') }}
            </el-button>
            <el-dropdown @command="(format) => handleDownload(report, format)" trigger="click">
              <el-button size="small" type="primary">
                {{ $t('common.download') }}
                <el-icon class="el-icon--right"><ArrowDown /></el-icon>
              </el-button>
              <template #dropdown>
                <el-dropdown-menu>
                  <el-dropdown-item command="pdf">PDF</el-dropdown-item>
                  <el-dropdown-item command="word">Word</el-dropdown-item>
                  <el-dropdown-item command="markdown">Markdown</el-dropdown-item>
                </el-dropdown-menu>
              </template>
            </el-dropdown>
            <el-button size="small" type="primary" @click="handleRegenerate(report)">
              {{ $t('report.list.regenerate') }}
            </el-button>
            <el-button size="small" type="danger" @click="handleDelete(report)">
              {{ $t('common.delete') }}
            </el-button>
          </div>
        </div>
      </div>

      <!-- 空状态 -->
      <div v-if="!loading && reports.length === 0" class="empty-state">
        <div class="empty-state-icon">📄</div>
        <div class="empty-state-text">{{ $t('report.list.noReports') }}</div>
        <div class="empty-state-hint">{{ $t('report.list.generateHint') }}</div>
        <el-button type="primary" @click="handleGenerate" class="empty-action">
          <el-icon><Plus /></el-icon>
          {{ $t('report.list.generateNew') }}
        </el-button>
      </div>

      <!-- 分页 -->
      <BasePagination
        v-if="reports.length > 0"
        :current="pagination.current"
        :size="pagination.size"
        :total="pagination.total"
        @change="handlePageChange"
        @size-change="handlePageSizeChange"
      />
    </BaseCard>
  </div>
</template>
```

### 2. 核心功能实现
```javascript
<script setup>
import { ref, reactive, onMounted, computed } from 'vue'
import { useRouter } from 'vue-router'
import { useI18n } from 'vue-i18n'
import { ElMessage, ElMessageBox } from 'element-plus'
import { Plus, Search, Refresh, Loading, ArrowDown } from '@element-plus/icons-vue'
import { BaseCard, BasePagination } from '@/components/Common'
import { getReportList, deleteReport, regenerateReport } from '@/api/Report'
import { formatDate } from '@/utils/date'
import { STATUS_CONFIG } from '@/utils/constants'
import { createLogger } from '@/utils/simpleLogger'

const router = useRouter()
const { t } = useI18n()
const logger = createLogger('ReportList')

// 响应式数据
const loading = ref(false)
const reports = ref([])
const selectedReports = ref([])

// 搜索表单
const searchForm = reactive({
  keyword: '',
  reportType: '',
  dateRange: []
})

// 分页
const pagination = reactive({
  current: 1,
  size: 10,
  total: 0
})

// 报告类型选项
const reportTypeOptions = ref([
  { label: t('common.all'), value: '' },
  { label: t('report.types.tech'), value: 'tech' },
  { label: t('report.types.self'), value: 'self' }
])

// 模拟数据（后端开发完成后删除）
// const mockReports = [
//   {
//     id: '1',
//     projectName: '基于深度学习的图像识别技术研究',
//     projectCode: 'AI2024001',
//     type: 'tech',
//     typeText: '科技报告',
//     summary: '本项目通过深度学习算法，实现了高精度的图像识别技术...',
//     createdAt: new Date('2024-03-15'),
//     wordCount: '8,500',
//     refDocsCount: 45,
//     content: '<h2>项目概述</h2><p>...</p>'
//   },
//   {
//     id: '2',
//     projectName: '智能物联网系统关键技术研发',
//     projectCode: 'IOT2024002',
//     type: 'self',
//     typeText: '自评报告',
//     summary: '项目在物联网系统架构设计、数据传输优化...',
//     createdAt: new Date('2024-03-10'),
//     wordCount: '7,200',
//     refDocsCount: 32,
//     content: '<h2>项目执行情况</h2><p>...</p>'
//   }
// ]

// 计算属性
const filteredReports = computed(() => {
  let filtered = [...reports.value]

  // 关键词筛选
  if (searchForm.keyword) {
    const keyword = searchForm.keyword.toLowerCase()
    filtered = filtered.filter(
      report => 
        report.projectName.toLowerCase().includes(keyword) ||
        report.summary.toLowerCase().includes(keyword)
    )
  }

  // 报告类型筛选
  if (searchForm.reportType) {
    filtered = filtered.filter(report => report.type === searchForm.reportType)
  }

  // 时间筛选
  if (searchForm.dateRange && searchForm.dateRange.length === 2) {
    const [startDate, endDate] = searchForm.dateRange
    const start = new Date(startDate)
    const end = new Date(endDate)
    end.setHours(23, 59, 59, 999)

    filtered = filtered.filter(
      report => report.createdAt >= start && report.createdAt <= end
    )
  }

  // 更新分页总数
  pagination.total = filtered.length

  // 分页处理
  const start = (pagination.current - 1) * pagination.size
  const end = start + pagination.size
  return filtered.slice(start, end)
})

// 方法
const loadReports = async () => {
  loading.value = true
  try {
    // TODO: 替换为真实API调用
    // const { data } = await getReportList({
    //   page: pagination.current,
    //   size: pagination.size,
    //   keyword: searchForm.keyword,
    //   reportType: searchForm.reportType,
    //   startDate: searchForm.dateRange?.[0],
    //   endDate: searchForm.dateRange?.[1]
    // })
    // reports.value = data.list
    // pagination.total = data.total

    // 临时模拟（后端完成后移除）
    // await new Promise(resolve => setTimeout(resolve, 600))
    // reports.value = [...mockReports]
    // pagination.total = reports.value.length
  } catch (error) {
    ElMessage.error(t('report.list.loadError'))
  } finally {
    loading.value = false
  }
}

const handleGenerate = () => {
  router.push('/report/generate')
}

const handleSearch = () => {
  pagination.current = 1
  loadReports()
  ElMessage.success(t('common.searchComplete'))
}

const handleFilterChange = () => {
  pagination.current = 1
  loadReports()
}

const handleDateChange = () => {
  pagination.current = 1
  loadReports()
}

const handleReset = () => {
  searchForm.keyword = ''
  searchForm.reportType = ''
  searchForm.dateRange = []
  pagination.current = 1
  loadReports()
  ElMessage.info(t('common.resetComplete'))
}

const handlePageChange = (page) => {
  pagination.current = page
  loadReports()
}

const handlePageSizeChange = (size) => {
  pagination.size = size
  pagination.current = 1
  loadReports()
}

const toggleSelection = (reportId) => {
  const index = selectedReports.value.indexOf(reportId)
  if (index > -1) {
    selectedReports.value.splice(index, 1)
  } else {
    selectedReports.value.push(reportId)
  }
}

const handlePreview = (report) => {
  ElMessage.info(t('report.list.previewHint', { name: report.projectName }))
  // TODO: 实现预览功能（后端接口：获取报告内容/预览链接）
}

const handleDownload = async (report, format) => {
  ElMessage.info(t('report.list.downloading', { 
    name: report.projectName, 
    format: format.toUpperCase() 
  }))
  
  try {
    // TODO: 实现下载功能（后端接口：导出指定格式报告）
    // await downloadReport(report.id, format)
    ElMessage.success(t('report.list.downloadSuccess', { format: format.toUpperCase() }))
  } catch (error) {
    ElMessage.error(t('report.list.downloadError'))
  }
}

const handleRegenerate = async (report) => {
  try {
    await ElMessageBox.confirm(
      t('report.list.regenerateConfirm'),
      t('report.list.regenerateTitle'),
      {
        confirmButtonText: t('common.confirm'),
        cancelButtonText: t('common.cancel'),
        type: 'warning'
      }
    )

    ElMessage.success(t('report.list.regenerateStart'))
    // TODO: 实现重新生成功能（后端接口：触发报告重新生成）
    // await regenerateReport(report.id)
  } catch (error) {
    // 用户取消
  }
}

const handleDelete = async (report) => {
  try {
    await ElMessageBox.confirm(
      t('report.list.deleteConfirm', { 
        name: report.projectName,
        type: report.typeText 
      }),
      t('report.list.deleteTitle'),
      {
        confirmButtonText: t('common.confirm'),
        cancelButtonText: t('common.cancel'),
        type: 'warning'
      }
    )

    // TODO: 实现删除功能（后端接口：删除报告记录）
    // await deleteReport(report.id)
    
    const index = reports.value.findIndex(r => r.id === report.id)
    if (index > -1) {
      reports.value.splice(index, 1)
      ElMessage.success(t('report.list.deleteSuccess'))
    }
  } catch (error) {
    // 用户取消
  }
}

// 工具函数
const formatDate = (date) => {
  return date.toLocaleDateString('zh-CN')
}

onMounted(() => {
  loadReports()
})
</script>
```

### 3. 样式实现
```scss
<style lang="scss" scoped>
.report-list-container {
  padding: 20px;
  background: #f7f9fc;
  min-height: calc(100vh - 56px);
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.search-card {
  margin-bottom: 20px;
}

.search-form {
  display: flex;
  gap: 16px;
  align-items: end;
  
  :deep(.el-form-item) {
    margin-bottom: 0;
  }
}

.search-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 16px;
  gap: 8px;
}

.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: #6b7280;
  font-size: 14px;
  
  .el-icon {
    margin-right: 8px;
    font-size: 16px;
  }
}

.result-count-bar {
  font-size: 14px;
  color: #6b7280;
  margin-bottom: 20px;
  padding: 12px 0;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 20px;
  margin-bottom: 24px;
}

.report-card {
  background: #ffffff;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  border: 1px solid #e5e7eb;
  transition: all 0.2s;
  cursor: pointer;
  position: relative;

  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
  }

  &.selected {
    border-color: #1e3a8a;
    box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.2);
  }
}

.card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 16px;
}

.report-type-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;

  &.tech {
    background: #dbeafe;
    color: #1e40af;
  }

  &.self {
    background: #e0f2fe;
    color: #0369a1;
  }
}

.card-content {
  margin-bottom: 16px;
}

.project-name {
  font-size: 16px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 8px 0;
  line-height: 1.4;
}

.report-summary {
  font-size: 14px;
  color: #6b7280;
  line-height: 1.6;
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-meta {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 16px;
  padding: 12px 0;
  border-top: 1px solid #f3f4f6;
  border-bottom: 1px solid #f3f4f6;
}

.meta-item {
  text-align: center;
}

.meta-value {
  font-size: 16px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0 0 2px 0;
}

.meta-label {
  font-size: 12px;
  color: #9ca3af;
  margin: 0;
}

.card-actions {
  display: flex;
  gap: 8px;
  
  .el-button {
    flex: 1;
    font-size: 12px;
  }
}

.empty-state {
  text-align: center;
  padding: 80px 20px;
  background: #ffffff;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.empty-state-icon {
  font-size: 64px;
  color: #d1d5db;
  margin-bottom: 20px;
}

.empty-state-text {
  font-size: 18px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 8px 0;
}

.empty-state-hint {
  font-size: 14px;
  color: #9ca3af;
  margin: 0 0 24px 0;
}

.empty-action {
  background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
  color: #ffffff;
  border: none;
  border-radius: 8px;
  padding: 12px 24px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 8px rgba(30, 58, 138, 0.3);
  display: inline-flex;
  align-items: center;
  gap: 8px;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(30, 58, 138, 0.4);
  }
}

// 响应式设计
@media (max-width: 1200px) {
  .card-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
}

@media (max-width: 768px) {
  .report-list-container {
    padding: 16px;
  }

  .page-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }

  .header-actions {
    width: 100%;
    justify-content: flex-end;
  }

  .search-form {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
  }

  .card-grid {
    grid-template-columns: 1fr;
  }

  .card-meta {
    grid-template-columns: 1fr;
    text-align: left;
  }

  .card-actions {
    flex-direction: column;
  }
}
</style>
```

## ⚠️ 重要注意事项

1. **卡片布局**：使用CSS Grid实现响应式卡片布局，支持不同屏幕尺寸
2. **搜索筛选**：支持关键词、报告类型、时间范围的多维度筛选
3. **报告操作**：预览、下载（多格式）、重新生成、删除等完整操作
4. **选择功能**：支持单选和多选报告，为批量操作做准备
5. **空状态**：提供友好的空状态提示和引导操作
6. **分页功能**：使用BasePagination组件实现分页
7. **响应式设计**：移动端适配，确保良好的用户体验
8. **国际化支持**：所有文本使用$t()函数
9. **Mock数据**：包含TODO注释，便于后端集成

**最终要求：生成的代码必须与原型图的视觉效果和交互逻辑完全一致！**
