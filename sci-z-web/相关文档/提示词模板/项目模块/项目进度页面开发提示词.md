# 项目进度页面开发提示词

## 📋 页面信息
- **原型图路径**：`原型图/项目模块/项目进度.html`
- **页面类型**：详情页面
- **页面名称**：项目进度
- **主要功能**：项目进度概览、里程碑时间轴、进度统计、进度可视化
- **对应文件路径**：`src/views/Project/Progress.vue`

## 🎨 原型图视觉分析

### **整体布局**
- 背景色：`#f7f9fc`
- 容器：`padding: 20px`，`min-height: calc(100vh - 56px)`
- 页面标题：`font-size: 24px`，`color: #1e3a8a`，`font-weight: 600`

### **项目概览卡片设计**
- 白色卡片：`background: #ffffff`，`border-radius: 8px`，`padding: 20px`
- 阴影效果：`box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04)`
- 边框：`border: 1px solid #e5e7eb`
- 三列网格布局：`grid-template-columns: 1fr 1fr 1fr`，`gap: 20px`

### **进度统计设计**
- 信息区域：`background: #f8fafc`，`border-radius: 8px`，`padding: 16px`
- 统计卡片：`background: #ffffff`，`border-radius: 6px`，`border: 1px solid #e5e7eb`
- 数字显示：`font-size: 24px`，`font-weight: 700`
- 不同状态不同颜色：
  - 已完成：`#16a34a`
  - 进行中：`#f59e0b`
  - 未开始：`#2563eb`
  - 已延期：`#dc2626`

### **整体进度设计**
- 大号进度百分比：`font-size: 36px`，`font-weight: 700`，`color: #1e3a8a`
- 进度条：`height: 12px`，`background: #e5e7eb`，`border-radius: 6px`
- 进度填充：`background: linear-gradient(90deg, #1e3a8a 0%, #0ea5e9 100%)`
- 时间信息：`font-size: 12px`，`color: #6b7280`

### **时间轴设计**
- 时间轴容器：`padding-left: 24px`
- 时间轴线：`width: 2px`，`background: #e5e7eb`
- 时间轴点：`width: 12px`，`height: 12px`，`border-radius: 50%`
- 时间轴内容：`background: #ffffff`，`border-radius: 8px`，`padding: 16px`
- 不同状态不同颜色：
  - 已完成：`#16a34a`
  - 进行中：`#f59e0b`
  - 未开始：`#2563eb`
  - 已延期：`#dc2626`

## 🔧 技术实现要求

### 1. 页面结构
```vue
<template>
  <div class="project-progress-container">
    <!-- 页面头部 -->
    <div class="page-header">
      <div class="header-left">
        <el-button @click="handleBack">
          <el-icon><ArrowLeft /></el-icon>
          {{ $t('common.back') }}
        </el-button>
        <h1 class="page-title">{{ $t('project.progress.title') }}</h1>
      </div>
    </div>

    <!-- 加载状态 -->
    <div v-if="loading" class="loading-container">
      <el-icon class="is-loading"><Loading /></el-icon>
      <span>{{ $t('common.loading') }}</span>
    </div>

    <!-- 主要内容 -->
    <div v-else>
      <!-- 项目概览 -->
      <div class="card overview-card">
        <div class="card-header">
          <h2 class="card-title">{{ $t('project.progress.overview') }}</h2>
        </div>

        <div class="overview-grid">
          <!-- 项目基本信息 -->
          <div class="info-section">
            <h3 class="section-title">{{ $t('project.progress.projectInfo') }}</h3>
            <div class="info-list">
              <div class="info-item">
                <span class="info-label">{{ $t('project.progress.name') }}：</span>
                <span class="info-value">{{ projectInfo.name }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">{{ $t('project.progress.number') }}：</span>
                <span class="info-value">{{ projectInfo.number }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">{{ $t('project.progress.manager') }}：</span>
                <span class="info-value">{{ projectInfo.manager }}</span>
              </div>
              <div class="info-item">
                <span class="info-label">{{ $t('project.progress.status') }}：</span>
                <el-tag :type="getStatusTagType(projectInfo.status)" size="small" round>
                  {{ getStatusText(projectInfo.status) }}
                </el-tag>
              </div>
            </div>
          </div>

          <!-- 进度统计 -->
          <div class="info-section">
            <h3 class="section-title">{{ $t('project.progress.progressStats') }}</h3>
            <div class="stats-grid">
              <div class="stat-card stat-completed">
                <div class="stat-number">{{ stats.completed }}</div>
                <div class="stat-label">{{ $t('project.progress.completed') }}</div>
              </div>
              <div class="stat-card stat-progress">
                <div class="stat-number">{{ stats.progress }}</div>
                <div class="stat-label">{{ $t('project.progress.inProgress') }}</div>
              </div>
              <div class="stat-card stat-planned">
                <div class="stat-number">{{ stats.planned }}</div>
                <div class="stat-label">{{ $t('project.progress.planned') }}</div>
              </div>
              <div class="stat-card stat-delayed">
                <div class="stat-number">{{ stats.delayed }}</div>
                <div class="stat-label">{{ $t('project.progress.delayed') }}</div>
              </div>
            </div>
          </div>

          <!-- 整体进度 -->
          <div class="info-section">
            <h3 class="section-title">{{ $t('project.progress.overallProgress') }}</h3>
            <div class="progress-display">
              <div class="progress-percentage">{{ overallProgress }}%</div>
              <div class="progress-bar-large">
                <div
                  class="progress-fill-large"
                  :style="{ width: overallProgress + '%' }"
                ></div>
              </div>
              <div class="progress-time">
                <div>{{ $t('project.progress.startTime') }}：{{ projectStartTime }}</div>
                <div>{{ $t('project.progress.endTime') }}：{{ projectEndTime }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 时间轴视图 -->
      <div class="card timeline-card">
        <div class="card-header">
          <h2 class="card-title">{{ $t('project.progress.timeline') }}</h2>
        </div>

        <div v-if="milestones.length > 0" class="timeline-container">
          <div class="timeline-line"></div>
          <div v-for="milestone in milestones" :key="milestone.id" class="timeline-item">
            <div :class="`timeline-dot ${milestone.status}`"></div>
            <div class="timeline-content">
              <div class="timeline-title">{{ milestone.name }}</div>
              <div class="timeline-time">
                {{ milestone.startTime }} - {{ milestone.endTime }}
              </div>
              <div class="timeline-description">
                {{ milestone.description }}
              </div>
              <div class="timeline-progress">
                <div class="milestone-progress-container">
                  <div class="milestone-progress-bar">
                    <div
                      :class="`milestone-progress-fill ${milestone.status}`"
                      :style="{ width: milestone.progress + '%' }"
                    ></div>
                  </div>
                  <span class="milestone-progress-text">{{ milestone.progress }}%</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 空状态 -->
        <div v-else class="empty-state">
          <div class="empty-state-icon">📅</div>
          <div class="empty-state-text">{{ $t('project.progress.noTimeline') }}</div>
          <div class="empty-state-hint">{{ $t('project.progress.timelineHint') }}</div>
        </div>
      </div>
    </div>
  </div>
</template>
```

### 2. 核心功能实现
```javascript
<script setup>
import { ref, reactive, onMounted, computed } from 'vue'
import { useRouter, useRoute } from 'vue-router'
import { useI18n } from 'vue-i18n'
import { ElMessage } from 'element-plus'
import { ArrowLeft, Loading } from '@element-plus/icons-vue'
import { formatDate } from '@/utils/date'
import { PROJECT_STATUS_CONFIG, MILESTONE_STATUS_CONFIG } from '@/utils/constants'
import { createLogger } from '@/utils/simpleLogger'

const router = useRouter()
const route = useRoute()
const { t } = useI18n()
const logger = createLogger('ProjectProgress')

// 响应式数据
const loading = ref(false)
const milestones = ref([])
const overallProgress = ref(0)
const projectStartTime = ref('')
const projectEndTime = ref('')

const stats = ref({
  completed: 0,
  progress: 0,
  planned: 0,
  delayed: 0
})

// 项目信息（通过接口获取）
const projectInfo = ref({
  name: '',
  number: '',
  manager: '',
  status: 'progress'
})


// 获取状态文本
const getStatusText = (status) => {
  return PROJECT_STATUS_CONFIG[status]?.text || '未知'
}

// 获取状态标签类型
const getStatusTagType = (status) => {
  return PROJECT_STATUS_CONFIG[status]?.type || 'info'
}

// 加载项目进度数据
const loadProjectProgress = async (projectId) => {
  try {
    loading.value = true
    logger.info('Loading project progress', { projectId })
    
    // TODO: 替换为实际的后端接口
    // const response = await getProjectProgress(projectId)
    // const data = response.data
    // 
    // projectInfo.value = {
    //   name: data.projectName,
    //   number: data.projectNumber,
    //   manager: data.manager,
    //   status: data.status
    // }
    // 
    // overallProgress.value = data.overallProgress
    // projectStartTime.value = data.startTime
    // projectEndTime.value = data.endTime
    // milestones.value = data.milestones
    // stats.value = data.stats
    
    // 临时模拟数据（后端开发完成后删除）
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    const mockData = {
      projectName: '基于人工智能的智能诊断系统研究',
      projectNumber: 'PRJ-2024-001',
      manager: '张教授',
      status: 'progress',
      overallProgress: 55,
      startTime: '2024-01-15',
      endTime: '2024-06-30',
      milestones: [
        {
          id: 1,
          name: '项目启动：建设方案通过审核并备案',
          description: '项目启动阶段，完成建设方案的制定、审核和备案工作，确保项目合法合规进行',
          startTime: '2024-01-15',
          endTime: '2024-01-31',
          status: 'completed',
          progress: 100
        },
        {
          id: 2,
          name: '任务分解与资源准备：项目任务书下达，资源配置完成，进入实施阶段',
          description: '完成项目任务分解，下达项目任务书，完成人员、设备等资源配置，正式进入项目实施阶段',
          startTime: '2024-02-01',
          endTime: '2024-02-15',
          status: 'completed',
          progress: 100
        },
        {
          id: 3,
          name: '项目实施与过程管理：中期检查',
          description: '项目实施阶段，进行中期检查，评估项目进展，确保项目按计划推进',
          startTime: '2024-02-16',
          endTime: '2024-04-15',
          status: 'progress',
          progress: 75
        },
        {
          id: 4,
          name: '成果整合与结题准备：结题验收',
          description: '整合项目成果，准备结题材料，进行项目结题验收工作',
          startTime: '2024-04-16',
          endTime: '2024-05-31',
          status: 'planned',
          progress: 0
        },
        {
          id: 5,
          name: '后续管理与成果转化：项目归档完成，成果转化',
          description: '完成项目归档工作，推进成果转化应用，确保项目价值的最大化实现',
          startTime: '2024-06-01',
          endTime: '2024-06-30',
          status: 'planned',
          progress: 0
        }
      ],
      stats: {
        completed: 2,
        progress: 1,
        planned: 2,
        delayed: 0
      }
    }
    
    projectInfo.value = {
      name: mockData.projectName,
      number: mockData.projectNumber,
      manager: mockData.manager,
      status: mockData.status
    }
    
    overallProgress.value = mockData.overallProgress
    projectStartTime.value = mockData.startTime
    projectEndTime.value = mockData.endTime
    milestones.value = mockData.milestones
    stats.value = mockData.stats
    
    logger.info('Project progress loaded successfully', { 
      projectId, 
      progress: overallProgress.value,
      milestonesCount: milestones.value.length 
    })
  } catch (error) {
    logger.error('Failed to load project progress', error)
    ElMessage.error(t('project.progress.loadError'))
  } finally {
    loading.value = false
  }
}

// 统计数据现在由后端接口直接提供，无需前端计算

// 解析URL参数获取项目ID
const getProjectIdFromURL = () => {
  const params = new URLSearchParams(window.location.search)
  return params.get('id')
}

// 监听iframe消息
const handleIframeMessage = (event) => {
  if (
    event.data &&
    event.data.type === 'navigate' &&
    event.data.path === 'project/progress'
  ) {
    const projectId = event.data.params?.id
    if (projectId) {
      loadProjectProgress(projectId)
    }
  }
}

// 里程碑数据现在通过loadProjectProgress函数从接口获取

// 返回列表页
const handleBack = () => {
  router.push('/project/list')
}

// 组件挂载时加载数据
onMounted(() => {
  // 监听iframe消息
  window.addEventListener('message', handleIframeMessage)

  // 获取项目ID
  const projectId = getProjectIdFromURL()
  
  if (projectId) {
    // 有项目ID，加载项目进度数据
    loadProjectProgress(projectId)
  } else {
    // 没有项目ID，显示错误或默认数据
    logger.warn('No project ID found in URL parameters')
    ElMessage.warning(t('project.progress.noProjectId'))
  }
})
</script>
```

### 3. 样式实现
```scss
<style lang="scss" scoped>
.project-progress-container {
  padding: 20px;
  background: #f7f9fc;
  min-height: calc(100vh - 56px);
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0;
}

.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  gap: 8px;
  color: #6b7280;
}

.card {
  background: #ffffff;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  border: 1px solid #e5e7eb;
  margin-bottom: 20px;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid #e5e7eb;
}

.card-title {
  font-size: 16px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.overview-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 20px;
}

.info-section {
  padding: 16px;
  background: #f8fafc;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.section-title {
  font-size: 16px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 12px;
}

.info-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.info-label {
  color: #6b7280;
  font-size: 14px;
}

.info-value {
  color: #111827;
  font-weight: 500;
  font-size: 14px;
}

// 进度统计样式
.stats-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.stat-card {
  text-align: center;
  padding: 12px;
  background: #ffffff;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
}

.stat-number {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 12px;
  color: #6b7280;
}

.stat-completed .stat-number {
  color: var(--milestone-completed-color, #16a34a);
}

.stat-progress .stat-number {
  color: var(--milestone-progress-color, #f59e0b);
}

.stat-planned .stat-number {
  color: var(--milestone-planned-color, #2563eb);
}

.stat-delayed .stat-number {
  color: var(--milestone-delayed-color, #dc2626);
}

// 整体进度样式
.progress-display {
  text-align: center;
}

.progress-percentage {
  font-size: 36px;
  font-weight: 700;
  color: #1e3a8a;
  margin-bottom: 8px;
}

.progress-bar-large {
  width: 100%;
  height: 12px;
  background: #e5e7eb;
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 12px;
}

.progress-fill-large {
  height: 100%;
  background: linear-gradient(90deg, #1e3a8a 0%, #0ea5e9 100%);
  border-radius: 6px;
  transition: width 0.5s ease;
}

.progress-time {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: #6b7280;
}

// 时间轴样式
.timeline-container {
  position: relative;
  padding-left: 24px;
}

.timeline-line {
  position: absolute;
  left: 12px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #e5e7eb;
}

.timeline-item {
  position: relative;
  margin-bottom: 24px;
  padding-left: 24px;
}

.timeline-dot {
  position: absolute;
  left: -6px;
  top: 8px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 3px solid #ffffff;
  box-shadow: 0 0 0 2px #e5e7eb;
}

.timeline-dot.completed {
  background: var(--milestone-completed-color, #16a34a);
  box-shadow: 0 0 0 2px var(--milestone-completed-color, #16a34a);
}

.timeline-dot.progress {
  background: var(--milestone-progress-color, #f59e0b);
  box-shadow: 0 0 0 2px var(--milestone-progress-color, #f59e0b);
}

.timeline-dot.planned {
  background: var(--milestone-planned-color, #2563eb);
  box-shadow: 0 0 0 2px var(--milestone-planned-color, #2563eb);
}

.timeline-dot.delayed {
  background: var(--milestone-delayed-color, #dc2626);
  box-shadow: 0 0 0 2px var(--milestone-delayed-color, #dc2626);
}

.timeline-content {
  background: #ffffff;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.timeline-title {
  font-size: 16px;
  font-weight: 600;
  color: #111827;
  margin-bottom: 4px;
}

.timeline-time {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 8px;
}

.timeline-description {
  font-size: 14px;
  color: #374151;
  line-height: 1.5;
  margin-bottom: 8px;
}

.timeline-progress {
  margin-top: 8px;
}

.milestone-progress-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.milestone-progress-bar {
  flex: 1;
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  overflow: hidden;
}

.milestone-progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.milestone-progress-fill.completed {
  background: var(--milestone-completed-color, #16a34a);
}

.milestone-progress-fill.progress {
  background: var(--milestone-progress-color, #f59e0b);
}

.milestone-progress-fill.planned {
  background: var(--milestone-planned-color, #2563eb);
}

.milestone-progress-fill.delayed {
  background: var(--milestone-delayed-color, #dc2626);
}

.milestone-progress-text {
  font-size: 12px;
  color: #6b7280;
  min-width: 35px;
}

// 空状态样式
.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: #6b7280;
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.empty-state-text {
  font-size: 16px;
  margin-bottom: 8px;
}

.empty-state-hint {
  font-size: 14px;
  color: #9ca3af;
}

// 响应式设计
@media (max-width: 768px) {
  .overview-grid {
    grid-template-columns: 1fr;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .progress-time {
    flex-direction: column;
    gap: 4px;
  }
}
</style>
```

## ⚠️ 重要注意事项

1. **严格按照原型图实现**：使用Element Plus组件，保持原型图的视觉效果
2. **接口数据获取**：所有数据通过后端接口获取，包含完整的错误处理和加载状态
3. **时间轴可视化**：使用CSS实现时间轴效果，不同状态不同颜色
4. **进度条动画**：使用CSS transition实现进度条动画效果
5. **数据来源**：支持URL参数和iframe消息两种项目ID传入方式
6. **响应式设计**：移动端适配
7. **国际化支持**：所有文本使用$t()函数
8. **状态常量管理**：项目状态和里程碑状态统一管理，支持颜色配置
9. **统计计算**：统计数据由后端接口直接提供，无需前端计算

**最终要求：生成的代码必须与原型图的视觉效果和交互逻辑完全一致！**
