# 统一页面开发提示词模板

## 🎯 使用说明

基于现有项目架构，严格按照原型图开发**单个页面**，要求代码可直接运行。

## 📋 页面信息
- **原型图路径**：[具体原型图路径]
- **页面类型**：[认证页面/列表页面/表单页面/详情页面/仪表板页面]
- **页面名称**：[具体页面名称]
- **主要功能**：[具体功能描述]
- **对应文件路径**：[具体文件路径]

## 🏗️ 项目架构要点

### **核心架构**
```
src/
├── api/                    # API层（按模块组织）
├── components/            # 组件层
│   ├── Common/            # 基础组件（BaseButton, BaseCard, BaseTable等）
│   ├── Business/          # 业务组件（按功能+模块组织）
│   └── Layout/            # 布局组件（MainLayout, Header, Sidebar）
├── views/                 # 页面视图
├── store/                 # 状态管理（Pinia）
├── router/                # 路由配置
├── utils/                 # 工具函数
├── locales/               # 国际化
└── directives/            # 自定义指令（权限控制）
```

### **组件使用策略**
1. **基础组件**：`BaseButton`, `BaseCard`, `BaseTable`, `BasePagination`, `BaseScrollbar`
2. **业务组件**：按需使用，如 `SearchForm`, `DataTable`, `InfoCard` 等
3. **布局组件**：认证页面不用 `MainLayout`，业务页面必须用

## 🛠️ 开发规范

### 1. 组件导入规范
```vue
<script setup>
// 基础组件
import { BaseButton, BaseCard, BaseTable, BasePagination } from '@/components/Common'

// 业务组件（按需）
import { SearchForm, DataTable } from '@/components/Business/List'
import { InfoCard, ProgressBar } from '@/components/Business/Detail'

// API（按模块）
import { getProjectList, createProject } from '@/api/Project'

// 状态管理
import { useAuthStore } from '@/store/modules/auth'

// 工具函数（按需）
import { formatDate, getRelativeTime } from '@/utils/date'
import { formatFileSize, checkFileType } from '@/utils/file'
import { validateEmail, validatePhone } from '@/utils/validate'
import { STATUS, STATUS_CONFIG, PERMISSIONS } from '@/utils/constants'
import { createLogger } from '@/utils/simpleLogger'
</script>
```

### 2. 页面结构规范

#### **认证页面**（不使用MainLayout）
```vue
<template>
  <BaseScrollbar class="auth-page">
    <div class="auth-container">
      <BaseCard class="auth-card">
        <!-- 页面内容 -->
      </BaseCard>
    </div>
  </BaseScrollbar>
</template>
```

#### **业务页面**（使用MainLayout）
```vue
<template>
  <div class="page-container">
    <!-- 页面头部 -->
    <div class="page-header">
      <h1>{{ $t('page.title') }}</h1>
      <BaseButton type="primary" @click="handleCreate">
        {{ $t('common.create') }}
      </BaseButton>
    </div>
    
    <!-- 页面内容 -->
    <BaseCard class="content-card">
      <!-- 具体内容 -->
    </BaseCard>
  </div>
</template>
```

### 3. API调用规范
```vue
<script setup>
import { ref, onMounted } from 'vue'
import { ElMessage } from 'element-plus'
import { getProjectList } from '@/api/Project'
import { createLogger } from '@/utils/simpleLogger'

const logger = createLogger('ProjectList')
const loading = ref(false)
const data = ref([])

const fetchData = async () => {
  try {
    loading.value = true
    logger.info('开始获取项目列表')
    const response = await getProjectList({ page: 1, size: 10 })
    data.value = response.data
    logger.info('项目列表获取成功', { count: data.value.length })
  } catch (error) {
    logger.error('获取项目列表失败', error)
    ElMessage.error('获取数据失败')
  } finally {
    loading.value = false
  }
}

onMounted(() => {
  fetchData()
})
</script>
```

### 4. 样式规范
```scss
<style lang="scss" scoped>
.page-container {
  padding: var(--gap-lg);
  background: var(--bg);
  min-height: 100vh;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--gap-lg);
  
  h1 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--text);
    margin: 0;
  }
}

// 响应式设计
@media (max-width: 768px) {
  .page-container {
    padding: var(--gap-md);
  }
}
</style>
```

### 5. 国际化规范
```vue
<template>
  <!-- 所有文本使用 $t() 函数 -->
  <h1>{{ $t('page.title') }}</h1>
  <el-button>{{ $t('common.confirm') }}</el-button>
</template>

<script setup>
import { useI18n } from 'vue-i18n'
const { t } = useI18n()
</script>
```

### 6. 工具函数使用规范

#### **日期处理工具** (`@/utils/date`)
```vue
<template>
  <!-- 格式化日期显示 -->
  <span>{{ formatDate(item.createTime, 'YYYY-MM-DD HH:mm') }}</span>
  <!-- 相对时间显示 -->
  <span>{{ getRelativeTime(item.updateTime) }}</span>
</template>

<script setup>
import { formatDate, getRelativeTime } from '@/utils/date'

// 在计算属性中使用
const formattedDate = computed(() => formatDate(data.value.createTime))
</script>
```

#### **文件处理工具** (`@/utils/file`)
```vue
<template>
  <!-- 文件大小显示 -->
  <span>{{ formatFileSize(file.size) }}</span>
  <!-- 文件类型检查 -->
  <el-upload :before-upload="handleBeforeUpload">
</template>

<script setup>
import { formatFileSize, checkFileType, checkFileSize } from '@/utils/file'
import { FILE_TYPES } from '@/utils/constants'

const handleBeforeUpload = (file) => {
  // 检查文件类型
  if (!checkFileType(file, FILE_TYPES.DOCUMENT)) {
    ElMessage.error('不支持的文件类型')
    return false
  }
  
  // 检查文件大小 (5MB)
  if (!checkFileSize(file, 5 * 1024 * 1024)) {
    ElMessage.error('文件大小不能超过5MB')
    return false
  }
  
  return true
}
</script>
```

#### **表单验证工具** (`@/utils/validate`)
```vue
<script setup>
import { validateEmail, validatePhone, validatePassword } from '@/utils/validate'

// 自定义验证规则
const formRules = {
  email: [
    { required: true, message: '请输入邮箱', trigger: 'blur' },
    { 
      validator: (rule, value, callback) => {
        if (!validateEmail(value)) {
          callback(new Error('请输入正确的邮箱格式'))
        } else {
          callback()
        }
      }, 
      trigger: 'blur' 
    }
  ],
  phone: [
    { required: true, message: '请输入手机号', trigger: 'blur' },
    { 
      validator: (rule, value, callback) => {
        if (!validatePhone(value)) {
          callback(new Error('请输入正确的手机号格式'))
        } else {
          callback()
        }
      }, 
      trigger: 'blur' 
    }
  ]
}
</script>
```

#### **常量使用** (`@/utils/constants`)
```vue
<template>
  <!-- 状态标签 -->
  <el-tag :type="STATUS_CONFIG[item.status].type">
    {{ STATUS_CONFIG[item.status].text }}
  </el-tag>
  
  <!-- 权限控制 -->
  <el-button v-if="authStore.hasPermission(PERMISSIONS.PROJECT_CREATE)">
    新建项目
  </el-button>
</template>

<script setup>
import { STATUS, STATUS_CONFIG, PERMISSIONS } from '@/utils/constants'
import { useAuthStore } from '@/store/modules/auth'

const authStore = useAuthStore()

// 状态映射函数
const getStatusConfig = (status) => {
  return STATUS_CONFIG[status] || { text: '未知', type: 'info' }
}
</script>
```

#### **日志系统** (`@/utils/simpleLogger`)
```vue
<script setup>
import { createLogger } from '@/utils/simpleLogger'

const logger = createLogger('ComponentName')

const handleAction = () => {
  logger.info('用户执行操作', { action: 'click', target: 'button' })
  
  try {
    // 业务逻辑
    logger.debug('操作执行成功')
  } catch (error) {
    logger.error('操作执行失败', error)
  }
}
</script>
```

#### **认证工具** (`@/utils/auth`)
```vue
<script setup>
import { getToken, getUserInfo, getPermissions } from '@/utils/auth'

// 检查登录状态
const checkAuth = () => {
  if (!getToken()) {
    router.push('/login')
    return false
  }
  return true
}

// 获取用户信息
const userInfo = getUserInfo()
const permissions = getPermissions()
</script>
```

## 📝 代码输出要求

### 必须包含
- ✅ **完整模板结构**（严格按照原型图）
- ✅ **完整脚本逻辑**（业务逻辑、错误处理）
- ✅ **完整样式定义**（使用设计系统变量）
- ✅ **API调用逻辑**（使用正确的API导入）
- ✅ **国际化文本**（所有文本使用$t()函数）
- ✅ **工具函数使用**（合理使用@/utils/中的工具函数）
- ✅ **日志记录**（使用createLogger记录关键操作）
- ✅ **常量引用**（使用@/utils/constants中的常量）

### 代码质量
- ✅ **无语法错误**：代码可直接运行
- ✅ **无ESLint错误**：符合代码规范
- ✅ **架构适配**：使用现有组件和API结构
- ✅ **响应式设计**：支持移动端适配

## ⚠️ 重要约束

### 文件操作
- ❌ **不要创建新文件**：所有代码写在指定文件路径
- ❌ **不要修改项目结构**：严格按照现有目录结构
- ❌ **不要修改现有组件**：只使用，不修改

### 功能实现
- ✅ **完整功能**：实现原型图中的所有功能
- ✅ **错误处理**：包含完整的错误处理逻辑
- ✅ **用户体验**：提供良好的加载状态和反馈

**最终要求：生成的代码必须可以直接运行，无需额外修改，完全符合项目架构和开发规范。**

---

## 🎯 页面类型开发指南

### 1. 列表页面
- **组件组合**：`SearchForm` + `DataTable` + `BasePagination`
- **功能特性**：搜索、分页、操作按钮、状态标签
- **工具使用**：
  - `formatDate` 格式化时间显示
  - `STATUS_CONFIG` 状态标签配置
  - `createLogger` 记录操作日志
  - `PERMISSIONS` 权限控制

### 2. 详情页面
- **组件组合**：`InfoCard` + `ProgressBar` + `Timeline` + `AttachmentList`
- **功能特性**：详细信息、进度、时间线、附件管理
- **工具使用**：
  - `formatDate` 格式化时间显示
  - `formatFileSize` 文件大小显示
  - `getRelativeTime` 相对时间显示

### 3. 表单页面
- **组件组合**：`FormSection` + `FileUpload` + `FormActions`
- **功能特性**：表单验证、文件上传、操作按钮
- **工具使用**：
  - `validateEmail/Phone/Password` 表单验证
  - `checkFileType/Size` 文件验证
  - `formatFileSize` 文件大小显示

### 4. 认证页面
- **组件组合**：`BaseScrollbar` + `BaseCard`（不使用MainLayout）
- **功能特性**：登录、注册、重置密码
- **工具使用**：
  - `validateEmail/Phone/Password` 表单验证
  - `getToken/isLoggedIn` 认证状态检查

### 5. 仪表板页面
- **组件组合**：`DashboardStatCard` + 图表组件
- **功能特性**：统计数据、图表、快捷操作
- **工具使用**：
  - `formatDate` 时间格式化
  - `STATUS_CONFIG` 状态统计
  - `createLogger` 数据加载日志

### 6. 系统管理页面
- **组件组合**：`DataTable` + `SearchForm` + 对话框
- **功能特性**：用户管理、角色权限、系统配置、日志管理
- **工具使用**：
  - `PERMISSIONS` 权限控制
  - `formatDate` 时间显示
  - `createLogger` 操作日志
  - `validateEmail/Phone` 表单验证

## 📋 工具函数使用清单

### **必须使用的工具函数**
1. **createLogger** - 所有页面都需要日志记录
2. **formatDate** - 所有时间显示都需要格式化
3. **STATUS_CONFIG** - 所有状态标签都需要使用
4. **PERMISSIONS** - 所有权限控制都需要使用

### **按需使用的工具函数**
1. **文件相关**：`formatFileSize`, `checkFileType`, `checkFileSize`
2. **表单验证**：`validateEmail`, `validatePhone`, `validatePassword`
3. **时间相关**：`getRelativeTime`, `getDateRange`
4. **认证相关**：`getToken`, `getUserInfo`, `getPermissions`

**请根据具体页面类型，选择合适的组件组合和工具函数，严格按照原型图实现功能。**