# è§’è‰²æƒé™é¡µé¢å¼€å‘æç¤ºè¯

## ğŸ“‹ é¡µé¢ä¿¡æ¯
- **é¡µé¢åç§°**: è§’è‰²æƒé™
- **æ–‡ä»¶è·¯å¾„**: `src/views/System/Role.vue`
- **è·¯ç”±è·¯å¾„**: `/system/role`
- **æƒé™ä»£ç **: `system:role:view`

## ğŸ¯ å¼€å‘è¦æ±‚

### é¡µé¢ç»“æ„
1. **é¡µé¢å¤´éƒ¨**: æ ‡é¢˜ + æ“ä½œæŒ‰é’®ï¼ˆæ–°å¢è§’è‰²ï¼‰
2. **è§’è‰²åˆ—è¡¨è¡¨æ ¼**: ä½¿ç”¨Element Plusè¡¨æ ¼ç»„ä»¶å±•ç¤ºè§’è‰²ä¿¡æ¯
3. **åˆ†é¡µç»„ä»¶**: ä½¿ç”¨Element Plusåˆ†é¡µç»„ä»¶
4. **æ–°å¢/ç¼–è¾‘è§’è‰²å¯¹è¯æ¡†**: è§’è‰²åŸºæœ¬ä¿¡æ¯è¡¨å•
5. **æƒé™é…ç½®å¯¹è¯æ¡†**: ä½¿ç”¨Element Plusæ ‘å½¢ç»„ä»¶é…ç½®æƒé™

### ç»„ä»¶ä½¿ç”¨
- **å¸ƒå±€ç»„ä»¶**: `MainLayout` (é»˜è®¤å¸ƒå±€)
- **é€šç”¨ç»„ä»¶**: `BaseCard`, `BaseButton`, `BasePagination`
- **ä¸šåŠ¡ç»„ä»¶**: `DataTable`, `ActionButtons`
- **Element Plus**: `el-table`, `el-table-column`, `el-dialog`, `el-form`, `el-tree`, `el-input`, `el-textarea`

### æ ¸å¿ƒåŠŸèƒ½å®ç°
1. **è§’è‰²åˆ—è¡¨å±•ç¤º**: è§’è‰²åç§°ã€æè¿°ã€ç”¨æˆ·æ•°é‡ã€åˆ›å»ºæ—¶é—´
2. **è§’è‰²æ“ä½œ**: æ–°å¢ã€ç¼–è¾‘ã€é…ç½®æƒé™ã€åˆ é™¤
3. **æƒé™é…ç½®**: æ ‘å½¢ç»“æ„å±•ç¤ºæƒé™ï¼Œæ”¯æŒå…¨é€‰ã€æ¸…ç©ºã€æœç´¢
4. **è¡¨å•éªŒè¯**: è§’è‰²åç§°å”¯ä¸€æ€§ã€æè¿°å¿…å¡«
5. **æƒé™æ§åˆ¶**: æ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤ºä¸åŒæ“ä½œæŒ‰é’®

### ä¿¡æ¯å±•ç¤º
- **è§’è‰²åŸºæœ¬ä¿¡æ¯**: è§’è‰²åç§°ã€è§’è‰²æè¿°
- **ç»Ÿè®¡ä¿¡æ¯**: ç”¨æˆ·æ•°é‡ã€åˆ›å»ºæ—¶é—´
- **æƒé™ä¿¡æ¯**: æƒé™æ ‘å½¢ç»“æ„ï¼Œæ”¯æŒå±•å¼€/æ”¶èµ·ã€æœç´¢

## ğŸ“ ä»£ç ç»“æ„

### Vueæ¨¡æ¿ç»“æ„
```vue
<template>
  <div class="role-management-container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <h1 class="page-title">{{ $t('system.role.title') }}</h1>
      <div class="header-actions">
        <el-button type="primary" @click="handleAdd">
          <el-icon><Plus /></el-icon>
          {{ $t('system.role.addRole') }}
        </el-button>
      </div>
    </div>

    <!-- å†…å®¹å¡ç‰‡ -->
    <BaseCard>
      <!-- è§’è‰²åˆ—è¡¨è¡¨æ ¼ -->
      <el-table
        :data="filteredRoles"
        v-loading="loading"
        stripe
        border
        style="width: 100%"
      >
        <el-table-column prop="name" :label="$t('system.role.roleName')" width="150" />
        <el-table-column prop="description" :label="$t('system.role.roleDescription')" min-width="200" />
        <el-table-column prop="userCount" :label="$t('system.role.userCount')" width="100" align="center">
          <template #default="{ row }">
            <el-tag type="info">{{ row.userCount }}</el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="createTime" :label="$t('common.createTime')" width="160" />
        <el-table-column :label="$t('common.actions')" width="280" fixed="right">
          <template #default="{ row }">
            <el-button size="small" @click="handleEdit(row)">{{ $t('common.edit') }}</el-button>
            <el-button size="small" type="primary" @click="handleConfigPermission(row)">
              {{ $t('system.role.configPermission') }}
            </el-button>
            <el-button 
              size="small" 
              type="danger" 
              :disabled="row.userCount > 0"
              @click="handleDelete(row)"
            >
              {{ $t('common.delete') }}
            </el-button>
          </template>
        </el-table-column>
      </el-table>

      <!-- åˆ†é¡µ -->
      <BasePagination
        v-model:current-page="pagination.current"
        v-model:page-size="pagination.size"
        :total="pagination.total"
        @current-change="handlePageChange"
        @size-change="handleSizeChange"
      />
    </BaseCard>

    <!-- æ–°å¢/ç¼–è¾‘è§’è‰²å¯¹è¯æ¡† -->
    <el-dialog
      v-model="showRoleDialog"
      :title="roleDialogTitle"
      width="500px"
      @close="handleRoleDialogClose"
    >
      <el-form
        ref="roleFormRef"
        :model="roleFormData"
        :rules="roleFormRules"
        label-width="100px"
      >
        <el-form-item :label="$t('system.role.roleName')" prop="name">
          <el-input v-model="roleFormData.name" />
        </el-form-item>
        <el-form-item :label="$t('system.role.roleDescription')" prop="description">
          <el-textarea 
            v-model="roleFormData.description" 
            :rows="3"
            :placeholder="$t('system.role.descriptionPlaceholder')"
          />
        </el-form-item>
      </el-form>
      
      <template #footer>
        <el-button @click="showRoleDialog = false">{{ $t('common.cancel') }}</el-button>
        <el-button type="primary" @click="handleRoleSubmit" :loading="submitting">
          {{ $t('common.confirm') }}
        </el-button>
      </template>
    </el-dialog>

    <!-- æƒé™é…ç½®å¯¹è¯æ¡† -->
    <el-dialog
      v-model="showPermissionDialog"
      :title="$t('system.role.configPermission')"
      width="800px"
      @close="handlePermissionDialogClose"
    >
      <div class="permission-config">
        <div class="permission-header">
          <h3>{{ $t('system.role.role') }}ï¼š{{ currentRole?.name }}</h3>
          <div class="permission-actions">
            <el-input
              v-model="permissionSearchText"
              :placeholder="$t('system.role.searchPermission')"
              clearable
              style="width: 200px"
            >
              <template #prefix>
                <el-icon><Search /></el-icon>
              </template>
            </el-input>
            <el-button @click="handleExpandAll">{{ $t('system.role.expandAll') }}</el-button>
            <el-button @click="handleCollapseAll">{{ $t('system.role.collapseAll') }}</el-button>
            <el-button @click="handleSelectAll">{{ $t('system.role.selectAll') }}</el-button>
            <el-button @click="handleClearAll">{{ $t('system.role.clearAll') }}</el-button>
          </div>
        </div>
        
        <el-tree
          ref="permissionTreeRef"
          :data="filteredPermissionTree"
          :props="treeProps"
          show-checkbox
          node-key="id"
          :default-checked-keys="checkedPermissions"
          :filter-node-method="filterNode"
          class="permission-tree"
        />
      </div>
      
      <template #footer>
        <el-button @click="showPermissionDialog = false">{{ $t('common.cancel') }}</el-button>
        <el-button type="primary" @click="handlePermissionSubmit" :loading="submitting">
          {{ $t('system.role.savePermission') }}
        </el-button>
      </template>
    </el-dialog>
  </div>
</template>
```

### JavaScripté€»è¾‘
```javascript
import { ref, reactive, computed, onMounted, nextTick } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/store/modules/auth'
import { useI18n } from 'vue-i18n'
import { formatDate } from '@/utils/date'
import { PERMISSIONS } from '@/utils/constants'
import { validateRoleName } from '@/utils/validate'
import { createLogger } from '@/utils/simpleLogger'

export default {
  name: 'RoleManagement',
  setup() {
    const router = useRouter()
    const authStore = useAuthStore()
    const { t } = useI18n()
    const logger = createLogger('RoleManagement')
    
    // å“åº”å¼æ•°æ®
    const loading = ref(false)
    const submitting = ref(false)
    const showRoleDialog = ref(false)
    const showPermissionDialog = ref(false)
    const isEdit = ref(false)
    const roleFormRef = ref()
    const permissionTreeRef = ref()
    const permissionSearchText = ref('')
    
    // åˆ†é¡µ
    const pagination = reactive({
      current: 1,
      size: 20,
      total: 0
    })
    
    // è§’è‰²è¡¨å•æ•°æ®
    const roleFormData = reactive({
      id: null,
      name: '',
      description: ''
    })
    
    // è§’è‰²è¡¨å•éªŒè¯è§„åˆ™
    const roleFormRules = {
        name: [
          { required: true, message: t('system.role.nameRequired'), trigger: 'blur' },
          { 
            validator: (rule, value, callback) => {
              if (!validateRoleName(value)) {
                callback(new Error(t('system.role.nameFormat')))
              } else {
                callback()
              }
            }, 
            trigger: 'blur' 
          }
        ],
      description: [
        { required: true, message: t('system.role.descriptionRequired'), trigger: 'blur' }
      ]
    }
    
    // å½“å‰æ“ä½œçš„è§’è‰²
    const currentRole = ref(null)
    const checkedPermissions = ref([])
    
    // è§’è‰²åˆ—è¡¨æ•°æ®ï¼ˆé€šè¿‡æ¥å£è·å–ï¼‰
    const roles = ref([])
    
    // åŠ è½½è§’è‰²åˆ—è¡¨
    const loadRoles = async () => {
      try {
        loading.value = true
        logger.info('Loading roles list')
        
        // TODO: æ›¿æ¢ä¸ºå®é™…çš„åç«¯æ¥å£
        // const response = await getRolesList({
        //   page: pagination.current,
        //   size: pagination.size
        // })
        // roles.value = response.data.list
        // pagination.total = response.data.total
        
        // ä¸´æ—¶æ¨¡æ‹Ÿæ•°æ®ï¼ˆåç«¯å¼€å‘å®Œæˆååˆ é™¤ï¼‰
        await new Promise(resolve => setTimeout(resolve, 500))
        
        const mockRoles = [
          {
            id: 1,
            name: 'è¶…çº§ç®¡ç†å‘˜',
            description: 'æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·å’Œè§’è‰²',
            userCount: 1,
            createTime: '2024-01-01 10:00:00',
            permissions: ['*']
          },
          {
            id: 2,
            name: 'æ•™å¸ˆ',
            description: 'å¯ä»¥ç®¡ç†è‡ªå·±çš„é¡¹ç›®å’Œç”³æŠ¥ï¼ŒæŸ¥çœ‹ç›¸å…³æŠ¥å‘Š',
            userCount: 5,
            createTime: '2024-01-02 10:00:00',
            permissions: ['project:view', 'project:create', 'declaration:view', 'declaration:create']
          },
          {
            id: 3,
            name: 'å­¦ç”Ÿ',
            description: 'å¯ä»¥æŸ¥çœ‹å’Œå‚ä¸é¡¹ç›®ï¼Œæäº¤ç”³æŠ¥',
            userCount: 20,
            createTime: '2024-01-03 10:00:00',
            permissions: ['project:view', 'declaration:view', 'declaration:create']
          }
        ]
        
        roles.value = mockRoles
        pagination.total = mockRoles.length
        logger.info('Roles list loaded successfully', { count: roles.value.length })
      } catch (error) {
        logger.error('Failed to load roles list', error)
        ElMessage.error(t('system.role.loadError'))
      } finally {
        loading.value = false
      }
    }
    
    // æƒé™æ ‘æ•°æ®ï¼ˆé€šè¿‡æ¥å£è·å–ï¼‰
    const permissionTree = ref([])
    
    // åŠ è½½æƒé™æ ‘æ•°æ®
    const loadPermissionTree = async () => {
      try {
        logger.info('Loading permission tree')
        
        // TODO: æ›¿æ¢ä¸ºå®é™…çš„åç«¯æ¥å£
        // const response = await getPermissionTree()
        // permissionTree.value = response.data.tree
        
        // ä¸´æ—¶æ¨¡æ‹Ÿæ•°æ®ï¼ˆåç«¯å¼€å‘å®Œæˆååˆ é™¤ï¼‰
        await new Promise(resolve => setTimeout(resolve, 300))
        
        const mockPermissionTree = [
          {
            id: 'dashboard',
            label: 'ä»ªè¡¨æ¿',
            children: [
              { id: 'dashboard:view', label: 'æŸ¥çœ‹ä»ªè¡¨æ¿' }
            ]
          },
          {
            id: 'project',
            label: 'é¡¹ç›®ç®¡ç†',
            children: [
              { id: 'project:view', label: 'æŸ¥çœ‹é¡¹ç›®' },
              { id: 'project:create', label: 'åˆ›å»ºé¡¹ç›®' },
              { id: 'project:edit', label: 'ç¼–è¾‘é¡¹ç›®' },
              { id: 'project:delete', label: 'åˆ é™¤é¡¹ç›®' }
            ]
          },
          {
            id: 'declaration',
            label: 'ç”³æŠ¥ç®¡ç†',
            children: [
              { id: 'declaration:view', label: 'æŸ¥çœ‹ç”³æŠ¥' },
              { id: 'declaration:create', label: 'åˆ›å»ºç”³æŠ¥' },
              { id: 'declaration:edit', label: 'ç¼–è¾‘ç”³æŠ¥' },
              { id: 'declaration:delete', label: 'åˆ é™¤ç”³æŠ¥' }
            ]
          },
          {
            id: 'system',
            label: 'ç³»ç»Ÿç®¡ç†',
            children: [
              { id: 'system:user:view', label: 'æŸ¥çœ‹ç”¨æˆ·' },
              { id: 'system:user:create', label: 'åˆ›å»ºç”¨æˆ·' },
              { id: 'system:user:edit', label: 'ç¼–è¾‘ç”¨æˆ·' },
              { id: 'system:user:delete', label: 'åˆ é™¤ç”¨æˆ·' },
              { id: 'system:role:view', label: 'æŸ¥çœ‹è§’è‰²' },
              { id: 'system:role:create', label: 'åˆ›å»ºè§’è‰²' },
              { id: 'system:role:edit', label: 'ç¼–è¾‘è§’è‰²' },
              { id: 'system:role:delete', label: 'åˆ é™¤è§’è‰²' }
            ]
          }
        ]
        
        permissionTree.value = mockPermissionTree
        logger.info('Permission tree loaded successfully', { count: mockPermissionTree.length })
      } catch (error) {
        logger.error('Failed to load permission tree', error)
        ElMessage.error(t('system.role.permissionTreeLoadError'))
      }
    }
    
    // æ ‘å½¢ç»„ä»¶é…ç½®
    const treeProps = {
      children: 'children',
      label: 'label'
    }
    
    // è®¡ç®—å±æ€§
    const roleDialogTitle = computed(() => isEdit.value ? t('system.role.editRole') : t('system.role.addRole'))
    
    const filteredRoles = computed(() => {
      // åˆ†é¡µé€»è¾‘ç”±åç«¯æ¥å£å¤„ç†ï¼Œç›´æ¥è¿”å›è§’è‰²åˆ—è¡¨
      return roles.value
    })
    
    const filteredPermissionTree = computed(() => {
      if (!permissionSearchText.value) {
        return permissionTree.value
      }
      
      const filterTree = (nodes) => {
        return nodes.filter(node => {
          const matchesSearch = node.label.toLowerCase().includes(permissionSearchText.value.toLowerCase())
          const hasMatchingChildren = node.children ? filterTree(node.children).length > 0 : false
          
          if (matchesSearch || hasMatchingChildren) {
            return {
              ...node,
              children: node.children ? filterTree(node.children) : undefined
            }
          }
          return false
        }).map(node => ({
          ...node,
          children: node.children ? filterTree(node.children) : undefined
        }))
      }
      
      return filterTree(permissionTree.value)
    })
    
    // æ–¹æ³•
    const handleAdd = () => {
      isEdit.value = false
      resetRoleForm()
      showRoleDialog.value = true
    }
    
    const handleEdit = (role) => {
      isEdit.value = true
      Object.assign(roleFormData, role)
      showRoleDialog.value = true
    }
    
    const handleConfigPermission = (role) => {
      currentRole.value = role
      checkedPermissions.value = [...role.permissions]
      showPermissionDialog.value = true
      
      nextTick(() => {
        permissionTreeRef.value?.setCheckedKeys(checkedPermissions.value)
      })
    }
    
    const handleDelete = async (role) => {
      if (role.userCount > 0) {
        ElMessage.warning(t('system.role.cannotDeleteWithUsers'))
        return
      }
      
      try {
        await ElMessageBox.confirm(
          t('system.role.deleteConfirm', { name: role.name }),
          t('system.role.deleteRole'),
          { type: 'warning' }
        )
        
        logger.info('Deleting role', { roleId: role.id, roleName: role.name })
        
        // TODO: æ›¿æ¢ä¸ºå®é™…çš„åç«¯æ¥å£
        // await deleteRole(role.id)
        
        // ä¸´æ—¶æ¨¡æ‹Ÿåˆ é™¤ï¼ˆåç«¯å¼€å‘å®Œæˆååˆ é™¤ï¼‰
        await new Promise(resolve => setTimeout(resolve, 500))
        
        const index = roles.value.findIndex(r => r.id === role.id)
        if (index > -1) {
          roles.value.splice(index, 1)
        }
        
        ElMessage.success(t('system.role.deleteSuccess'))
        logger.info('Role deleted successfully', { roleId: role.id })
      } catch (error) {
        if (error !== 'cancel') {
          logger.error('Failed to delete role', error)
          ElMessage.error(t('system.role.deleteFailed'))
        }
      }
    }
    
    const handleRoleSubmit = async () => {
      try {
        await roleFormRef.value.validate()
        
        submitting.value = true
        logger.info('Submitting role form', { isEdit: isEdit.value, roleData: roleFormData })
        
        // TODO: æ›¿æ¢ä¸ºå®é™…çš„åç«¯æ¥å£
        // if (isEdit.value) {
        //   await updateRole(roleFormData.id, roleFormData)
        // } else {
        //   await createRole(roleFormData)
        // }
        
        // ä¸´æ—¶æ¨¡æ‹Ÿä¿å­˜ï¼ˆåç«¯å¼€å‘å®Œæˆååˆ é™¤ï¼‰
        await new Promise(resolve => setTimeout(resolve, 1000))
        
        if (isEdit.value) {
          // æ›´æ–°è§’è‰²
          const index = roles.value.findIndex(r => r.id === roleFormData.id)
          if (index > -1) {
            Object.assign(roles.value[index], roleFormData)
          }
          ElMessage.success(t('system.role.updateSuccess'))
          logger.info('Role updated successfully', { roleId: roleFormData.id })
        } else {
          // æ–°å¢è§’è‰²
          const newRole = {
            ...roleFormData,
            id: Date.now(),
            userCount: 0,
            createTime: new Date().toLocaleString(),
            permissions: []
          }
          roles.value.unshift(newRole)
          ElMessage.success(t('system.role.createSuccess'))
          logger.info('Role created successfully', { roleId: newRole.id })
        }
        
        showRoleDialog.value = false
        submitting.value = false
      } catch (error) {
        submitting.value = false
        if (error !== false) {
          logger.error('Role submit failed', error)
          ElMessage.error(t('common.operationFailed'))
        }
      }
    }
    
    const handlePermissionSubmit = async () => {
      try {
        submitting.value = true
        
        // è·å–é€‰ä¸­çš„æƒé™
        const checkedKeys = permissionTreeRef.value.getCheckedKeys()
        const halfCheckedKeys = permissionTreeRef.value.getHalfCheckedKeys()
        const allCheckedKeys = [...checkedKeys, ...halfCheckedKeys]
        
        logger.info('Submitting role permissions', { 
          roleId: currentRole.value.id, 
          permissions: allCheckedKeys 
        })
        
        // TODO: æ›¿æ¢ä¸ºå®é™…çš„åç«¯æ¥å£
        // await updateRolePermissions(currentRole.value.id, allCheckedKeys)
        
        // ä¸´æ—¶æ¨¡æ‹Ÿä¿å­˜æƒé™ï¼ˆåç«¯å¼€å‘å®Œæˆååˆ é™¤ï¼‰
        await new Promise(resolve => setTimeout(resolve, 1000))
        
        // æ›´æ–°è§’è‰²æƒé™
        const index = roles.value.findIndex(r => r.id === currentRole.value.id)
        if (index > -1) {
          roles.value[index].permissions = allCheckedKeys
        }
        
        ElMessage.success(t('system.role.permissionConfigSuccess'))
        showPermissionDialog.value = false
        submitting.value = false
        logger.info('Role permissions updated successfully', { roleId: currentRole.value.id })
      } catch (error) {
        submitting.value = false
        logger.error('Failed to update role permissions', error)
        ElMessage.error(t('system.role.permissionConfigFailed'))
      }
    }
    
    const handleRoleDialogClose = () => {
      resetRoleForm()
      roleFormRef.value?.resetFields()
    }
    
    const handlePermissionDialogClose = () => {
      currentRole.value = null
      checkedPermissions.value = []
      permissionSearchText.value = ''
    }
    
    const resetRoleForm = () => {
      Object.assign(roleFormData, {
        id: null,
        name: '',
        description: ''
      })
    }
    
    const handleExpandAll = () => {
      const allKeys = []
      const getAllKeys = (nodes) => {
        nodes.forEach(node => {
          allKeys.push(node.id)
          if (node.children) {
            getAllKeys(node.children)
          }
        })
      }
      getAllKeys(permissionTree.value)
      permissionTreeRef.value?.setExpandedKeys(allKeys)
    }
    
    const handleCollapseAll = () => {
      permissionTreeRef.value?.setExpandedKeys([])
    }
    
    const handleSelectAll = () => {
      const allKeys = []
      const getAllKeys = (nodes) => {
        nodes.forEach(node => {
          if (!node.children) {
            allKeys.push(node.id)
          } else {
            getAllKeys(node.children)
          }
        })
      }
      getAllKeys(permissionTree.value)
      permissionTreeRef.value?.setCheckedKeys(allKeys)
    }
    
    const handleClearAll = () => {
      permissionTreeRef.value?.setCheckedKeys([])
    }
    
    const filterNode = (value, data) => {
      if (!value) return true
      return data.label.toLowerCase().includes(value.toLowerCase())
    }
    
    const handlePageChange = (page) => {
      pagination.current = page
      loadRoles()
    }
    
    const handleSizeChange = (size) => {
      pagination.size = size
      pagination.current = 1
      loadRoles()
    }
    
    // ç”Ÿå‘½å‘¨æœŸ
    onMounted(() => {
      loadRoles()
      loadPermissionTree()
    })
    
    return {
      loading,
      submitting,
      showRoleDialog,
      showPermissionDialog,
      isEdit,
      roleFormRef,
      permissionTreeRef,
      permissionSearchText,
      pagination,
      roleFormData,
      roleFormRules,
      currentRole,
      checkedPermissions,
      roles,
      permissionTree,
      treeProps,
      roleDialogTitle,
      filteredRoles,
      filteredPermissionTree,
      loadRoles,
      loadPermissionTree,
      handleAdd,
      handleEdit,
      handleConfigPermission,
      handleDelete,
      handleRoleSubmit,
      handlePermissionSubmit,
      handleRoleDialogClose,
      handlePermissionDialogClose,
      handleExpandAll,
      handleCollapseAll,
      handleSelectAll,
      handleClearAll,
      filterNode,
      handlePageChange,
      handleSizeChange
    }
  }
}
```

## ğŸ¨ æ ·å¼å®ç°

```scss
<style scoped>
.role-management-container {
  padding: 20px;
  background: #f7f9fc;
  min-height: calc(100vh - 56px);
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.permission-config {
  .permission-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
    
    h3 {
      margin: 0;
      color: #1e3a8a;
      font-size: 16px;
      font-weight: 600;
    }
    
    .permission-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }
  }
  
  .permission-tree {
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 12px;
  }
}

:deep(.el-table) {
  border-radius: 8px;
  overflow: hidden;
}

:deep(.el-table__header) {
  background: #f8fafc;
}

:deep(.el-table th) {
  background: #f8fafc;
  color: #374151;
  font-weight: 600;
}

:deep(.el-table--striped .el-table__body tr.el-table__row--striped td) {
  background: #f9fafb;
}

:deep(.el-table__body tr:hover > td) {
  background: #f0f9ff;
}

:deep(.el-tag) {
  border-radius: 4px;
  font-weight: 500;
}

:deep(.el-dialog) {
  border-radius: 12px;
}

:deep(.el-dialog__header) {
  border-bottom: 1px solid #f0f0f0;
  padding: 20px 24px 16px;
}

:deep(.el-dialog__title) {
  font-size: 18px;
  font-weight: 600;
  color: #1e3a8a;
}

:deep(.el-dialog__body) {
  padding: 20px 24px;
}

:deep(.el-dialog__footer) {
  border-top: 1px solid #f0f0f0;
  padding: 16px 24px 20px;
}

:deep(.el-tree) {
  background: transparent;
}

:deep(.el-tree-node__content) {
  height: 32px;
  line-height: 32px;
}

:deep(.el-tree-node__label) {
  font-size: 14px;
  color: #374151;
}

:deep(.el-checkbox) {
  margin-right: 8px;
}
</style>
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¡¨æ ¼ç»„ä»¶**: ä½¿ç”¨Element Plusçš„`el-table`å’Œ`el-table-column`ç»„ä»¶ï¼Œä¸è¦ä½¿ç”¨åŸç”ŸHTMLè¡¨æ ¼
2. **æƒé™æ ‘**: ä½¿ç”¨Element Plusçš„`el-tree`ç»„ä»¶ï¼Œæ”¯æŒå¤é€‰æ¡†ã€æœç´¢ã€å±•å¼€/æ”¶èµ·åŠŸèƒ½
3. **æƒé™æ§åˆ¶**: æ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤ºä¸åŒçš„æ“ä½œæŒ‰é’®ï¼Œåˆ é™¤è§’è‰²å‰æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·
4. **è¡¨å•éªŒè¯**: è§’è‰²åç§°å”¯ä¸€æ€§æ£€æŸ¥ã€æè¿°å¿…å¡«éªŒè¯
5. **æƒé™é…ç½®**: æ”¯æŒå…¨é€‰ã€æ¸…ç©ºã€æœç´¢æƒé™ï¼Œä¿å­˜æ—¶åŒ…å«åŠé€‰çŠ¶æ€
6. **åˆ†é¡µåŠŸèƒ½**: ä½¿ç”¨Element Plusåˆ†é¡µç»„ä»¶ï¼Œæ”¯æŒé¡µç è·³è½¬å’Œæ¯é¡µæ˜¾ç¤ºæ•°é‡è°ƒæ•´
7. **æ¥å£é›†æˆ**: æ‰€æœ‰æ•°æ®æ“ä½œé€šè¿‡åç«¯æ¥å£å®ç°ï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
8. **ç”¨æˆ·ä½“éªŒ**: æ“ä½œæˆåŠŸ/å¤±è´¥éƒ½æœ‰ç›¸åº”çš„æ¶ˆæ¯æç¤ºï¼Œé‡è¦æ“ä½œéœ€è¦ç¡®è®¤å¯¹è¯æ¡†
9. **æ ‘å½¢ç»“æ„**: æƒé™æ ‘æ”¯æŒå¤šçº§ç»“æ„ï¼Œæ”¯æŒæœç´¢è¿‡æ»¤å’Œæ‰¹é‡æ“ä½œ
10. **çŠ¶æ€ç®¡ç†**: æƒé™é…ç½®å¯¹è¯æ¡†å…³é—­æ—¶é‡ç½®ç›¸å…³çŠ¶æ€

**æœ€ç»ˆè¦æ±‚ï¼šç”Ÿæˆçš„ä»£ç å¿…é¡»ä¸åŸå‹å›¾çš„è§†è§‰æ•ˆæœå’Œäº¤äº’é€»è¾‘å®Œå…¨ä¸€è‡´ï¼**
