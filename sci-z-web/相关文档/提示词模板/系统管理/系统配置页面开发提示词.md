# ç³»ç»Ÿé…ç½®é¡µé¢å¼€å‘æç¤ºè¯

## ğŸ“‹ é¡µé¢ä¿¡æ¯
- **é¡µé¢åç§°**: ç³»ç»Ÿé…ç½®
- **æ–‡ä»¶è·¯å¾„**: `src/views/System/Config.vue`
- **è·¯ç”±è·¯å¾„**: `/system/config`
- **æƒé™ä»£ç **: `system:config:view`

## ğŸ¯ å¼€å‘è¦æ±‚

### é¡µé¢ç»“æ„
1. **é¡µé¢å¤´éƒ¨**: æ ‡é¢˜ + æ“ä½œæŒ‰é’®ï¼ˆä¿å­˜é…ç½®ã€é‡ç½®é…ç½®ï¼‰
2. **é…ç½®é€‰é¡¹å¡**: åŸºç¡€é…ç½®ã€Difyé…ç½®ã€é‚®ä»¶é…ç½®ã€æ–‡ä»¶é…ç½®ã€å®‰å…¨é…ç½®
3. **é…ç½®è¡¨å•**: æ¯ä¸ªé€‰é¡¹å¡åŒ…å«ç›¸åº”çš„é…ç½®é¡¹å’Œè¡¨å•éªŒè¯
4. **æ“ä½œæŒ‰é’®**: ä¿å­˜ã€é‡ç½®ã€æµ‹è¯•è¿æ¥ï¼ˆé‚®ä»¶é…ç½®ï¼‰

### ç»„ä»¶ä½¿ç”¨
- **å¸ƒå±€ç»„ä»¶**: `MainLayout` (é»˜è®¤å¸ƒå±€)
- **é€šç”¨ç»„ä»¶**: `BaseCard`, `BaseButton`
- **Element Plus**: `el-tabs`, `el-tab-pane`, `el-form`, `el-form-item`, `el-input`, `el-switch`, `el-select`, `el-tag`, `el-button`

### æ ¸å¿ƒåŠŸèƒ½å®ç°
1. **é…ç½®åˆ†ç±»**: åŸºç¡€ã€Difyã€é‚®ä»¶ã€æ–‡ä»¶ã€å®‰å…¨äº”ä¸ªé…ç½®ç±»åˆ«
2. **è¡¨å•éªŒè¯**: é‚®ç®±æ ¼å¼ã€URLæ ¼å¼ã€ç«¯å£èŒƒå›´ã€æ–‡ä»¶å¤§å°é™åˆ¶
3. **é…ç½®ä¿å­˜**: æ‰¹é‡ä¿å­˜æ‰€æœ‰é…ç½®é¡¹
4. **é…ç½®é‡ç½®**: é‡ç½®ä¸ºé»˜è®¤é…ç½®
5. **æµ‹è¯•åŠŸèƒ½**: é‚®ä»¶é…ç½®æ”¯æŒæµ‹è¯•è¿æ¥

### ä¿¡æ¯å±•ç¤º
- **åŸºç¡€é…ç½®**: ç³»ç»Ÿåç§°ã€ç³»ç»Ÿæè¿°ã€æ—¶åŒºã€è¯­è¨€
- **Difyé…ç½®**: APIåœ°å€ã€APIå¯†é’¥ã€æ¨¡å‹é…ç½®
- **é‚®ä»¶é…ç½®**: SMTPæœåŠ¡å™¨ã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ã€SSLè®¾ç½®
- **æ–‡ä»¶é…ç½®**: ä¸Šä¼ è·¯å¾„ã€å…è®¸æ ¼å¼ã€å¤§å°é™åˆ¶
- **å®‰å…¨é…ç½®**: å¯†ç ç­–ç•¥ã€ç™»å½•ç­–ç•¥ã€ä¼šè¯è¶…æ—¶

## ğŸ“ ä»£ç ç»“æ„

### Vueæ¨¡æ¿ç»“æ„
```vue
<template>
  <div class="system-config-container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <h1 class="page-title">{{ $t('system.config.title') }}</h1>
      <div class="header-actions">
        <el-button @click="handleReset">
          <el-icon><Refresh /></el-icon>
          {{ $t('system.config.resetConfig') }}
        </el-button>
        <el-button type="primary" @click="handleSave" :loading="saving">
          <el-icon><Check /></el-icon>
          {{ $t('system.config.saveConfig') }}
        </el-button>
      </div>
    </div>

    <!-- é…ç½®å†…å®¹ -->
    <BaseCard>
      <el-tabs v-model="activeTab" type="border-card">
        <!-- åŸºç¡€é…ç½® -->
        <el-tab-pane :label="$t('system.config.basicConfig')" name="basic">
          <el-form
            ref="basicFormRef"
            :model="basicConfig"
            :rules="basicRules"
            label-width="120px"
            class="config-form"
          >
            <el-form-item label="ç³»ç»Ÿåç§°" prop="systemName">
              <el-input v-model="basicConfig.systemName" placeholder="è¯·è¾“å…¥ç³»ç»Ÿåç§°" />
            </el-form-item>
            <el-form-item label="ç³»ç»Ÿæè¿°" prop="systemDescription">
              <el-textarea 
                v-model="basicConfig.systemDescription" 
                :rows="3"
                placeholder="è¯·è¾“å…¥ç³»ç»Ÿæè¿°"
              />
            </el-form-item>
            <el-form-item label="æ—¶åŒº" prop="timezone">
              <el-select v-model="basicConfig.timezone" style="width: 100%">
                <el-option label="åŒ—äº¬æ—¶é—´ (UTC+8)" value="Asia/Shanghai" />
                <el-option label="ä¸œäº¬æ—¶é—´ (UTC+9)" value="Asia/Tokyo" />
                <el-option label="çº½çº¦æ—¶é—´ (UTC-5)" value="America/New_York" />
                <el-option label="ä¼¦æ•¦æ—¶é—´ (UTC+0)" value="Europe/London" />
              </el-select>
            </el-form-item>
            <el-form-item label="é»˜è®¤è¯­è¨€" prop="defaultLanguage">
              <el-select v-model="basicConfig.defaultLanguage" style="width: 100%">
                <el-option label="ç®€ä½“ä¸­æ–‡" value="zh-CN" />
                <el-option label="English" value="en-US" />
                <el-option label="æ—¥æœ¬èª" value="ja-JP" />
                <el-option label="í•œêµ­ì–´" value="ko-KR" />
              </el-select>
            </el-form-item>
            <el-form-item label="å¯ç”¨ç»´æŠ¤æ¨¡å¼" prop="maintenanceMode">
              <el-switch v-model="basicConfig.maintenanceMode" />
              <span class="form-tip">å¯ç”¨åç³»ç»Ÿå°†æ˜¾ç¤ºç»´æŠ¤é¡µé¢</span>
            </el-form-item>
          </el-form>
        </el-tab-pane>

        <!-- Difyé…ç½® -->
        <el-tab-pane :label="$t('system.config.difyConfig')" name="dify">
          <el-form
            ref="difyFormRef"
            :model="difyConfig"
            :rules="difyRules"
            label-width="120px"
            class="config-form"
          >
            <el-form-item label="APIåœ°å€" prop="apiUrl">
              <el-input v-model="difyConfig.apiUrl" placeholder="https://api.dify.ai" />
            </el-form-item>
            <el-form-item label="APIå¯†é’¥" prop="apiKey">
              <el-input 
                v-model="difyConfig.apiKey" 
                type="password" 
                show-password
                placeholder="è¯·è¾“å…¥APIå¯†é’¥"
              />
            </el-form-item>
            <el-form-item label="é»˜è®¤æ¨¡å‹" prop="defaultModel">
              <el-select v-model="difyConfig.defaultModel" style="width: 100%">
                <el-option label="GPT-4" value="gpt-4" />
                <el-option label="GPT-3.5 Turbo" value="gpt-3.5-turbo" />
                <el-option label="Claude-3" value="claude-3" />
                <el-option label="æ–‡å¿ƒä¸€è¨€" value="ernie-bot" />
              </el-select>
            </el-form-item>
            <el-form-item label="æœ€å¤§Tokenæ•°" prop="maxTokens">
              <el-input-number 
                v-model="difyConfig.maxTokens" 
                :min="100" 
                :max="4000" 
                style="width: 100%"
              />
            </el-form-item>
            <el-form-item label="æ¸©åº¦å‚æ•°" prop="temperature">
              <el-slider 
                v-model="difyConfig.temperature" 
                :min="0" 
                :max="2" 
                :step="0.1"
                show-input
              />
            </el-form-item>
            <el-form-item label="å¯ç”¨Dify" prop="enabled">
              <el-switch v-model="difyConfig.enabled" />
              <span class="form-tip">å¯ç”¨åå°†ä½¿ç”¨Dify AIæœåŠ¡</span>
            </el-form-item>
          </el-form>
        </el-tab-pane>

        <!-- é‚®ä»¶é…ç½® -->
        <el-tab-pane :label="$t('system.config.emailConfig')" name="email">
          <el-form
            ref="emailFormRef"
            :model="emailConfig"
            :rules="emailRules"
            label-width="120px"
            class="config-form"
          >
            <el-form-item label="SMTPæœåŠ¡å™¨" prop="smtpHost">
              <el-input v-model="emailConfig.smtpHost" placeholder="smtp.qq.com" />
            </el-form-item>
            <el-form-item label="SMTPç«¯å£" prop="smtpPort">
              <el-input-number 
                v-model="emailConfig.smtpPort" 
                :min="1" 
                :max="65535" 
                style="width: 100%"
              />
            </el-form-item>
            <el-form-item label="ç”¨æˆ·å" prop="username">
              <el-input v-model="emailConfig.username" placeholder="è¯·è¾“å…¥é‚®ç®±ç”¨æˆ·å" />
            </el-form-item>
            <el-form-item label="å¯†ç " prop="password">
              <el-input 
                v-model="emailConfig.password" 
                type="password" 
                show-password
                placeholder="è¯·è¾“å…¥é‚®ç®±å¯†ç æˆ–æˆæƒç "
              />
            </el-form-item>
            <el-form-item label="å‘ä»¶äººé‚®ç®±" prop="fromEmail">
              <el-input v-model="emailConfig.fromEmail" placeholder="è¯·è¾“å…¥å‘ä»¶äººé‚®ç®±" />
            </el-form-item>
            <el-form-item label="å‘ä»¶äººåç§°" prop="fromName">
              <el-input v-model="emailConfig.fromName" placeholder="è¯·è¾“å…¥å‘ä»¶äººåç§°" />
            </el-form-item>
            <el-form-item label="å¯ç”¨SSL" prop="enableSSL">
              <el-switch v-model="emailConfig.enableSSL" />
            </el-form-item>
            <el-form-item label="å¯ç”¨TLS" prop="enableTLS">
              <el-switch v-model="emailConfig.enableTLS" />
            </el-form-item>
            <el-form-item>
              <el-button type="primary" @click="handleTestEmail" :loading="testingEmail">
                æµ‹è¯•é‚®ä»¶è¿æ¥
              </el-button>
            </el-form-item>
          </el-form>
        </el-tab-pane>

        <!-- æ–‡ä»¶é…ç½® -->
        <el-tab-pane :label="$t('system.config.fileConfig')" name="file">
          <el-form
            ref="fileFormRef"
            :model="fileConfig"
            :rules="fileRules"
            label-width="120px"
            class="config-form"
          >
            <el-form-item label="ä¸Šä¼ è·¯å¾„" prop="uploadPath">
              <el-input v-model="fileConfig.uploadPath" placeholder="/uploads" />
            </el-form-item>
            <el-form-item label="å…è®¸æ ¼å¼" prop="allowedFormats">
              <el-tag
                v-for="format in fileConfig.allowedFormats"
                :key="format"
                closable
                @close="removeFormat(format)"
                style="margin-right: 8px; margin-bottom: 8px;"
              >
                {{ format }}
              </el-tag>
              <el-input
                v-if="inputVisible"
                ref="inputRef"
                v-model="inputValue"
                size="small"
                style="width: 100px"
                @keyup.enter="handleInputConfirm"
                @blur="handleInputConfirm"
              />
              <el-button v-else size="small" @click="showInput">+ æ·»åŠ æ ¼å¼</el-button>
            </el-form-item>
            <el-form-item label="æœ€å¤§æ–‡ä»¶å¤§å°" prop="maxFileSize">
              <el-input-number 
                v-model="fileConfig.maxFileSize" 
                :min="1" 
                :max="1024" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">MB</span>
            </el-form-item>
            <el-form-item label="æœ€å¤§ä¸Šä¼ æ•°é‡" prop="maxFileCount">
              <el-input-number 
                v-model="fileConfig.maxFileCount" 
                :min="1" 
                :max="100" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">ä¸ªæ–‡ä»¶</span>
            </el-form-item>
            <el-form-item label="å¯ç”¨æ–‡ä»¶å‹ç¼©" prop="enableCompression">
              <el-switch v-model="fileConfig.enableCompression" />
              <span class="form-tip">å¯ç”¨åè‡ªåŠ¨å‹ç¼©å›¾ç‰‡æ–‡ä»¶</span>
            </el-form-item>
          </el-form>
        </el-tab-pane>

        <!-- å®‰å…¨é…ç½® -->
        <el-tab-pane :label="$t('system.config.securityConfig')" name="security">
          <el-form
            ref="securityFormRef"
            :model="securityConfig"
            :rules="securityRules"
            label-width="120px"
            class="config-form"
          >
            <el-form-item label="å¯†ç æœ€å°é•¿åº¦" prop="minPasswordLength">
              <el-input-number 
                v-model="securityConfig.minPasswordLength" 
                :min="6" 
                :max="32" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">ä½</span>
            </el-form-item>
            <el-form-item label="å¯†ç å¤æ‚åº¦" prop="passwordComplexity">
              <el-checkbox-group v-model="securityConfig.passwordComplexity">
                <el-checkbox label="uppercase">åŒ…å«å¤§å†™å­—æ¯</el-checkbox>
                <el-checkbox label="lowercase">åŒ…å«å°å†™å­—æ¯</el-checkbox>
                <el-checkbox label="numbers">åŒ…å«æ•°å­—</el-checkbox>
                <el-checkbox label="symbols">åŒ…å«ç‰¹æ®Šå­—ç¬¦</el-checkbox>
              </el-checkbox-group>
            </el-form-item>
            <el-form-item label="ç™»å½•å¤±è´¥æ¬¡æ•°" prop="maxLoginAttempts">
              <el-input-number 
                v-model="securityConfig.maxLoginAttempts" 
                :min="3" 
                :max="10" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">æ¬¡åé”å®šè´¦æˆ·</span>
            </el-form-item>
            <el-form-item label="é”å®šæ—¶é—´" prop="lockoutDuration">
              <el-input-number 
                v-model="securityConfig.lockoutDuration" 
                :min="5" 
                :max="60" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">åˆ†é’Ÿ</span>
            </el-form-item>
            <el-form-item label="ä¼šè¯è¶…æ—¶æ—¶é—´" prop="sessionTimeout">
              <el-input-number 
                v-model="securityConfig.sessionTimeout" 
                :min="30" 
                :max="480" 
                style="width: 200px"
              />
              <span style="margin-left: 8px;">åˆ†é’Ÿ</span>
            </el-form-item>
            <el-form-item label="å¯ç”¨åŒå› å­è®¤è¯" prop="enable2FA">
              <el-switch v-model="securityConfig.enable2FA" />
              <span class="form-tip">å¯ç”¨åç”¨æˆ·å¯è®¾ç½®åŒå› å­è®¤è¯</span>
            </el-form-item>
            <el-form-item label="å¯ç”¨IPç™½åå•" prop="enableIPWhitelist">
              <el-switch v-model="securityConfig.enableIPWhitelist" />
              <span class="form-tip">å¯ç”¨ååªå…è®¸ç™½åå•IPè®¿é—®</span>
            </el-form-item>
          </el-form>
        </el-tab-pane>
      </el-tabs>
    </BaseCard>
  </div>
</template>
```

### JavaScripté€»è¾‘
```javascript
import { ref, reactive, nextTick } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/store/modules/auth'
import { useI18n } from 'vue-i18n'
import { formatDate } from '@/utils/date'
import { validateSystemName, validateSystemDescription, validateApiUrl, validateSmtpHost, validatePort, validateFileSizeMB, validatePasswordLength, validateMaxLoginAttempts, validateSessionTimeout, validateUploadPath } from '@/utils/validate'
import { createLogger } from '@/utils/simpleLogger'

export default {
  name: 'SystemConfig',
  setup() {
    const router = useRouter()
    const authStore = useAuthStore()
    const { t } = useI18n()
    const logger = createLogger('SystemConfig')
    
    // å“åº”å¼æ•°æ®
    const saving = ref(false)
    const testingEmail = ref(false)
    const activeTab = ref('basic')
    const inputVisible = ref(false)
    const inputValue = ref('')
    const inputRef = ref()
    
    // è¡¨å•å¼•ç”¨
    const basicFormRef = ref()
    const difyFormRef = ref()
    const emailFormRef = ref()
    const fileFormRef = ref()
    const securityFormRef = ref()
    
    // åŸºç¡€é…ç½®
    const basicConfig = reactive({
      systemName: 'ç”Ÿæˆå¼é«˜æ ¡ç§‘ç ”ç®¡ç†å¹³å°',
      systemDescription: 'åŸºäºAIGCçš„é«˜æ ¡ç§‘ç ”é¡¹ç›®ç®¡ç†å¹³å°',
      timezone: 'Asia/Shanghai',
      defaultLanguage: 'zh-CN',
      maintenanceMode: false
    })
    
    // Difyé…ç½®
    const difyConfig = reactive({
      apiUrl: 'https://api.dify.ai',
      apiKey: '',
      defaultModel: 'gpt-3.5-turbo',
      maxTokens: 2000,
      temperature: 0.7,
      enabled: false
    })
    
    // é‚®ä»¶é…ç½®
    const emailConfig = reactive({
      smtpHost: 'smtp.qq.com',
      smtpPort: 587,
      username: '',
      password: '',
      fromEmail: '',
      fromName: 'ç³»ç»Ÿé€šçŸ¥',
      enableSSL: false,
      enableTLS: true
    })
    
    // æ–‡ä»¶é…ç½®
    const fileConfig = reactive({
      uploadPath: '/uploads',
      allowedFormats: ['jpg', 'jpeg', 'png', 'pdf', 'doc', 'docx', 'xls', 'xlsx'],
      maxFileSize: 10,
      maxFileCount: 5,
      enableCompression: true
    })
    
    // å®‰å…¨é…ç½®
    const securityConfig = reactive({
      minPasswordLength: 8,
      passwordComplexity: ['lowercase', 'numbers'],
      maxLoginAttempts: 5,
      lockoutDuration: 15,
      sessionTimeout: 120,
      enable2FA: false,
      enableIPWhitelist: false
    })
    
    // è¡¨å•éªŒè¯è§„åˆ™
    const basicRules = {
      systemName: [
        { required: true, message: t('system.config.systemNameRequired'), trigger: 'blur' },
        { 
          validator: (rule, value, callback) => {
            if (!validateSystemName(value)) {
              callback(new Error(t('system.config.systemNameFormat')))
            } else {
              callback()
            }
          }, 
          trigger: 'blur' 
        }
      ],
      systemDescription: [
        { required: true, message: t('system.config.systemDescriptionRequired'), trigger: 'blur' },
        { 
          validator: (rule, value, callback) => {
            if (!validateSystemDescription(value)) {
              callback(new Error(t('system.config.systemDescriptionFormat')))
            } else {
              callback()
            }
          }, 
          trigger: 'blur' 
        }
      ],
      timezone: [
        { required: true, message: t('system.config.timezoneRequired'), trigger: 'change' }
      ],
      defaultLanguage: [
        { required: true, message: t('system.config.defaultLanguageRequired'), trigger: 'change' }
      ]
    }
    
    const difyRules = {
      apiUrl: [
        { required: true, message: t('system.config.apiUrlRequired'), trigger: 'blur' },
        { 
          validator: (rule, value, callback) => {
            if (!validateApiUrl(value)) {
              callback(new Error(t('system.config.apiUrlFormat')))
            } else {
              callback()
            }
          }, 
          trigger: 'blur' 
        }
      ],
      apiKey: [
        { required: true, message: t('system.config.apiKeyRequired'), trigger: 'blur' }
      ]
    }
    
    const emailRules = {
      smtpHost: [
        { required: true, message: t('system.config.smtpHostRequired'), trigger: 'blur' }
      ],
      smtpPort: [
        { required: true, message: t('system.config.smtpPortRequired'), trigger: 'blur' }
      ],
      username: [
        { required: true, message: t('system.config.usernameRequired'), trigger: 'blur' }
      ],
      password: [
        { required: true, message: t('system.config.passwordRequired'), trigger: 'blur' }
      ],
      fromEmail: [
        { required: true, message: t('system.config.fromEmailRequired'), trigger: 'blur' },
        { type: 'email', message: t('system.config.fromEmailFormat'), trigger: 'blur' }
      ]
    }
    
    const fileRules = {
      uploadPath: [
        { required: true, message: t('system.config.uploadPathRequired'), trigger: 'blur' }
      ],
      maxFileSize: [
        { required: true, message: t('system.config.maxFileSizeRequired'), trigger: 'blur' }
      ]
    }
    
    const securityRules = {
      minPasswordLength: [
        { required: true, message: t('system.config.minPasswordLengthRequired'), trigger: 'blur' }
      ],
      maxLoginAttempts: [
        { required: true, message: t('system.config.maxLoginAttemptsRequired'), trigger: 'blur' }
      ]
    }
    
    // æ–¹æ³•
    const handleSave = async () => {
      try {
        // éªŒè¯æ‰€æœ‰è¡¨å•
        const forms = [basicFormRef, difyFormRef, emailFormRef, fileFormRef, securityFormRef]
        const validations = await Promise.all(forms.map(form => form.value?.validate().catch(() => false)))
        
        if (validations.some(valid => !valid)) {
          ElMessage.error(t('system.config.formValidationFailed'))
          return
        }
        
        saving.value = true
        
        // TODO: è°ƒç”¨ä¿å­˜é…ç½®API
        await new Promise(resolve => setTimeout(resolve, 2000))
        
        ElMessage.success(t('system.config.saveSuccess'))
        saving.value = false
      } catch (error) {
        saving.value = false
        ElMessage.error(t('system.config.saveFailed'))
      }
    }
    
    const handleReset = async () => {
      try {
        await ElMessageBox.confirm(
          t('system.config.resetConfirm'),
          t('system.config.resetConfig'),
          { type: 'warning' }
        )
        
        // é‡ç½®ä¸ºé»˜è®¤é…ç½®
        Object.assign(basicConfig, {
          systemName: 'ç”Ÿæˆå¼é«˜æ ¡ç§‘ç ”ç®¡ç†å¹³å°',
          systemDescription: 'åŸºäºAIGCçš„é«˜æ ¡ç§‘ç ”é¡¹ç›®ç®¡ç†å¹³å°',
          timezone: 'Asia/Shanghai',
          defaultLanguage: 'zh-CN',
          maintenanceMode: false
        })
        
        Object.assign(difyConfig, {
          apiUrl: 'https://api.dify.ai',
          apiKey: '',
          defaultModel: 'gpt-3.5-turbo',
          maxTokens: 2000,
          temperature: 0.7,
          enabled: false
        })
        
        Object.assign(emailConfig, {
          smtpHost: 'smtp.qq.com',
          smtpPort: 587,
          username: '',
          password: '',
          fromEmail: '',
          fromName: 'ç³»ç»Ÿé€šçŸ¥',
          enableSSL: false,
          enableTLS: true
        })
        
        Object.assign(fileConfig, {
          uploadPath: '/uploads',
          allowedFormats: ['jpg', 'jpeg', 'png', 'pdf', 'doc', 'docx', 'xls', 'xlsx'],
          maxFileSize: 10,
          maxFileCount: 5,
          enableCompression: true
        })
        
        Object.assign(securityConfig, {
          minPasswordLength: 8,
          passwordComplexity: ['lowercase', 'numbers'],
          maxLoginAttempts: 5,
          lockoutDuration: 15,
          sessionTimeout: 120,
          enable2FA: false,
          enableIPWhitelist: false
        })
        
        ElMessage.success(t('system.config.resetSuccess'))
      } catch (error) {
        // ç”¨æˆ·å–æ¶ˆ
      }
    }
    
    const handleTestEmail = async () => {
      try {
        await emailFormRef.value.validate()
        
        testingEmail.value = true
        
        // TODO: è°ƒç”¨æµ‹è¯•é‚®ä»¶API
        await new Promise(resolve => setTimeout(resolve, 2000))
        
        ElMessage.success(t('system.config.emailTestSuccess'))
        testingEmail.value = false
      } catch (error) {
        testingEmail.value = false
        if (error !== false) {
          ElMessage.error(t('system.config.emailTestFailed'))
        }
      }
    }
    
    const removeFormat = (format) => {
      const index = fileConfig.allowedFormats.indexOf(format)
      if (index > -1) {
        fileConfig.allowedFormats.splice(index, 1)
      }
    }
    
    const showInput = () => {
      inputVisible.value = true
      nextTick(() => {
        inputRef.value?.focus()
      })
    }
    
    const handleInputConfirm = () => {
      if (inputValue.value && !fileConfig.allowedFormats.includes(inputValue.value)) {
        fileConfig.allowedFormats.push(inputValue.value)
      }
      inputVisible.value = false
      inputValue.value = ''
    }
    
    return {
      saving,
      testingEmail,
      activeTab,
      inputVisible,
      inputValue,
      inputRef,
      basicFormRef,
      difyFormRef,
      emailFormRef,
      fileFormRef,
      securityFormRef,
      basicConfig,
      difyConfig,
      emailConfig,
      fileConfig,
      securityConfig,
      basicRules,
      difyRules,
      emailRules,
      fileRules,
      securityRules,
      handleSave,
      handleReset,
      handleTestEmail,
      removeFormat,
      showInput,
      handleInputConfirm
    }
  }
}
```

## ğŸ¨ æ ·å¼å®ç°

```scss
<style scoped>
.system-config-container {
  padding: 20px;
  background: #f7f9fc;
  min-height: calc(100vh - 56px);
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.page-title {
  font-size: 24px;
  font-weight: 600;
  color: #1e3a8a;
  margin: 0;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.config-form {
  padding: 20px;
  max-width: 800px;
}

.form-tip {
  margin-left: 12px;
  color: #6b7280;
  font-size: 12px;
}

:deep(.el-tabs) {
  border-radius: 8px;
  overflow: hidden;
}

:deep(.el-tabs__header) {
  margin: 0;
  background: #f8fafc;
}

:deep(.el-tabs__nav-wrap) {
  padding: 0 20px;
}

:deep(.el-tabs__item) {
  font-weight: 500;
  color: #6b7280;
}

:deep(.el-tabs__item.is-active) {
  color: #1e3a8a;
  font-weight: 600;
}

:deep(.el-tabs__content) {
  padding: 0;
}

:deep(.el-tab-pane) {
  padding: 0;
}

:deep(.el-form-item__label) {
  font-weight: 500;
  color: #374151;
}

:deep(.el-input__wrapper) {
  border-radius: 6px;
}

:deep(.el-textarea__inner) {
  border-radius: 6px;
}

:deep(.el-select .el-input__wrapper) {
  border-radius: 6px;
}

:deep(.el-switch) {
  margin-right: 8px;
}

:deep(.el-tag) {
  border-radius: 4px;
  font-weight: 500;
}

:deep(.el-checkbox-group) {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

:deep(.el-checkbox) {
  margin-right: 0;
}

:deep(.el-slider) {
  margin: 0 12px;
}

:deep(.el-input-number) {
  width: 100%;
}

:deep(.el-input-number .el-input__wrapper) {
  border-radius: 6px;
}
</style>
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é…ç½®åˆ†ç±»**: ä½¿ç”¨Element Plusçš„`el-tabs`ç»„ä»¶ï¼Œåˆ†ä¸ºåŸºç¡€ã€Difyã€é‚®ä»¶ã€æ–‡ä»¶ã€å®‰å…¨äº”ä¸ªé…ç½®ç±»åˆ«
2. **è¡¨å•éªŒè¯**: æ¯ä¸ªé…ç½®ç±»åˆ«éƒ½æœ‰ç›¸åº”çš„éªŒè¯è§„åˆ™ï¼ŒåŒ…æ‹¬å¿…å¡«é¡¹ã€æ ¼å¼éªŒè¯ã€æ•°å€¼èŒƒå›´éªŒè¯
3. **æ–‡ä»¶æ ¼å¼ç®¡ç†**: ä½¿ç”¨`el-tag`ç»„ä»¶ç®¡ç†å…è®¸çš„æ–‡ä»¶æ ¼å¼ï¼Œæ”¯æŒåŠ¨æ€æ·»åŠ å’Œåˆ é™¤
4. **é…ç½®ä¿å­˜**: ä¿å­˜å‰éªŒè¯æ‰€æœ‰è¡¨å•ï¼Œæ”¯æŒæ‰¹é‡ä¿å­˜æ‰€æœ‰é…ç½®é¡¹
5. **é…ç½®é‡ç½®**: é‡ç½®ä¸ºé»˜è®¤é…ç½®ï¼Œéœ€è¦ç”¨æˆ·ç¡®è®¤æ“ä½œ
6. **æµ‹è¯•åŠŸèƒ½**: é‚®ä»¶é…ç½®æ”¯æŒæµ‹è¯•è¿æ¥åŠŸèƒ½ï¼ŒéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
7. **æ¨¡æ‹Ÿæ•°æ®**: ä½¿ç”¨TODOæ³¨é‡Šæ ‡è®°éœ€è¦åç«¯é›†æˆçš„APIè°ƒç”¨
8. **ç”¨æˆ·ä½“éªŒ**: æ“ä½œæˆåŠŸ/å¤±è´¥éƒ½æœ‰ç›¸åº”çš„æ¶ˆæ¯æç¤ºï¼Œé‡è¦æ“ä½œéœ€è¦ç¡®è®¤å¯¹è¯æ¡†
9. **å“åº”å¼è®¾è®¡**: è¡¨å•æ”¯æŒå“åº”å¼å¸ƒå±€ï¼Œåœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º
10. **é…ç½®æŒä¹…åŒ–**: é…ç½®ä¿å­˜åéœ€è¦æŒä¹…åŒ–å­˜å‚¨ï¼Œé¡µé¢åˆ·æ–°åä¿æŒé…ç½®çŠ¶æ€

**æœ€ç»ˆè¦æ±‚ï¼šç”Ÿæˆçš„ä»£ç å¿…é¡»ä¸åŸå‹å›¾çš„è§†è§‰æ•ˆæœå’Œäº¤äº’é€»è¾‘å®Œå…¨ä¸€è‡´ï¼**
