# 高校科研项目管理平台

## 📋 项目概述

高校科研项目管理平台是一个基于 **DDD 领域驱动设计**、**前后端分离**、**单体应用架构**的智能化科研项目全生命周期管理系统。平台以 Dify 工作流为核心，实现科研项目从申报、执行到验收的智能化、自动化管理。

### 🎯 核心特性

- 🎯 **DDD 领域驱动**：8 大领域，清晰的边界，高内聚低耦合
- 🚀 **单体应用架构**：简化部署，易于维护，支持未来拆分为微服务
- 🤖 **AI 智能化**：集成 Dify 平台，实现智能工作流编排
- 📊 **全生命周期管理**：覆盖申报、执行、报告全流程
- 🔒 **安全可靠**：基于 Sa-Token 的 JWT 认证体系
- ⚡ **Java 21 新特性**：虚拟线程、记录模式、模式匹配等

## 🛠️ 技术栈

### 前端技术栈

- **Vue.js 3.x** - 渐进式 JavaScript 框架
- **Vue Router 4.x** - 官方路由管理器
- **Pinia** - 新一代状态管理
- **Element Plus 2.3.14** - Vue 3 企业级组件库
- **Axios** - HTTP 客户端
- **Vite 5.x** - 新一代前端构建工具
- **TypeScript** - 类型安全

### 后端技术栈

- **Java 21 (LTS)** - 编程语言（2023 年 9 月发布，长期支持版本）
- **Spring Boot 3.2.x** - 应用框架（原生支持 Java 21 虚拟线程、记录模式等新特性）
- **PostgreSQL 14+** - 关系型数据库
- **Redis 7.x** - 缓存、会话、分布式锁
- **Apache Kafka 3.x** - 消息队列（领域事件发布）
- **MinIO** - 对象存储（文件存储）
- **Sa-Token 1.37.0+** - 轻量级权限认证框架
- **MyBatis-Plus 3.5.5+** - ORM 框架
- **LangChain4j 0.34.0+** - LLM 集成框架
- **Resilience4j 2.x** - 断路器、重试、限流

### AI 平台

- **Dify** - AI 工作流编排与知识库管理
- **Vector Database** - 向量数据库（语义搜索）

### 架构模式

- **DDD 领域驱动设计** - 单体应用，清晰的领域边界
- **CQRS** - 命令查询职责分离
- **事件驱动** - 基于领域事件的异步处理
- **分层架构** - 接口层、应用层、领域层、基础设施层

## 🚀 功能模块

本系统共包含 **9 大核心功能模块**，覆盖科研项目全生命周期管理。

### 🔐 认证模块

- **用户登录**：支持用户名/邮箱登录，可选记住登录状态
- **用户注册**：新用户注册，支持邮箱/手机验证
- **密码重置**：通过邮箱/手机验证码重置密码
- **验证码**：图形验证码防止暴力破解
- **自动登录**：支持 7 天免登录

### 📊 仪表板模块

- **统计卡片**：项目总数、进行中、待验收、已完成
- **项目进度概览**：可视化展示所有项目的进度
- **最近申报列表**：最新提交的申报记录
- **快捷操作**：快速跳转到各功能模块
- **数据趋势分析**：项目统计数据的趋势变化

### 📝 申报模块

- **申报列表**：查看所有申报记录，支持搜索、筛选、分页
- **新建申报**：填写申报信息（研究方向、领域、课题等）
- **申报详情**：查看申报详细信息和工作流执行结果
- **工作流触发**：提交后触发 Dify 申报工作流
- **状态跟踪**：实时跟踪工作流执行状态
- **草稿保存**：支持保存草稿，稍后继续编辑

### 📁 项目模块

- **项目列表**：查看所有项目，支持搜索、筛选、分页
- **项目详情**：查看项目基本信息、成员、进度、文档
- **成员管理**：添加/移除项目成员，分配成员角色
- **进度管理**：记录项目进度，设置里程碑
- **文档管理**：上传项目文档，自动同步到 Dify 知识库
- **知识库搜索**：基于 Dify 的语义搜索功能

### 📋 报告管理模块

- **报告列表**：查看所有报告，支持搜索、筛选、分页
- **创建报告**：选择项目和报告类型，配置生成参数
- **生成报告**：触发 Dify 工作流，实时显示生成进度
- **报告预览**：在线预览生成的 HTML 报告内容
- **报告导出**：导出为 PDF、Word、Markdown 等格式
- **重新生成**：调整参数后重新生成报告

### 📎 文件管理模块

- **文件上传**：单文件/批量文件上传
- **文件列表**：查看文件列表，支持筛选、搜索
- **文件预览**：在线预览 PDF、图片等文件
- **文件下载**：下载文件到本地
- **文件去重**：通过 MD5 哈希值避免重复存储
- **Dify 同步**：文件自动同步到 Dify 知识库

### 📚 知识库模块

- **知识库创建**：创建独立知识库或关联项目知识库
- **文件夹管理**：创建多级文件夹，支持重命名、删除
- **文件管理**：上传、重命名、删除、移动文件
- **AI 问答**：基于知识库内容进行实时问答
- **知识库共享**：设置知识库为私有或共享
- **Dify 集成**：自动同步到 Dify 知识库

### 🤖 AI 助手模块

- **智能对话**：基于 Dify 平台的智能对话助手
- **项目问答**：项目相关的智能问答和知识检索
- **工作流集成**：与申报、报告生成工作流深度集成
- **知识检索**：基于向量数据库的语义搜索

### 👤 用户中心模块

- **个人信息**：查看和编辑个人资料
- **安全设置**：修改密码、绑定手机/邮箱
- **操作日志**：查看个人操作记录
- **消息通知**：系统消息和通知管理

### ⚙️ 系统管理模块

- **用户管理**：用户账号的创建、编辑、禁用
- **角色权限**：角色定义和权限分配
- **系统配置**：系统参数配置
- **日志管理**：系统操作日志查看和分析

## 🚀 启动部署

### 环境要求

**后端环境：**

- **JDK 21** (LTS, 推荐使用 Eclipse Temurin 或 Oracle OpenJDK)
- **Maven 3.9+** (支持 Java 21)
- **PostgreSQL 14+** (推荐 PostgreSQL 15 或 16)
- **Redis 7.x** (推荐 Redis 7.2+)
- **Kafka 3.x** (推荐 Kafka 3.6+)
- **MinIO** (最新稳定版)

**前端环境：**

- **Node.js 18+** (LTS, 推荐 Node.js 20)
- **npm 9+** 或 **yarn 1.22+** 或 **pnpm 8+**

### 快速启动

#### 1. 后端启动

```bash
# 进入后端项目目录
cd AgentBackendServices

# 安装依赖
mvn clean install

# 启动应用（开发环境）
mvn spring-boot:run

# 或使用 JAR 包启动
java -jar target/agent-backend-services-1.0.0.jar --spring.profiles.active=dev
```

#### 2. 前端启动

```bash
# 进入前端项目目录
cd TestAIDataModel/ApiDify/AIDataTest

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

#### 3. 生产环境部署

**后端部署：**

```bash
# 编译打包
mvn clean package -Dmaven.test.skip=true

# 使用 JVM 参数优化启动
java -Xms2g -Xmx4g \
     -XX:+UseZGC \
     -XX:+EnableVirtualThreads \
     -Dspring.profiles.active=prod \
     -jar target/agent-backend-services-1.0.0.jar
```

**前端部署：**

```bash
# 构建生产版本
npm run build

# 部署到 Nginx
# 将 dist 目录内容复制到 Nginx 静态资源目录
```

## 📄 许可证

MIT License

## 📞 联系方式

如有问题，请联系开发团队。
