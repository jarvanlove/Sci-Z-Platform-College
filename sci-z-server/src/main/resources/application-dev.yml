spring: # Spring 开发环境配置
  datasource:
    url: jdbc:postgresql://localhost:5432/sci-z-college  # 本地数据库 URL
    username: postgres # 本地数据库用户名
    password: postgres # 本地数据库密码
    driver-class-name: org.postgresql.Driver # PostgreSQL 驱动
    hikari:
      maximum-pool-size: 10 # 最大连接数
      minimum-idle: 5 # 最小空闲连接数
      connection-timeout: 30000 # 获取连接超时时间(ms)
      idle-timeout: 600000 # 空闲连接存活时长(ms)
      max-lifetime: 1800000 # 连接最大存活时长(ms)
  redis:
    host: localhost # Redis 主机
    port: 6379 # Redis 端口
    password: # Redis 密码（如无则留空）
    database: 0 # 使用的数据库索引
    timeout: 10000ms # 连接与命令超时
    lettuce:
      pool:
        max-active: 8 # 最大连接数
        max-wait: -1ms # 连接最大等待时间（-1 表示无限）
        max-idle: 8 # 最大空闲连接
        min-idle: 0 # 最小空闲连接

  servlet:
    multipart:
      max-file-size: 200MB # 单文件最大大小
      max-request-size: 200MB # 单次请求总大小

  # 本地 kafka
  bootstrap-servers: localhost:9092
  producer:
    acks: 1 # 生产者确认级别
    retries: 1 # 发送失败重试次数
    linger-ms: 0 # 聚合延迟(ms)
  consumer:
    group-id: sciz-dev # 默认消费组
    auto-offset-reset: earliest # 偏移量不存在时从最早消费

# 本地 MinIO（默认控制台/存储均为本机）
minio: # MinIO 开发环境配置
  endpoint: http://localhost:9111
  access-key: minioadmin
  secret-key: minioadmin
  bucket: sciz-files

# Dify 开发环境密钥（示例值，建议放本地私密配置或环境变量）
dify:
  http:
    connect-timeout-ms: 5000 # 连接超时(ms)
    read-timeout-ms: 60000 # 读超时(ms)
  base-url: http://192.168.1.203/v1 # Dify API 网关
  private-url: http://192.168.1.203 # Dify API 网关
  api-key: dataset-MwOxGbIDhZmg6bUdHEid0rhX    # Dify API 测试知识库 密钥
  api-workflow-key: app-TsSdGbD50r8fDt1shM3RBSMi # Dify API 测试工作流密钥
  timeout: 30000
  connect-timeout: 30000
  retry-count: 3
  enable-retry: true
  default-resource-id: default # 默认资源ID（用于创建知识库时的resourceId参数）
  upload: # 文件上传配置
    dir: D:/uploadpath3/ # 上传文件存储目录（相对路径，相对于项目根目录）
    max-file-size: 104857600 # 最大文件大小（字节），100MB = 100 * 1024 * 1024
    allowed-extensions: .pdf,.doc,.docx,.txt,.md,.xls,.xlsx,.csv,.jpg,.jpeg,.png,.gif # 允许的文件扩展名（逗号分隔）
  chatbot: # Chatbot 模型配置（开发环境）
    model: # 模型配置
      provider: langgenius/tongyi/tongyi # 模型提供商
      name: qwen3-next-80b-a3b-instruct # 模型名称
      mode: chat # 模型模式（chat/completion）
    reranking-model: # 重排序模型配置
      reranking-provider-name: langgenius/tongyi/tongyi # 重排序提供商名称
      reranking-model-name: gte-rerank # 重排序模型名称


# LLM 开发环境配置（OpenAI 兼容接口）
llm: # LLM(OpenAI) 开发环境配置
  openai:
    api-key: YOUR_DEV_LLM_KEY # OpenAI API Key（示例）
    base-url: https://api.openai.com/v1 # OpenAI Base URL
    model: gpt-4o-mini # 默认模型
    timeout-seconds: 60 # 接口超时(s)

# 开发环境日志更详细：调试业务与 Web/MyBatis 行为
logging:
  level:
    com.sciz.server: DEBUG
    org.springframework.web: DEBUG
    com.baomidou.mybatisplus: DEBUG
    org.mybatis: DEBUG

# Actuator（dev）：开放全部端点，健康详情完全展示
management:
  endpoints:
    web:
      exposure:
        include: "*" # 开发环境开放所有端点
  endpoint:
    health:
      show-details: always
  health: # 健康检查配置
    mail: # 邮件健康检查配置
      enabled: false # 禁用邮件健康检查（避免默认配置导致连接失败）
